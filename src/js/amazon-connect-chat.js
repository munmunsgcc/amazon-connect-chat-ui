!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){var o;!function(){"use strict";var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(e){return c(u(e),arguments)}function a(e,t){return i.apply(null,[e].concat(t||[]))}function c(e,t){var n,o,a,c,s,u,l,f,p,h=1,d=e.length,g="";for(o=0;o<d;o++)if("string"==typeof e[o])g+=e[o];else if("object"==typeof e[o]){if((c=e[o]).keys)for(n=t[h],a=0;a<c.keys.length;a++){if(null==n)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[a],c.keys[a-1]));n=n[c.keys[a]]}else n=c.param_no?t[c.param_no]:t[h++];if(r.not_type.test(c.type)&&r.not_primitive.test(c.type)&&n instanceof Function&&(n=n()),r.numeric_arg.test(c.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(i("[sprintf] expecting number but found %T",n));switch(r.number.test(c.type)&&(f=n>=0),c.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,c.width?parseInt(c.width):0);break;case"e":n=c.precision?parseFloat(n).toExponential(c.precision):parseFloat(n).toExponential();break;case"f":n=c.precision?parseFloat(n).toFixed(c.precision):parseFloat(n);break;case"g":n=c.precision?String(Number(n.toPrecision(c.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=c.precision?n.substring(0,c.precision):n;break;case"t":n=String(!!n),n=c.precision?n.substring(0,c.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=c.precision?n.substring(0,c.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=c.precision?n.substring(0,c.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}r.json.test(c.type)?g+=n:(!r.number.test(c.type)||f&&!c.sign?p="":(p=f?"+":"-",n=n.toString().replace(r.sign,"")),u=c.pad_char?"0"===c.pad_char?"0":c.pad_char.charAt(1):" ",l=c.width-(p+n).length,s=c.width&&l>0?u.repeat(l):"",g+=c.align?p+n+s:"0"===u?p+s+n:s+p+n)}return g}var s=Object.create(null);function u(e){if(s[e])return s[e];for(var t,n=e,o=[],i=0;n;){if(null!==(t=r.text.exec(n)))o.push(t[0]);else if(null!==(t=r.modulo.exec(n)))o.push("%");else{if(null===(t=r.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){i|=1;var a=[],c=t[2],u=[];if(null===(u=r.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(u[1]);""!==(c=c.substring(u[0].length));)if(null!==(u=r.key_access.exec(c)))a.push(u[1]);else{if(null===(u=r.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(u[1])}t[2]=a}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return s[e]=o}t.sprintf=i,t.vsprintf=a,"undefined"!=typeof window&&(window.sprintf=i,window.vsprintf=a,void 0===(o=function(){return{sprintf:i,vsprintf:a}}.call(t,n,t,e))||(e.exports=o))}()},function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return u(e,arguments,f(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l(o,e)})(e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return(u=s()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&l(r,n.prototype),r}).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return lt}));var p=function(e){function t(e){var n;return r(this,t),(n=i(this,f(t).call(this,e))).name="ValueError",console.log("EXCEPTION: "+n.name+" MESSAGE: "+n.message),n}return a(t,e),t}(c(Error)),h=function(e){function t(e){var n;return r(this,t),(n=i(this,f(t).call(this,e))).name="UnImplementedMethod",console.log("EXCEPTION: "+n.name+" MESSAGE: "+n.message),n}return a(t,e),t}(c(Error)),d=function(e){function t(e,n){var o;return r(this,t),(o=i(this,f(t).call(this,e))).name="IllegalArgument",o.argument=n,console.log("EXCEPTION: "+o.name+" MESSAGE: "+o.message),o}return a(t,e),t}(c(Error));Error,Error;function g(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var b=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"update",value:function(e){var t=e||{};this.region=t.region||this.region,this.endpointOverride=t.endpoint||this.endpointOverride,this.reconnect=!1!==t.reconnect}},{key:"getRegion",value:function(){return this.region}},{key:"getEndpointOverride",value:function(){return this.endpointOverride}}])&&g(t.prototype,n),o&&g(t,o),e}()),y={"us-west-2":{invokeUrl:"https://participant.connect.us-west-2.amazonaws.com"},"us-east-1":{invokeUrl:"https://participant.connect.us-east-1.amazonaws.com"},"ap-south-1":{invokeUrl:"https://participant.connect.ap-south-1.amazonaws.com"},"ap-southeast-1":{invokeUrl:"https://participant.connect.ap-southeast-1.amazonaws.com"},"ap-southeast-2":{invokeUrl:"https://participant.connect.ap-southeast-2.amazonaws.com"},"ap-northeast-1":{invokeUrl:"https://participant.connect.ap-northeast-1.amazonaws.com"},"eu-central-1":{invokeUrl:"https://participant.connect.eu-central-1.amazonaws.com"},"eu-west-2":{invokeUrl:"https://participant.connect.eu-west-2.amazonaws.com"}},v={AGENT:"AGENT",CUSTOMER:"CUSTOMER"},m="INCOMING_MESSAGE",k="INCOMING_TYPING",w="CONNECTION_ESTABLISHED",C="CONNECTION_LOST",S="CONNECTION_BROKEN",_="CHAT_ENDED",T={textPlain:"text/plain",connectionAcknowledged:"application/vnd.amazonaws.connect.event.connection.acknowledged",typing:"application/vnd.amazonaws.connect.event.typing",participantJoined:"application/vnd.amazonaws.connect.event.participant.joined",participantLeft:"application/vnd.amazonaws.connect.event.participant.left",transferSucceeded:"application/vnd.amazonaws.connect.event.transfer.succeeded",transferFailed:"application/vnd.amazonaws.connect.event.transfer.failed",chatEnded:"application/vnd.amazonaws.connect.event.chat.ended"},E=15,O="ASCENDING",I="BACKWARD",j="NULL",x="CLIENT_LOGGER",P="DEBUG",M="us-west-2",D=n(0);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var L={assertTrue:function(e,t){if(!e)throw new p(t)},assertNotNull:function(e,t){return L.assertTrue(null!==e&&void 0!==N(e),Object(D.sprintf)("%s must be provided",t||"A value")),e},now:function(){return(new Date).getTime()},isString:function(e){return"string"==typeof e},randomId:function(){return Object(D.sprintf)("%s-%s",L.now(),Math.random().toString(36).slice(2))},assertIsNonEmptyString:function(e,t){if(!e||"string"!=typeof e)throw new d(t+" is not a non-empty string!")},assertIsList:function(e,t){if(!Array.isArray(e))throw new d(t+" is not an array")},assertIsEnum:function(e,t,n){var o;for(o=0;o<t.length;o++)if(t[o]===e)return;throw new d(n+" passed is not valid. Allowed values are: "+t)},makeEnum:function(e){var t={};return e.forEach((function(e){var n=e.replace(/\.?([a-z]+)_?/g,(function(e,t){return t.toUpperCase()+"_"})).replace(/_$/,"");t[n]=e})),t},contains:function(e,t){return e instanceof Array?null!==L.find(e,(function(e){return e===t})):t in e},find:function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n];return null},containsValue:function(e,t){return e instanceof Array?null!==L.find(e,(function(e){return e===t})):null!==L.find(L.values(e),(function(e){return e===t}))},isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},values:function(e){var t=[];for(var n in L.assertNotNull(e,"map"),e)t.push(e[n]);return t},isObject:function(e){return!("object"!==N(e)||null===e)},assertIsObject:function(e,t){if(!L.isObject(e))throw new d(t+" is not an object!")},delay:function(e){return new Promise((function(t){return setTimeout(t,e)}))},asyncWhileInterval:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=new Date;return t(o)?e(o).catch((function(r){var a=Math.max(0,n-(new Date).valueOf()+i.valueOf());return L.delay(a).then((function(){return L.asyncWhileInterval(e,t,n,o+1,r)}))})):Promise.reject(r||new Error("async while aborted"))}},A=L;function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function B(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}var z=function(){function e(){G(this,e)}return B(e,[{key:"debug",value:function(e){}},{key:"info",value:function(e){}},{key:"warn",value:function(e){}},{key:"error",value:function(e){}}]),e}(),q={DEBUG:10,INFO:20,WARN:30,ERROR:40},J=function(){function e(){G(this,e),this.updateLoggerConfig(),this.consoleLoggerWrapper=$()}return B(e,[{key:"writeToClientLogger",value:function(e,t){if(this.hasClientLogger())switch(e){case q.DEBUG:return this._clientLogger.debug(t);case q.INFO:return this._clientLogger.info(t);case q.WARN:return this._clientLogger.warn(t);case q.ERROR:return this._clientLogger.error(t)}}},{key:"isLevelEnabled",value:function(e){return e>=this._level}},{key:"hasClientLogger",value:function(){return null!==this._clientLogger}},{key:"getLogger",value:function(e){var t=e.prefix||"";return this._logsDestination===P?this.consoleLoggerWrapper:new V(t)}},{key:"updateLoggerConfig",value:function(e){var t=e||{};this._level=t.level||q.INFO,this._clientLogger=t.logger||null,this._logsDestination=j,t.debug&&(this._logsDestination=P),t.logger&&(this._logsDestination=x)}}]),e}(),X=function(){function e(){G(this,e)}return B(e,[{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),e}(),V=function(e){function t(e){var n;return G(this,t),(n=F(this,W(t).call(this))).prefix=e||"",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,e),B(t,[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(q.DEBUG,t)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(q.INFO,t)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(q.WARN,t)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(q.ERROR,t)}},{key:"_shouldLog",value:function(e){return K.hasClientLogger()&&K.isLevelEnabled(e)}},{key:"_writeToClientLogger",value:function(e,t){K.writeToClientLogger(e,t)}},{key:"_log",value:function(e,t){if(this._shouldLog(e)){var n=this._convertToSingleStatement(t);this._writeToClientLogger(e,n)}}},{key:"_convertToSingleStatement",value:function(e){var t="";this.prefix&&(t+=this.prefix+" ");for(var n=0;n<e.length;n++){var o=e[n];t+=this._convertToString(o)+" "}return t}},{key:"_convertToString",value:function(e){try{if(!e)return"";if(A.isString(e))return e;if(A.isObject(e)&&A.isFunction(e.toString)){var t=e.toString();if("[object Object]"!==t)return t}return JSON.stringify(e)}catch(t){return console.error("Error while converting argument to string",e,t),""}}}]),t}(X),$=function(){var e=new X;return e.debug=console.debug.bind(window.console),e.info=console.info.bind(window.console),e.warn=console.warn.bind(window.console),e.error=console.error.bind(window.console),e},K=new J;function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function oe(e,t,n){return t&&ne(e.prototype,t),n&&ne(e,n),e}var re=function(){function e(){te(this,e),this.clientCache={}}return oe(e,[{key:"getCachedClient",value:function(e){var t=Object.assign({},e),n=e.region||b.getRegion()||M;if(t.region=n,this.clientCache[n])return this.clientCache[n];var o=this._createAwsClient(t);return this.clientCache[n]=o,o}},{key:"_createAwsClient",value:function(e){var t=e.region,n=b.getEndpointOverride(),o=y[t];return n&&(o.invokeUrl=n),new ie({endpoint:o.invokeUrl,region:t})}}]),e}(),ie=function(e){function t(e){var n;te(this,t),n=Q(this,Z(t).call(this));var o=new AWS.Credentials("",""),r=new AWS.Config({region:e.region,endpoint:e.endpoint,credentials:o});return n.chatClient=new AWS.ConnectParticipant(r),n.invokeUrl=e.endpoint,n.logger=K.getLogger({prefix:"ChatClient"}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(t,e),oe(t,[{key:"createParticipantConnection",value:function(e,t){var n=this,o={Type:t,ParticipantToken:e},r=n.chatClient.createParticipantConnection(o);return n._sendRequest(r).then((function(e){return n.logger.info("successfully create connection request"),e})).catch((function(e){return n.logger.error("error when creating connection request"),Promise.reject(e)}))}},{key:"disconnectParticipant",value:function(e){var t=this,n={ConnectionToken:e},o=t.chatClient.disconnectParticipant(n);return t._sendRequest(o).then((function(e){return t.logger.info("successfully disconnect participant"),e})).catch((function(e){return t.logger.error("error when disconnecting participant"),Promise.reject(e)}))}},{key:"getTranscript",value:function(e,t){var n=this,o={MaxResults:t.maxResults,NextToken:t.nextToken,ScanDirection:t.scanDirection,SortOrder:t.sortOrder,StartPosition:{Id:t.startPosition.id,AbsoluteTime:t.startPosition.absoluteTime,MostRecent:t.startPosition.mostRecent},ConnectionToken:e};t.contactId&&(o.ContactId=t.contactId);var r=n.chatClient.getTranscript(o);return n._sendRequest(r).then((function(e){return n.logger.info("successfully get transcript"),e})).catch((function(e){return n.logger.error("error when getting transcript"),Promise.reject(e)}))}},{key:"sendMessage",value:function(e,t,n){var o=this,r={Content:t,ContentType:n,ConnectionToken:e},i=o.chatClient.sendMessage(r);return o._sendRequest(i).then((function(e){return o.logger.info("successfully send message"),e})).catch((function(e){return o.logger.error("error when sending message"),Promise.reject(e)}))}},{key:"sendEvent",value:function(e,t,n){var o=this,r={ConnectionToken:e,ContentType:t,Content:n},i=o.chatClient.sendEvent(r);return o._sendRequest(i).then((function(e){return o.logger.info("successfully send event"),e})).catch((function(e){return o.logger.error("error when sending event"),Promise.reject(e)}))}},{key:"_sendRequest",value:function(e){return new Promise((function(t,n){e.on("success",(function(e){t(e)})).on("error",(function(e){var t={type:e.code,message:e.message,stack:e.stack?e.stack.split("\n"):[]};n(t)})).send()}))}}]),t}(function(){function e(){te(this,e)}return oe(e,[{key:"sendMessage",value:function(e,t,n){throw new h("sendTextMessage in ChatClient")}},{key:"disconnectParticipant",value:function(e){throw new h("disconnectParticipant in ChatClient")}},{key:"sendEvent",value:function(e,t,n){throw new h("sendEvent in ChatClient")}},{key:"createParticipantConnection",value:function(e,t){throw new h("createParticipantConnection in ChatClient")}}]),e}()),ae=new re;function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function he(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}var de=function(e){function t(){return fe(this,t),se(this,ue(t).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,e),he(t,[{key:"validateChatDetails",value:function(e){A.assertIsObject(e,"chatDetails"),A.assertIsNonEmptyString(e.contactId,"chatDetails.contactId"),A.assertIsNonEmptyString(e.participantId,"chatDetails.participantId"),e.connectionDetails?(A.assertIsObject(e.connectionDetails,"chatDetails.connectionDetails"),A.assertIsNonEmptyString(e.connectionDetails.PreSignedConnectionUrl,"chatDetails.connectionDetails.PreSignedConnectionUrl"),A.assertIsNonEmptyString(e.connectionDetails.ConnectionId,"chatDetails.connectionDetails.ConnectionId"),A.assertIsNonEmptyString(e.connectionDetails.connectionToken,"chatDetails.connectionDetails.connectionToken")):e.participantToken&&A.assertIsNonEmptyString(e.participantToken,"chatDetails.participantToken")}},{key:"validateInitiateChatResponse",value:function(){return!0}},{key:"normalizeChatDetails",value:function(e){var t={};if(t.contactId=e.ContactId||e.contactId,t.participantId=e.ParticipantId||e.participantId,t.initialContactId=e.InitialContactId||e.initialContactId||t.contactId||t.ContactId,e.participantToken||e.ParticipantToken)return t.participantToken=e.ParticipantToken||e.participantToken,this.validateChatDetails(t),t;if(e.ChatConnectionAttributes&&e.ChatConnectionAttributes.ParticipantCredentials){this.validateInitiateChatResponse(e);var n={};return n.connectionToken=e.ChatConnectionAttributes.ParticipantCredentials.ConnectionAuthenticationToken,n.ConnectionId=e.ChatConnectionAttributes.ConnectionId,n.PreSignedConnectionUrl=e.ChatConnectionAttributes.PreSignedConnectionUrl,t.connectionDetails=n,t}return this.validateChatDetails(t),t}}]),t}(function(){function e(){fe(this,e)}return he(e,[{key:"validateNewControllerDetails",value:function(e){return!0}},{key:"validateSendMessage",value:function(e){if(!A.isString(e.message))throw new d(e.message+"is not a valid message");this.validateContentType(e.contentType)}},{key:"validateContentType",value:function(e){A.assertIsEnum(e,Object.values(T),"contentType")}},{key:"validateConnectChat",value:function(e){return!0}},{key:"validateLogger",value:function(e){A.assertIsObject(e,"logger"),["debug","info","warn","error"].forEach((function(t){if(!A.isFunction(e[t]))throw new d(t+" should be a valid function on the passed logger object!")}))}},{key:"validateSendEvent",value:function(e){this.validateContentType(e.contentType)}},{key:"validateGetMessages",value:function(e){return!0}}]),e}());function ge(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var be="NeverStarted",ye="Starting",ve="Connected",me="ConnectionLost",ke="Ended",we="ConnectionLost",Ce="ConnectionGained",Se="Ended",_e="IncomingMessage",Te="WEBSOCKET",Ee="CONNECTION_CREDENTIALS",Oe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.connectionDetailsProvider=t,this.isStarted=!1}var t,n,o;return t=e,(n=[{key:"startConnectionTokenPolling",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:432e5;t||this.connectionDetailsProvider.fetchConnectionToken().then((function(){var t=e.getConnectionTokenExpiry(),o=(new Date).getTime();n=t-o-6e4})),this.timeout=setTimeout(this.startConnectionTokenPolling.bind(this),n)}},{key:"start",value:function(){this.isStarted||(this.isStarted=!0,this.startConnectionTokenPolling(!0,this.getConnectionTokenExpiry()))}},{key:"end",value:function(){clearTimeout(this.timeout)}},{key:"getConnectionToken",value:function(){return this.connectionDetailsProvider.getConnectionToken()}},{key:"getConnectionTokenExpiry",value:function(){return new Date(this.connectionDetailsProvider.getConnectionTokenExpiry()).getTime()}}])&&ge(t.prototype,n),o&&ge(t,o),e}(),Ie=function(e,t,n){this.subMap=e,this.id=A.randomId(),this.eventName=t,this.f=n};Ie.prototype.unsubscribe=function(){this.subMap.unsubscribe(this.eventName,this.id)};var je=function(){this.subIdMap={},this.subEventNameMap={}};je.prototype.subscribe=function(e,t){var n=new Ie(this,e,t);this.subIdMap[n.id]=n;var o=this.subEventNameMap[e]||[];return o.push(n),this.subEventNameMap[e]=o,function(){return n.unsubscribe()}},je.prototype.unsubscribe=function(e,t){A.contains(this.subEventNameMap,e)&&(this.subEventNameMap[e]=this.subEventNameMap[e].filter((function(e){return e.id!==t})),this.subEventNameMap[e].length<1&&delete this.subEventNameMap[e]),A.contains(this.subIdMap,t)&&delete this.subIdMap[t]},je.prototype.getAllSubscriptions=function(){return A.values(this.subEventNameMap).reduce((function(e,t){return e.concat(t)}),[])},je.prototype.getSubscriptions=function(e){return this.subEventNameMap[e]||[]};var xe=function(e){var t=e||{};this.subMap=new je,this.logEvents=t.logEvents||!1};function Pe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}xe.prototype.subscribe=function(e,t){return A.assertNotNull(e,"eventName"),A.assertNotNull(t,"f"),A.assertTrue(A.isFunction(t),"f must be a function"),this.subMap.subscribe(e,t)},xe.prototype.subscribeAll=function(e){return A.assertNotNull(e,"f"),A.assertTrue(A.isFunction(e),"f must be a function"),this.subMap.subscribe("<<all>>",e)},xe.prototype.getSubscriptions=function(e){return this.subMap.getSubscriptions(e)},xe.prototype.trigger=function(e,t){A.assertNotNull(e,"eventName");var n=this,o=this.subMap.getSubscriptions("<<all>>"),r=this.subMap.getSubscriptions(e);o.concat(r).forEach((function(o){try{o.f(t||null,e,n)}catch(e){}}))},xe.prototype.triggerAsync=function(e,t){var n=this;setTimeout((function(){return n.trigger(e,t)}),0)},xe.prototype.bridge=function(){var e=this;return function(t,n){e.trigger(n,t)}},xe.prototype.unsubscribeAll=function(){this.subMap.getAllSubscriptions().forEach((function(e){e.unsubscribe()}))};var Me=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chatClient=n,this.participantToken=t||null,this.connectionDetails=null,this.connectionToken=null,this.connectionTokenExpiry=null}var t,n,o;return t=e,(n=[{key:"getConnectionToken",value:function(){return this.connectionToken}},{key:"getConnectionTokenExpiry",value:function(){return this.connectionTokenExpiry}},{key:"getConnectionDetails",value:function(){return this.connectionDetails}},{key:"fetchConnectionDetails",value:function(){var e=this;return this._fetchConnectionDetails().then((function(){return e.connectionDetails}))}},{key:"fetchConnectionToken",value:function(){var e=this;return this._fetchConnectionDetails().then((function(){return e.connectionToken}))}},{key:"_handleCreateParticipantConnectionResponse",value:function(e){this.connectionDetails={url:e.Websocket.Url,expiry:e.Websocket.ConnectionExpiry},this.connectionToken=e.ConnectionCredentials.ConnectionToken,this.connectionTokenExpiry=e.ConnectionCredentials.Expiry}},{key:"_fetchConnectionDetails",value:function(){var e=this;return this.participantToken?this.chatClient.createParticipantConnection(this.participantToken,[Te,Ee]).then((function(t){return e._handleCreateParticipantConnectionResponse(t.data)})).catch((function(e){return Promise.reject({reason:"Failed to fetch connectionDetails with createParticipantConnection",_debug:e})})):Promise.reject({reason:"Failed to fetch connectionDetails.",_debug:new d("Failed to fetch connectionDetails.")})}}])&&Pe(t.prototype,n),o&&Pe(t,o),e}(),De=n(3);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Re(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),e}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e,t,n){return(We="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ue(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var He=function(e){function t(e,n,o,r){var i,a,c;return Le(this,t),a=this,(i=!(c=Ue(t).call(this,o))||"object"!==Ne(c)&&"function"!=typeof c?Fe(a):c).cleanUpBaseInstance=!r,i.tryCleanup(),t.baseInstance||(t.baseInstance=new Be(o,r)),i.contactId=e,i.initialContactId=n,i.status=null,i.eventBus=new xe,i.subscriptions=[t.baseInstance.onEnded(i.handleEnded.bind(Fe(i))),t.baseInstance.onConnectionGain(i.handleConnectionGain.bind(Fe(i))),t.baseInstance.onConnectionLost(i.handleConnectionLost.bind(Fe(i))),t.baseInstance.onMessage(i.handleMessage.bind(Fe(i)))],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,e),Re(t,[{key:"start",value:function(){return We(Ue(t.prototype),"start",this).call(this),t.baseInstance.start()}},{key:"end",value:function(){We(Ue(t.prototype),"end",this).call(this),this.eventBus.unsubscribeAll(),this.subscriptions.forEach((function(e){return e()})),this.status=ke,this.tryCleanup()}},{key:"tryCleanup",value:function(){t.baseInstance&&this.cleanUpBaseInstance&&(t.baseInstance.end(),t.baseInstance=null)}},{key:"getStatus",value:function(){return this.status||t.baseInstance.getStatus()}},{key:"onEnded",value:function(e){return this.eventBus.subscribe(Se,e)}},{key:"handleEnded",value:function(){this.eventBus.trigger(Se,{})}},{key:"onConnectionGain",value:function(e){return this.eventBus.subscribe(Ce,e)}},{key:"handleConnectionGain",value:function(){this.eventBus.trigger(Ce,{})}},{key:"onConnectionLost",value:function(e){return this.eventBus.subscribe(we,e)}},{key:"handleConnectionLost",value:function(){this.eventBus.trigger(we,{})}},{key:"onMessage",value:function(e){return this.eventBus.subscribe(_e,e)}},{key:"handleMessage",value:function(e){e.InitialContactId!==this.initialContactId&&e.ContactId!==this.contactId||this.eventBus.trigger(_e,e)}}]),t}(Oe);He.baseInstance=null;var Be=function(){function e(t,n){Le(this,e),this.status=be,this.eventBus=new xe,this.logger=K.getLogger({prefix:"LPC WebSockets: "}),this.initWebsocketManager(n,t)}return Re(e,[{key:"initWebsocketManager",value:function(e,t){this.websocketManager=e||De.a.create(),this.websocketManager.subscribeTopics(["aws/chat"]),this.subscriptions=[this.websocketManager.onMessage("aws/chat",this.handleMessage.bind(this)),this.websocketManager.onConnectionGain(this.handleConnectionGain.bind(this)),this.websocketManager.onConnectionLost(this.handleConnectionLost.bind(this)),this.websocketManager.onInitFailure(this.handleEnded.bind(this))],e||this.websocketManager.init((function(){return t.fetchConnectionDetails().then((function(e){return{webSocketTransport:{url:e.url,expiry:e.expiry}}}))}))}},{key:"end",value:function(){this.websocketManager.closeWebSocket(),this.eventBus.unsubscribeAll(),this.subscriptions.forEach((function(e){return e()}))}},{key:"start",value:function(){return this.status===be&&(this.status=ye),Promise.resolve()}},{key:"onEnded",value:function(e){return this.eventBus.subscribe(Se,e)}},{key:"handleEnded",value:function(){this.status=ke,this.eventBus.trigger(Se,{})}},{key:"onConnectionGain",value:function(e){return this.eventBus.subscribe(Ce,e)}},{key:"handleConnectionGain",value:function(){this.status=ve,this.eventBus.trigger(Ce,{})}},{key:"onConnectionLost",value:function(e){return this.eventBus.subscribe(we,e)}},{key:"handleConnectionLost",value:function(){this.status=me,this.eventBus.trigger(we,{})}},{key:"onMessage",value:function(e){return this.eventBus.subscribe(_e,e)}},{key:"handleMessage",value:function(e){var t;try{t=JSON.parse(e.content),this.eventBus.trigger(_e,t)}catch(t){this.logger.error("Wrong message format: ",e)}}},{key:"getStatus",value:function(){return this.status}}]),e}(),ze=He;function qe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Je="NeverEstablished",Xe="Establishing",Ve="Established",$e="Broken",Ke=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logger=K.getLogger({prefix:"ContactId-"+t.chatDetails.contactId+": "}),this.argsValidator=new de,this.pubsub=new xe,this.sessionType=t.sessionType,this.connectionDetails=t.chatDetails.connectionDetails,this.initialContactId=t.chatDetails.initialContactId,this.contactId=t.chatDetails.contactId,this.participantId=t.chatDetails.participantId,this.chatClient=t.chatClient,this.participantToken=t.chatDetails.participantToken,this.websocketManager=t.websocketManager,this._participantDisconnected=!1,this.sessionMetadata={}}var t,n,o;return t=e,(n=[{key:"subscribe",value:function(e,t){this.pubsub.subscribe(e,t),this.logger.info("Subscribed successfully to eventName: ",e)}},{key:"handleRequestSuccess",value:function(e,t,n){var o=this;return function(r){return r.metadata=e,o.logger.debug("".concat(n," successful! Response: "),r," / Request: ",t),r}}},{key:"handleRequestFailure",value:function(e,t,n){var o=this;return function(r){return r.metadata=e,o.logger.debug("".concat(n," failed! Error: "),r," / Request: ",t),Promise.reject(r)}}},{key:"sendMessage",value:function(e){var t=e.metadata||null;this.argsValidator.validateSendMessage(e);var n=this.connectionHelper.getConnectionToken();return this.chatClient.sendMessage(n,e.message,e.contentType).then(this.handleRequestSuccess(t,e,"sendMessage")).catch(this.handleRequestFailure(t,e,"sendMessage"))}},{key:"sendEvent",value:function(e){var t=e.metadata||null;this.argsValidator.validateSendEvent(e);var n=this.connectionHelper.getConnectionToken(),o=e.content||null;return this.chatClient.sendEvent(n,e.contentType,o).then(this.handleRequestSuccess(t,e,"sendEvent")).catch(this.handleRequestFailure(t,e,"sendEvent"))}},{key:"getTranscript",value:function(e){if(this.connectionHelper.getStatus()===ke)return Promise.reject("AccessDeniedException");var t=e.metadata||null,n={startPosition:e.startPosition||{},scanDirection:e.scanDirection||I,sortOrder:e.sortOrder||O,maxResults:e.maxResults||E};e.nextToken&&(n.nextToken=e.nextToken),e.contactId&&(n.contactId=e.contactId);var o=this.connectionHelper.getConnectionToken();return this.chatClient.getTranscript(o,n).then(this.handleRequestSuccess(t,n,"getTranscript")).catch(this.handleRequestFailure(t,n,"getTranscript"))}},{key:"connect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.sessionMetadata=e.metadata||null,this.argsValidator.validateConnectChat(e);var t=this._getConnectionDetailsProvider();return t.fetchConnectionToken().then(this._initConnectionHelper.bind(this,t)).then(this._onConnectSuccess.bind(this),this._onConnectFailure.bind(this))}},{key:"_initConnectionHelper",value:function(e){return this.connectionHelper=new ze(this.contactId,this.initialContactId,e,this.websocketManager),this.connectionHelper.onEnded(this._handleEndedConnection.bind(this)),this.connectionHelper.onConnectionLost(this._handleLostConnection.bind(this)),this.connectionHelper.onConnectionGain(this._handleGainedConnection.bind(this)),this.connectionHelper.onMessage(this._handleIncomingMessage.bind(this)),this.connectionHelper.start()}},{key:"_getConnectionDetailsProvider",value:function(){return new Me(this.participantToken,this.chatClient)}},{key:"_handleEndedConnection",value:function(e){this._forwardChatEvent(S,{data:e,chatDetails:this.getChatDetails()})}},{key:"_handleLostConnection",value:function(e){this._forwardChatEvent(C,{data:e,chatDetails:this.getChatDetails()})}},{key:"_handleGainedConnection",value:function(e){this._forwardChatEvent(w,{data:e,chatDetails:this.getChatDetails()})}},{key:"_handleIncomingMessage",value:function(e){try{var t=e.ContentType===T.typing?k:m;this._forwardChatEvent(t,{data:e,chatDetails:this.getChatDetails()}),e.ContentType===T.chatEnded&&(this._forwardChatEvent(_,{data:null,chatDetails:this.getChatDetails()}),this.breakConnection())}catch(t){this.logger.error("Error occured while handling message from Connection. eventData: ",e," Causing exception: ",t)}}},{key:"_forwardChatEvent",value:function(e,t){this.logger.debug("Triggering event for subscribers:",e,t),this.pubsub.triggerAsync(e,t)}},{key:"_onConnectSuccess",value:function(e){this.logger.info("Connect successful!");var t={_debug:e,connectSuccess:!0,connectCalled:!0,metadata:this.sessionMetadata},n=Object.assign({chatDetails:this.getChatDetails()},t);return this.pubsub.triggerAsync(w,n),this._shouldAcknowledgeContact()&&this.sendEvent({contentType:T.connectionAcknowledged}),t}},{key:"_onConnectFailure",value:function(e){var t={_debug:e,connectSuccess:!1,connectCalled:!0,metadata:this.sessionMetadata};return this.logger.error("Connect Failed with data: ",t),Promise.reject(t)}},{key:"_shouldAcknowledgeContact",value:function(){return this.sessionType===v.AGENT}},{key:"breakConnection",value:function(){return this.connectionHelper?this.connectionHelper.end():Promise.resolve()}},{key:"cleanUpOnParticipantDisconnect",value:function(){this.pubsub.unsubscribeAll()}},{key:"disconnectParticipant",value:function(){var e=this,t=this.connectionHelper.getConnectionToken();return this.chatClient.disconnectParticipant(t).then((function(t){return e.logger.info("disconnect participant successful"),e._participantDisconnected=!0,e.cleanUpOnParticipantDisconnect(),e.breakConnection(),t}),(function(t){return e.logger.error("disconnect participant failed with error: ",t),Promise.reject(t)}))}},{key:"getChatDetails",value:function(){return{initialContactId:this.initialContactId,contactId:this.contactId,participantId:this.participantId,participantToken:this.participantToken,connectionDetails:this.connectionDetails}}},{key:"_convertConnectionHelperStatus",value:function(e){switch(e){case be:return Je;case ye:return Xe;case ke:case me:return $e;case ve:return Ve}this.logger.error("Reached invalid state. Unknown connectionHelperStatus: ",e)}},{key:"getConnectionStatus",value:function(){return this._convertConnectionHelperStatus(this.connectionHelper.getStatus())}}])&&qe(t.prototype,n),o&&qe(t,o),e}();function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function rt(e,t,n){return t&&ot(e.prototype,t),n&&ot(e,n),e}var it=function(e){function t(){var e;return nt(this,t),(e=Qe(this,Ze(t).call(this))).argsValidator=new de,e}return et(t,e),rt(t,[{key:"createChatSession",value:function(e,t,n,o){var r=this._createChatController(e,t,n,o);if(e===v.AGENT)return new ct(r);if(e===v.CUSTOMER)return new st(r);throw new d("Unkown value for session type, Allowed values are: "+Object.values(v),e)}},{key:"_createChatController",value:function(e,t,n,o){var r={sessionType:e,chatDetails:this.argsValidator.normalizeChatDetails(t),chatClient:ae.getCachedClient(n),websocketManager:o};return new Ke(r)}}]),t}(function(){function e(){nt(this,e)}return rt(e,[{key:"createAgentChatController",value:function(e,t){throw new h("createAgentChatController in ChatControllerFactory.")}},{key:"createCustomerChatController",value:function(e,t){throw new h("createCustomerChatController in ChatControllerFactory.")}}]),e}()),at=function(){function e(t){nt(this,e),this.controller=t}return rt(e,[{key:"onMessage",value:function(e){this.controller.subscribe(m,e)}},{key:"onTyping",value:function(e){this.controller.subscribe(k,e)}},{key:"onConnectionBroken",value:function(e){this.controller.subscribe(S,e)}},{key:"onConnectionEstablished",value:function(e){this.controller.subscribe(w,e)}},{key:"onEnded",value:function(e){this.controller.subscribe(_,e)}},{key:"sendMessage",value:function(e){return this.controller.sendMessage(e)}},{key:"connect",value:function(e){return this.controller.connect(e)}},{key:"sendEvent",value:function(e){return this.controller.sendEvent(e)}},{key:"getTranscript",value:function(e){return this.controller.getTranscript(e)}},{key:"getChatDetails",value:function(){return this.controller.getChatDetails()}}]),e}(),ct=function(e){function t(e){return nt(this,t),Qe(this,Ze(t).call(this,e))}return et(t,e),rt(t,[{key:"cleanUpOnParticipantDisconnect",value:function(){return this.controller.cleanUpOnParticipantDisconnect()}}]),t}(at),st=function(e){function t(e){return nt(this,t),Qe(this,Ze(t).call(this,e))}return et(t,e),rt(t,[{key:"disconnectParticipant",value:function(){return this.controller.disconnectParticipant()}}]),t}(at),ut=new it,lt={create:function(e){var t=e.options||{},n=e.type||v.AGENT;return ut.createChatSession(n,e.chatDetails,t,e.websocketManager)},setGlobalConfig:function(e){var t=e.loggerConfig;b.update(e),K.updateLoggerConfig(t)},LogLevel:q,Logger:z,SessionTypes:v}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.connect=e.connect||{};var o=connect.WebSocketManager;!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==n(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(r,i,function(t){return e[t]}.bind(null,i));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,t,o){var r=o(1);function i(e){return(i="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)})(e)}var a={assertTrue:function(e,t){if(!e)throw new Error(t)},assertNotNull:function(e,t){return a.assertTrue(null!==e&&void 0!==i(e),Object(r.sprintf)("%s must be provided",t||"A value")),e},isNonEmptyString:function(e){return"string"==typeof e&&e.length>0},assertIsList:function(e,t){if(!Array.isArray(e))throw new Error(t+" is not an array")},isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},isObject:function(e){return!("object"!==i(e)||null===e)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e}},c=new RegExp("^(wss://)\\w*");a.validWSUrl=function(e){return c.test(e)},a.assertIsObject=function(e,t){if(!a.isObject(e))throw new Error(t+" is not an object!")};var s=a,u="DEBUG",l="aws/subscribe",f="aws/heartbeat";function p(e){return(p="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)})(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}var v=function(){function e(){g(this,e)}return y(e,[{key:"debug",value:function(e){}},{key:"info",value:function(e){}},{key:"warn",value:function(e){}},{key:"error",value:function(e){}}]),e}(),m={DEBUG:10,INFO:20,WARN:30,ERROR:40},k=function(){function e(){g(this,e),this.updateLoggerConfig(),this.consoleLoggerWrapper=S()}return y(e,[{key:"writeToClientLogger",value:function(e,t){if(this.hasClientLogger())switch(e){case m.DEBUG:return this._clientLogger.debug(t);case m.INFO:return this._clientLogger.info(t);case m.WARN:return this._clientLogger.warn(t);case m.ERROR:return this._clientLogger.error(t)}}},{key:"isLevelEnabled",value:function(e){return e>=this._level}},{key:"hasClientLogger",value:function(){return null!==this._clientLogger}},{key:"getLogger",value:function(e){var t=e.prefix||"";return this._logsDestination===u?this.consoleLoggerWrapper:new C(t)}},{key:"updateLoggerConfig",value:function(e){var t=e||{};this._level=t.level||m.INFO,this._clientLogger=t.logger||null,this._logsDestination="NULL",t.debug&&(this._logsDestination=u),t.logger&&(this._logsDestination="CLIENT_LOGGER")}}]),e}(),w=function(){function e(){g(this,e)}return y(e,[{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),e}(),C=function(e){function t(e){var n;return g(this,t),(n=function(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,h(t).call(this))).prefix=e||"",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,w),y(t,[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(m.DEBUG,t)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(m.INFO,t)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(m.WARN,t)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._log(m.ERROR,t)}},{key:"_shouldLog",value:function(e){return _.hasClientLogger()&&_.isLevelEnabled(e)}},{key:"_writeToClientLogger",value:function(e,t){_.writeToClientLogger(e,t)}},{key:"_log",value:function(e,t){if(this._shouldLog(e)){var n=this._convertToSingleStatement(t);this._writeToClientLogger(e,n)}}},{key:"_convertToSingleStatement",value:function(e){var t="";this.prefix&&(t+=this.prefix+" ");for(var n=0;n<e.length;n++){var o=e[n];t+=this._convertToString(o)+" "}return t}},{key:"_convertToString",value:function(e){try{if(!e)return"";if(s.isString(e))return e;if(s.isObject(e)&&s.isFunction(e.toString)){var t=e.toString();if("[object Object]"!==t)return t}return JSON.stringify(e)}catch(t){return console.error("Error while converting argument to string",e,t),""}}}]),t}(),S=function(){var e=new w;return e.debug=console.debug,e.info=console.info,e.warn=console.warn,e.error=console.error,e},_=new k;o.d(t,"a",(function(){return E}));var T=function(){var e=_.getLogger({}),t=null,n={reconnectWebSocket:!1,websocketInitFailed:!1,linearConnectAttempt:0,exponentialConnectAttempt:0,exponentialBackOffTime:1e3,linearTimeoutHandle:null,exponentialTimeoutHandle:null,lifeTimeTimeoutHandle:null},o={pendingResponse:!1,intervalHandle:null},r={initFailure:new Set,getWebSocketTransport:null,subscriptionUpdate:new Set,subscriptionFailure:new Set,topic:new Map,allMessage:new Set,connectionGain:new Set,connectionLost:new Set},i={connConfig:null,promiseHandle:null,promiseCompleted:!1},a={subscribed:new Set,pending:new Set},c=new Set([l,"aws/unsubscribe",f]),u=navigator.onLine,p=setInterval((function(){u!==navigator.onLine&&(u=navigator.onLine)&&(!t||t.readyState>1)&&(e.info("Network online, Connecting to websocket"),E())}),250),h=function(e,t){e.forEach((function(e){e(t)}))},d=function(){if(o.pendingResponse)return e.warn("Heartbeat response not received"),clearInterval(o.intervalHandle),o.pendingResponse=!1,void w();e.debug("Sending heartbeat"),t.send(S(f)),o.pendingResponse=!0},g=function(){n.linearConnectAttempt=0,n.exponentialConnectAttempt=0,n.exponentialBackOffTime=1e3,o.pendingResponse=!1,n.reconnectWebSocket=!1,clearTimeout(n.lifeTimeTimeoutHandle),clearInterval(o.intervalHandle),clearTimeout(n.linearTimeoutHandle),clearTimeout(n.exponentialTimeoutHandle)},b=function(){try{if(e.info("WebSocket connection established!"),h(r.connectionGain),g(),a.subscribed.size>0||a.pending.size>0){var c=Array.from(a.subscribed.values());c=c.concat(Array.from(a.pending.values())),a.subscribed.clear(),t.send(S(l,{topics:c}))}d(),o.intervalHandle=setInterval(d,1e4),n.lifeTimeTimeoutHandle=setTimeout((function(){e.debug("Starting scheduled WebSocket manager reconnect"),w()}),Date.parse(i.connConfig.webSocketTransport.expiry)-Date.now())}catch(t){e.error("Error after establishing web socket connection, error: ",t)}},y=function(t){n.linearConnectAttempt<=1&&h(r.connectionLost),e.info("Socket connection is closed. event: ",t),n.reconnectWebSocket&&O()},v=function(t){e.error("WebSocketManager Error, error_event: ",t),w()},m=function(t){var n=JSON.parse(t.data);switch(n.topic){case l:e.info("Subscription Message received from webSocket server",t.data),"success"===n.content.status?(n.content.topics.forEach((function(e){a.subscribed.add(e),a.pending.delete(e)})),h(r.subscriptionUpdate,n)):h(r.subscriptionFailure,n);break;case f:e.debug("Heartbeat response received"),o.pendingResponse=!1;break;default:if(n.topic){if(0===r.allMessage.size&&0===r.topic.size)return void e.warn("No registered callback listener for Topic",n);h(r.allMessage,n),r.topic.has(n.topic)&&h(r.topic.get(n.topic),n)}else n.message?e.warn("WebSocketManager Message Error",n):e.warn("Invalid incoming message",n)}},k=function(e){return!(!t||t.readyState===WebSocket.CLOSED||(t.close(1e3,e),0))},w=function(){if(u)if(clearTimeout(n.lifeTimeTimeoutHandle),clearInterval(o.intervalHandle),n.linearConnectAttempt<3){n.linearConnectAttempt++;var t=Math.floor(2e3*(1+Math.random()));e.debug("Starting Linear WebSocket reconnect, Attempt : #"+n.linearConnectAttempt+" with delay "+t+" ms"),n.linearTimeoutHandle=setTimeout((function(){n.reconnectWebSocket=!0,E()}),t)}else if(n.exponentialConnectAttempt<3){n.exponentialConnectAttempt++,n.exponentialBackOffTime*=2;var r=Math.floor(n.exponentialBackOffTime*(1+Math.random()));e.debug("Starting Exponential WebSocket reconnect, Attempt : #"+n.exponentialConnectAttempt+" with delay "+r+" sec."),i.promiseCompleted=!1,i.connConfig=null,n.exponentialTimeoutHandle=setTimeout((function(){n.reconnectWebSocket=!0,E()}),r)}else i.promiseCompleted&&(e.error("Could not connect to WebSocket after several attempts"),C());else k("Network Offline, Closing WebSocket Manager")},C=function(){g(),k("Terminating WebSocket Manager"),e.error("WebSocket Initialization failed"),n.websocketInitFailed=!0,clearInterval(p),h(r.initFailure)},S=function(e,t){return JSON.stringify({topic:e,content:t})},T=function(t){return!!(s.isObject(t)&&s.isObject(t.webSocketTransport)&&s.isNonEmptyString(t.webSocketTransport.url)&&s.validWSUrl(t.webSocketTransport.url)&&s.isNonEmptyString(t.webSocketTransport.expiry)&&Date.parse(t.webSocketTransport.expiry)-Date.now()>=36e5)||(e.error("Invalid WebSocket Connection Configuration",t),!1)},E=function(){n.websocketInitFailed||(i.connConfig=null,i.promiseCompleted=!1,i.promiseHandle=r.getWebSocketTransport(),i.promiseHandle.then((function(t){i.promiseCompleted=!0,e.debug("Successfully fetched webSocket connection configuration"),T(t)?(i.connConfig=t,u&&(k("Restarting WebSocket Manager")||O())):C()}),(function(t){i.promiseCompleted=!0,e.error("Failed to fetch webSocket connection configuration",t),w()})))},O=function(){if(!n.websocketInitFailed){e.debug("Initializing Websocket Manager");try{T(i.connConfig)?((t=new WebSocket(i.connConfig.webSocketTransport.url)).addEventListener("open",b),t.addEventListener("message",m),t.addEventListener("error",v),t.addEventListener("close",y)):i.promiseCompleted&&C()}catch(t){e.error("Error Initializing web-socket-manager",t),C()}}};this.init=function(t){s.assertTrue(s.isFunction(t),"transportHandle must be a function"),null===r.getWebSocketTransport?(r.getWebSocketTransport=t,E()):e.warn("Web Socket Manager was already initialized")},this.onInitFailure=function(e){return s.assertTrue(s.isFunction(e),"cb must be a function"),r.initFailure.add(e),n.websocketInitFailed&&e(),function(){return r.initFailure.delete(e)}},this.onConnectionGain=function(e){return s.assertTrue(s.isFunction(e),"cb must be a function"),r.connectionGain.add(e),t&&t.readyState===WebSocket.OPEN&&e(),function(){return r.connectionGain.delete(e)}},this.onConnectionLost=function(e){return s.assertTrue(s.isFunction(e),"cb must be a function"),r.connectionLost.add(e),t&&t.readyState===WebSocket.CLOSED&&e(),function(){return r.connectionLost.delete(e)}},this.onSubscriptionUpdate=function(e){return s.assertTrue(s.isFunction(e),"cb must be a function"),r.subscriptionUpdate.add(e),function(){return r.subscriptionUpdate.delete(e)}},this.onSubscriptionFailure=function(e){return s.assertTrue(s.isFunction(e),"cb must be a function"),r.subscriptionFailure.add(e),function(){return r.subscriptionFailure.delete(e)}},this.onMessage=function(e,t){return s.assertNotNull(e,"topicName"),s.assertTrue(s.isFunction(t),"cb must be a function"),r.topic.has(e)?r.topic.get(e).add(t):r.topic.set(e,new Set([t])),function(){return r.topic.get(e).delete(t)}},this.onAllMessage=function(e){return s.assertTrue(s.isFunction(e),"cb must be a function"),r.allMessage.add(e),function(){return r.allMessage.delete(e)}},this.subscribeTopics=function(e){s.assertNotNull(e,"topics"),s.assertIsList(e),e.forEach((function(e){a.pending.add(e)})),t&&t.readyState===WebSocket.OPEN&&t.send(S(l,{topics:e}))},this.sendMessage=function(n){if(s.assertIsObject(n,"payload"),void 0===n.topic||c.has(n.topic))e.warn("Cannot send message, Invalid topic",n);else{try{n=JSON.stringify(n)}catch(t){return void e.warn("Error stringify message",n)}t&&t.readyState===WebSocket.OPEN?t.send(n):e.warn("Cannot send message, web socket connection is not open")}},this.closeWebSocket=function(){g(),clearInterval(p),k("User request to close WebSocket")}},E={create:function(){return new T},setGlobalConfig:function(e){var t=e.loggerConfig;_.updateLoggerConfig(t)},LogLevel:m,Logger:v}},function(e,t,o){var r;!function(){var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(e){return function(e,t){var o,r,c,s,u,l,f,p,h,d=1,g=e.length,b="";for(r=0;r<g;r++)if("string"==typeof e[r])b+=e[r];else if("object"==n(e[r])){if((s=e[r]).keys)for(o=t[d],c=0;c<s.keys.length;c++){if(null==o)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[c],s.keys[c-1]));o=o[s.keys[c]]}else o=s.param_no?t[s.param_no]:t[d++];if(i.not_type.test(s.type)&&i.not_primitive.test(s.type)&&o instanceof Function&&(o=o()),i.numeric_arg.test(s.type)&&"number"!=typeof o&&isNaN(o))throw new TypeError(a("[sprintf] expecting number but found %T",o));switch(i.number.test(s.type)&&(p=o>=0),s.type){case"b":o=parseInt(o,10).toString(2);break;case"c":o=String.fromCharCode(parseInt(o,10));break;case"d":case"i":o=parseInt(o,10);break;case"j":o=JSON.stringify(o,null,s.width?parseInt(s.width):0);break;case"e":o=s.precision?parseFloat(o).toExponential(s.precision):parseFloat(o).toExponential();break;case"f":o=s.precision?parseFloat(o).toFixed(s.precision):parseFloat(o);break;case"g":o=s.precision?String(Number(o.toPrecision(s.precision))):parseFloat(o);break;case"o":o=(parseInt(o,10)>>>0).toString(8);break;case"s":o=String(o),o=s.precision?o.substring(0,s.precision):o;break;case"t":o=String(!!o),o=s.precision?o.substring(0,s.precision):o;break;case"T":o=Object.prototype.toString.call(o).slice(8,-1).toLowerCase(),o=s.precision?o.substring(0,s.precision):o;break;case"u":o=parseInt(o,10)>>>0;break;case"v":o=o.valueOf(),o=s.precision?o.substring(0,s.precision):o;break;case"x":o=(parseInt(o,10)>>>0).toString(16);break;case"X":o=(parseInt(o,10)>>>0).toString(16).toUpperCase()}i.json.test(s.type)?b+=o:(!i.number.test(s.type)||p&&!s.sign?h="":(h=p?"+":"-",o=o.toString().replace(i.sign,"")),l=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",f=s.width-(h+o).length,u=s.width&&f>0?l.repeat(f):"",b+=s.align?h+o+u:"0"===l?h+u+o:u+h+o)}return b}(function(e){if(s[e])return s[e];for(var t,n=e,o=[],r=0;n;){if(null!==(t=i.text.exec(n)))o.push(t[0]);else if(null!==(t=i.modulo.exec(n)))o.push("%");else{if(null===(t=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){r|=1;var a=[],c=t[2],u=[];if(null===(u=i.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(u[1]);""!==(c=c.substring(u[0].length));)if(null!==(u=i.key_access.exec(c)))a.push(u[1]);else{if(null===(u=i.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(u[1])}t[2]=a}else r|=2;if(3===r)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}n=n.substring(t[0].length)}return s[e]=o}(e),arguments)}function c(e,t){return a.apply(null,[e].concat(t||[]))}var s=Object.create(null);t.sprintf=a,t.vsprintf=c,"undefined"!=typeof window&&(window.sprintf=a,window.vsprintf=c,void 0===(r=function(){return{sprintf:a,vsprintf:c}}.call(t,o,t,e))||(e.exports=r))}()},function(e,t,n){n.r(t),function(e){n.d(t,"WebSocketManager",(function(){return r}));var o=n(0);e.connect=e.connect||{},connect.WebSocketManager=o.a,connect.testnum=1;var r=o.a}.call(this,n(3))},function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":n(window))&&(o=window)}e.exports=o}]);var r=connect.WebSocketManager;connect.WebSocketManager=o,t.a=r}).call(this,n(2))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ChatSession",(function(){return r}));var o=n(1);e.connect=e.connect||{},connect.ChatSession=o.a;var r=o.a}.call(this,n(2))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NwcmludGYtanMvc3JjL3NwcmludGYuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvZXhjZXB0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZ2xvYmFsQ29uZmlnLmpzIiwid2VicGFjazovLy8uL3NyYy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9sb2cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NsaWVudC9jbGllbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvY2hhdEFyZ3NWYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvY29ubmVjdGlvbkhlbHBlcnMvYmFzZUNvbm5lY3Rpb25IZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvZXZlbnRidXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvY29ubmVjdGlvbkhlbHBlcnMvY29ubmVjdGlvbkRldGFpbHNQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9jb25uZWN0aW9uSGVscGVycy9McGNDb25uZWN0aW9uSGVscGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL2NoYXRDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL2NoYXRTZXNzaW9uLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJyZSIsIm5vdF9zdHJpbmciLCJub3RfYm9vbCIsIm5vdF90eXBlIiwibm90X3ByaW1pdGl2ZSIsIm51bWJlciIsIm51bWVyaWNfYXJnIiwianNvbiIsIm5vdF9qc29uIiwidGV4dCIsIm1vZHVsbyIsInBsYWNlaG9sZGVyIiwia2V5X2FjY2VzcyIsImluZGV4X2FjY2VzcyIsInNpZ24iLCJzcHJpbnRmIiwic3ByaW50Zl9mb3JtYXQiLCJzcHJpbnRmX3BhcnNlIiwiYXJndW1lbnRzIiwidnNwcmludGYiLCJmbXQiLCJhcmd2IiwiYXBwbHkiLCJjb25jYXQiLCJwYXJzZV90cmVlIiwiYXJnIiwiayIsInBoIiwicGFkIiwicGFkX2NoYXJhY3RlciIsInBhZF9sZW5ndGgiLCJpc19wb3NpdGl2ZSIsImN1cnNvciIsInRyZWVfbGVuZ3RoIiwibGVuZ3RoIiwib3V0cHV0Iiwia2V5cyIsInVuZGVmaW5lZCIsIkVycm9yIiwicGFyYW1fbm8iLCJ0ZXN0IiwidHlwZSIsIkZ1bmN0aW9uIiwiaXNOYU4iLCJUeXBlRXJyb3IiLCJwYXJzZUludCIsInRvU3RyaW5nIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiSlNPTiIsInN0cmluZ2lmeSIsIndpZHRoIiwicHJlY2lzaW9uIiwicGFyc2VGbG9hdCIsInRvRXhwb25lbnRpYWwiLCJ0b0ZpeGVkIiwiTnVtYmVyIiwidG9QcmVjaXNpb24iLCJzdWJzdHJpbmciLCJzbGljZSIsInRvTG93ZXJDYXNlIiwidmFsdWVPZiIsInRvVXBwZXJDYXNlIiwicmVwbGFjZSIsInBhZF9jaGFyIiwiY2hhckF0IiwicmVwZWF0IiwiYWxpZ24iLCJzcHJpbnRmX2NhY2hlIiwibWF0Y2giLCJfZm10IiwiYXJnX25hbWVzIiwiZXhlYyIsInB1c2giLCJTeW50YXhFcnJvciIsImZpZWxkX2xpc3QiLCJyZXBsYWNlbWVudF9maWVsZCIsImZpZWxkX21hdGNoIiwid2luZG93IiwiVmFsdWVFcnJvciIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwiVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbiIsIklsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiIsImFyZ3VtZW50IiwiR2xvYmFsQ29uZmlnIiwiY29uZmlnSW5wdXQiLCJjb25maWciLCJ0aGlzIiwicmVnaW9uIiwiZW5kcG9pbnRPdmVycmlkZSIsImVuZHBvaW50IiwicmVjb25uZWN0IiwiUkVHSU9OX0NPTkZJRyIsImludm9rZVVybCIsIlNFU1NJT05fVFlQRVMiLCJBR0VOVCIsIkNVU1RPTUVSIiwiQ0hBVF9FVkVOVFMiLCJDT05URU5UX1RZUEUiLCJ0ZXh0UGxhaW4iLCJjb25uZWN0aW9uQWNrbm93bGVkZ2VkIiwidHlwaW5nIiwicGFydGljaXBhbnRKb2luZWQiLCJwYXJ0aWNpcGFudExlZnQiLCJ0cmFuc2ZlclN1Y2NlZWRlZCIsInRyYW5zZmVyRmFpbGVkIiwiY2hhdEVuZGVkIiwiVFJBTlNDUklQVF9ERUZBVUxUX1BBUkFNUyIsIkxPR1NfREVTVElOQVRJT04iLCJSRUdJT05TIiwiVXRpbHMiLCJwcmVtaXNlIiwiYXNzZXJ0VHJ1ZSIsIkRhdGUiLCJnZXRUaW1lIiwibm93IiwiTWF0aCIsInJhbmRvbSIsIkFycmF5IiwiaXNBcnJheSIsImFsbG93ZWRWYWx1ZXMiLCJ2YWx1ZXMiLCJlbnVtT2JqIiwiZm9yRWFjaCIsIngiLCJ5Iiwib2JqIiwiZmluZCIsInYiLCJhcnJheSIsInByZWRpY2F0ZSIsImNvbnN0cnVjdG9yIiwibWFwIiwiYXNzZXJ0Tm90TnVsbCIsImlzT2JqZWN0IiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJmIiwiaW50ZXJ2YWwiLCJjb3VudCIsImVycm9yIiwiZSIsImRlbGF5IiwibWF4IiwidGhlbiIsImFzeW5jV2hpbGVJbnRlcnZhbCIsInJlamVjdCIsIkxvZ2dlciIsImRhdGEiLCJMb2dMZXZlbCIsIkRFQlVHIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIkxvZ01hbmFnZXJJbXBsIiwidXBkYXRlTG9nZ2VyQ29uZmlnIiwiY29uc29sZUxvZ2dlcldyYXBwZXIiLCJjcmVhdGVDb25zb2xlTG9nZ2VyIiwibGV2ZWwiLCJsb2dTdGF0ZW1lbnQiLCJoYXNDbGllbnRMb2dnZXIiLCJfY2xpZW50TG9nZ2VyIiwiZGVidWciLCJpbmZvIiwid2FybiIsIl9sZXZlbCIsIm9wdGlvbnMiLCJwcmVmaXgiLCJfbG9nc0Rlc3RpbmF0aW9uIiwiTG9nZ2VyV3JhcHBlckltcGwiLCJpbnB1dENvbmZpZyIsImxvZ2dlciIsIkxvZ2dlcldyYXBwZXIiLCJhcmdzIiwiX2xvZyIsIkxvZ01hbmFnZXIiLCJpc0xldmVsRW5hYmxlZCIsIndyaXRlVG9DbGllbnRMb2dnZXIiLCJfc2hvdWxkTG9nIiwiX2NvbnZlcnRUb1NpbmdsZVN0YXRlbWVudCIsIl93cml0ZVRvQ2xpZW50TG9nZ2VyIiwiaW5kZXgiLCJfY29udmVydFRvU3RyaW5nIiwiaXNTdHJpbmciLCJpc0Z1bmN0aW9uIiwidG9TdHJpbmdSZXN1bHQiLCJDaGF0Q2xpZW50RmFjdG9yeUltcGwiLCJjbGllbnRDYWNoZSIsIm9wdGlvbnNJbnB1dCIsImFzc2lnbiIsImdldFJlZ2lvbiIsImNsaWVudCIsIl9jcmVhdGVBd3NDbGllbnQiLCJnZXRFbmRwb2ludE92ZXJyaWRlIiwic3RhZ2VDb25maWciLCJBV1NDaGF0Q2xpZW50IiwiY3JlZHMiLCJBV1MiLCJDcmVkZW50aWFscyIsIkNvbmZpZyIsImNyZWRlbnRpYWxzIiwiY2hhdENsaWVudCIsIkNvbm5lY3RQYXJ0aWNpcGFudCIsImdldExvZ2dlciIsInBhcnRpY2lwYW50VG9rZW4iLCJzZWxmIiwicGFyYW1zIiwiVHlwZSIsIlBhcnRpY2lwYW50VG9rZW4iLCJjcmVhdGVQYXJ0aWNpcGFudENvbm5lY3Rpb25SZXF1ZXN0IiwiY3JlYXRlUGFydGljaXBhbnRDb25uZWN0aW9uIiwiX3NlbmRSZXF1ZXN0IiwicmVzIiwiZXJyIiwiY29ubmVjdGlvblRva2VuIiwiQ29ubmVjdGlvblRva2VuIiwiZGlzY29ubmVjdFBhcnRpY2lwYW50UmVxdWVzdCIsImRpc2Nvbm5lY3RQYXJ0aWNpcGFudCIsIk1heFJlc3VsdHMiLCJtYXhSZXN1bHRzIiwiTmV4dFRva2VuIiwibmV4dFRva2VuIiwiU2NhbkRpcmVjdGlvbiIsInNjYW5EaXJlY3Rpb24iLCJTb3J0T3JkZXIiLCJzb3J0T3JkZXIiLCJTdGFydFBvc2l0aW9uIiwiSWQiLCJzdGFydFBvc2l0aW9uIiwiaWQiLCJBYnNvbHV0ZVRpbWUiLCJhYnNvbHV0ZVRpbWUiLCJNb3N0UmVjZW50IiwibW9zdFJlY2VudCIsImNvbnRhY3RJZCIsIkNvbnRhY3RJZCIsImdldFRyYW5zY3JpcHRSZXF1ZXN0IiwiZ2V0VHJhbnNjcmlwdCIsImNvbnRlbnQiLCJjb250ZW50VHlwZSIsIkNvbnRlbnQiLCJDb250ZW50VHlwZSIsInNlbmRNZXNzYWdlUmVxdWVzdCIsInNlbmRNZXNzYWdlIiwic2VuZEV2ZW50UmVxdWVzdCIsInNlbmRFdmVudCIsInJlcXVlc3QiLCJvbiIsImVyck9iaiIsImNvZGUiLCJzdGFjayIsInNwbGl0Iiwic2VuZCIsIkNoYXRDbGllbnRGYWN0b3J5IiwiQ2hhdFNlcnZpY2VBcmdzVmFsaWRhdG9yIiwiY2hhdERldGFpbHMiLCJhc3NlcnRJc09iamVjdCIsImFzc2VydElzTm9uRW1wdHlTdHJpbmciLCJwYXJ0aWNpcGFudElkIiwiY29ubmVjdGlvbkRldGFpbHMiLCJQcmVTaWduZWRDb25uZWN0aW9uVXJsIiwiQ29ubmVjdGlvbklkIiwiY2hhdERldGFpbHNJbnB1dCIsIlBhcnRpY2lwYW50SWQiLCJpbml0aWFsQ29udGFjdElkIiwiSW5pdGlhbENvbnRhY3RJZCIsInZhbGlkYXRlQ2hhdERldGFpbHMiLCJDaGF0Q29ubmVjdGlvbkF0dHJpYnV0ZXMiLCJQYXJ0aWNpcGFudENyZWRlbnRpYWxzIiwidmFsaWRhdGVJbml0aWF0ZUNoYXRSZXNwb25zZSIsIkNvbm5lY3Rpb25BdXRoZW50aWNhdGlvblRva2VuIiwidmFsaWRhdGVDb250ZW50VHlwZSIsImFzc2VydElzRW51bSIsIm1ldGhvZE5hbWUiLCJDb25uZWN0aW9uSGVscGVyU3RhdHVzIiwiQ29ubmVjdGlvbkhlbHBlckV2ZW50cyIsIkNvbm5lY3Rpb25JbmZvVHlwZSIsIkJhc2VDb25uZWN0aW9uSGVscGVyIiwiY29ubmVjdGlvbkRldGFpbHNQcm92aWRlciIsImlzU3RhcnRlZCIsImlzRmlyc3RDYWxsIiwiZXhwaXJ5IiwiZmV0Y2hDb25uZWN0aW9uVG9rZW4iLCJkYXRlRXhwaXJ5IiwiZ2V0Q29ubmVjdGlvblRva2VuRXhwaXJ5IiwidGltZW91dCIsInN0YXJ0Q29ubmVjdGlvblRva2VuUG9sbGluZyIsImNsZWFyVGltZW91dCIsImdldENvbm5lY3Rpb25Ub2tlbiIsIlN1YnNjcmlwdGlvbiIsInN1Yk1hcCIsImV2ZW50TmFtZSIsInJhbmRvbUlkIiwidW5zdWJzY3JpYmUiLCJTdWJzY3JpcHRpb25NYXAiLCJzdWJJZE1hcCIsInN1YkV2ZW50TmFtZU1hcCIsInN1YnNjcmliZSIsInN1YiIsInN1Ykxpc3QiLCJzdWJJZCIsImNvbnRhaW5zIiwiZmlsdGVyIiwiZ2V0QWxsU3Vic2NyaXB0aW9ucyIsInJlZHVjZSIsImEiLCJiIiwiZ2V0U3Vic2NyaXB0aW9ucyIsIkV2ZW50QnVzIiwicGFyYW1zSW4iLCJsb2dFdmVudHMiLCJzdWJzY3JpYmVBbGwiLCJ0cmlnZ2VyIiwiYWxsRXZlbnRTdWJzIiwiZXZlbnRTdWJzIiwidHJpZ2dlckFzeW5jIiwiYnJpZGdlIiwiZXZlbnQiLCJ1bnN1YnNjcmliZUFsbCIsIkNvbm5lY3Rpb25EZXRhaWxzUHJvdmlkZXIiLCJjb25uZWN0aW9uVG9rZW5FeHBpcnkiLCJfZmV0Y2hDb25uZWN0aW9uRGV0YWlscyIsInVybCIsIldlYnNvY2tldCIsIlVybCIsIkNvbm5lY3Rpb25FeHBpcnkiLCJDb25uZWN0aW9uQ3JlZGVudGlhbHMiLCJFeHBpcnkiLCJyZXNwb25zZSIsIl9oYW5kbGVDcmVhdGVQYXJ0aWNpcGFudENvbm5lY3Rpb25SZXNwb25zZSIsInJlYXNvbiIsIl9kZWJ1ZyIsIkxwY0Nvbm5lY3Rpb25IZWxwZXIiLCJ3ZWJzb2NrZXRNYW5hZ2VyIiwiY2xlYW5VcEJhc2VJbnN0YW5jZSIsInRyeUNsZWFudXAiLCJiYXNlSW5zdGFuY2UiLCJMUENDb25uZWN0aW9uSGVscGVyQmFzZSIsInN0YXR1cyIsImV2ZW50QnVzIiwic3Vic2NyaXB0aW9ucyIsIm9uRW5kZWQiLCJoYW5kbGVFbmRlZCIsIm9uQ29ubmVjdGlvbkdhaW4iLCJoYW5kbGVDb25uZWN0aW9uR2FpbiIsIm9uQ29ubmVjdGlvbkxvc3QiLCJoYW5kbGVDb25uZWN0aW9uTG9zdCIsIm9uTWVzc2FnZSIsImhhbmRsZU1lc3NhZ2UiLCJzdGFydCIsImVuZCIsImdldFN0YXR1cyIsImhhbmRsZXIiLCJpbml0V2Vic29ja2V0TWFuYWdlciIsIldlYlNvY2tldE1hbmFnZXIiLCJzdWJzY3JpYmVUb3BpY3MiLCJvbkluaXRGYWlsdXJlIiwiaW5pdCIsImZldGNoQ29ubmVjdGlvbkRldGFpbHMiLCJ3ZWJTb2NrZXRUcmFuc3BvcnQiLCJjbG9zZVdlYlNvY2tldCIsInBhcnNlZE1lc3NhZ2UiLCJwYXJzZSIsIk5ldHdvcmtMaW5rU3RhdHVzIiwiQ2hhdENvbnRyb2xsZXIiLCJhcmdzVmFsaWRhdG9yIiwicHVic3ViIiwic2Vzc2lvblR5cGUiLCJfcGFydGljaXBhbnREaXNjb25uZWN0ZWQiLCJzZXNzaW9uTWV0YWRhdGEiLCJjYWxsYmFjayIsIm1ldGFkYXRhIiwicmVxdWVzdE5hbWUiLCJ2YWxpZGF0ZVNlbmRNZXNzYWdlIiwiY29ubmVjdGlvbkhlbHBlciIsImhhbmRsZVJlcXVlc3RTdWNjZXNzIiwiaGFuZGxlUmVxdWVzdEZhaWx1cmUiLCJ2YWxpZGF0ZVNlbmRFdmVudCIsImlucHV0QXJncyIsInZhbGlkYXRlQ29ubmVjdENoYXQiLCJfZ2V0Q29ubmVjdGlvbkRldGFpbHNQcm92aWRlciIsIl9pbml0Q29ubmVjdGlvbkhlbHBlciIsIl9vbkNvbm5lY3RTdWNjZXNzIiwiX29uQ29ubmVjdEZhaWx1cmUiLCJfaGFuZGxlRW5kZWRDb25uZWN0aW9uIiwiX2hhbmRsZUxvc3RDb25uZWN0aW9uIiwiX2hhbmRsZUdhaW5lZENvbm5lY3Rpb24iLCJfaGFuZGxlSW5jb21pbmdNZXNzYWdlIiwiZXZlbnREYXRhIiwiX2ZvcndhcmRDaGF0RXZlbnQiLCJnZXRDaGF0RGV0YWlscyIsImluY29taW5nRGF0YSIsImV2ZW50VHlwZSIsImJyZWFrQ29ubmVjdGlvbiIsInJlc3BvbnNlT2JqZWN0IiwiY29ubmVjdFN1Y2Nlc3MiLCJjb25uZWN0Q2FsbGVkIiwiX3Nob3VsZEFja25vd2xlZGdlQ29udGFjdCIsImVycm9yT2JqZWN0IiwiY2xlYW5VcE9uUGFydGljaXBhbnREaXNjb25uZWN0IiwiY29ubmVjdGlvbkhlbHBlclN0YXR1cyIsIl9jb252ZXJ0Q29ubmVjdGlvbkhlbHBlclN0YXR1cyIsIlBlcnNpc3RlbnRDb25uZWN0aW9uQW5kQ2hhdFNlcnZpY2VTZXNzaW9uRmFjdG9yeSIsImNoYXRDb250cm9sbGVyIiwiX2NyZWF0ZUNoYXRDb250cm9sbGVyIiwiQWdlbnRDaGF0U2Vzc2lvbiIsIkN1c3RvbWVyQ2hhdFNlc3Npb24iLCJub3JtYWxpemVDaGF0RGV0YWlscyIsImdldENhY2hlZENsaWVudCIsInBhcnRpY2lwYW50VHlwZSIsIkNoYXRTZXNzaW9uIiwiY29udHJvbGxlciIsImNvbm5lY3QiLCJDSEFUX1NFU1NJT05fRkFDVE9SWSIsIkNoYXRTZXNzaW9uT2JqZWN0IiwiY3JlYXRlQ2hhdFNlc3Npb24iLCJzZXRHbG9iYWxDb25maWciLCJsb2dnZXJDb25maWciLCJ1cGRhdGUiLCJTZXNzaW9uVHlwZXMiLCJnIiwiZ2xvYmFsIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxF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QVFBLEVBQ1JnUixhQUFjdlUsSSxjQ3ZKaEIsSUFBSXdVLEVBR0pBLEVBQUksV0FDSCxPQUFPL1UsS0FESixHQUlKLElBRUMrVSxFQUFJQSxHQUFLLElBQUk5WCxTQUFTLGNBQWIsR0FDUixNQUFPdUcsR0FFYyxpQkFBWG5FLFNBQXFCMFYsRUFBSTFWLFFBT3JDL0csRUFBT0QsUUFBVTBjLEcsaVJDbEJmLFFBQUk3YyxFQUdKLFNBQTZCRSxHLDg1aEJDSi9CLDBFQUdBNGMsRUFBT1QsUUFBVVMsRUFBT1QsU0FBVyxHQUNuQ0EsUUFBUUYsWUFBY0ksSUFDZixJQUFNSixFQUFjSSxLIiwiZmlsZSI6ImFtYXpvbi1jb25uZWN0LWNoYXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG4iLCIvKiBnbG9iYWwgd2luZG93LCBleHBvcnRzLCBkZWZpbmUgKi9cblxuIWZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0J1xuXG4gICAgdmFyIHJlID0ge1xuICAgICAgICBub3Rfc3RyaW5nOiAvW15zXS8sXG4gICAgICAgIG5vdF9ib29sOiAvW150XS8sXG4gICAgICAgIG5vdF90eXBlOiAvW15UXS8sXG4gICAgICAgIG5vdF9wcmltaXRpdmU6IC9bXnZdLyxcbiAgICAgICAgbnVtYmVyOiAvW2RpZWZnXS8sXG4gICAgICAgIG51bWVyaWNfYXJnOiAvW2JjZGllZmd1eFhdLyxcbiAgICAgICAganNvbjogL1tqXS8sXG4gICAgICAgIG5vdF9qc29uOiAvW15qXS8sXG4gICAgICAgIHRleHQ6IC9eW15cXHgyNV0rLyxcbiAgICAgICAgbW9kdWxvOiAvXlxceDI1ezJ9LyxcbiAgICAgICAgcGxhY2Vob2xkZXI6IC9eXFx4MjUoPzooWzEtOV1cXGQqKVxcJHxcXCgoW14pXSspXFwpKT8oXFwrKT8oMHwnW14kXSk/KC0pPyhcXGQrKT8oPzpcXC4oXFxkKykpPyhbYi1naWpvc3RUdXZ4WF0pLyxcbiAgICAgICAga2V5OiAvXihbYS16X11bYS16X1xcZF0qKS9pLFxuICAgICAgICBrZXlfYWNjZXNzOiAvXlxcLihbYS16X11bYS16X1xcZF0qKS9pLFxuICAgICAgICBpbmRleF9hY2Nlc3M6IC9eXFxbKFxcZCspXFxdLyxcbiAgICAgICAgc2lnbjogL15bKy1dL1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNwcmludGYoa2V5KSB7XG4gICAgICAgIC8vIGBhcmd1bWVudHNgIGlzIG5vdCBhbiBhcnJheSwgYnV0IHNob3VsZCBiZSBmaW5lIGZvciB0aGlzIGNhbGxcbiAgICAgICAgcmV0dXJuIHNwcmludGZfZm9ybWF0KHNwcmludGZfcGFyc2Uoa2V5KSwgYXJndW1lbnRzKVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHZzcHJpbnRmKGZtdCwgYXJndikge1xuICAgICAgICByZXR1cm4gc3ByaW50Zi5hcHBseShudWxsLCBbZm10XS5jb25jYXQoYXJndiB8fCBbXSkpXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3ByaW50Zl9mb3JtYXQocGFyc2VfdHJlZSwgYXJndikge1xuICAgICAgICB2YXIgY3Vyc29yID0gMSwgdHJlZV9sZW5ndGggPSBwYXJzZV90cmVlLmxlbmd0aCwgYXJnLCBvdXRwdXQgPSAnJywgaSwgaywgcGgsIHBhZCwgcGFkX2NoYXJhY3RlciwgcGFkX2xlbmd0aCwgaXNfcG9zaXRpdmUsIHNpZ25cbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRyZWVfbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGFyc2VfdHJlZVtpXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gcGFyc2VfdHJlZVtpXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHBhcnNlX3RyZWVbaV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgcGggPSBwYXJzZV90cmVlW2ldIC8vIGNvbnZlbmllbmNlIHB1cnBvc2VzIG9ubHlcbiAgICAgICAgICAgICAgICBpZiAocGgua2V5cykgeyAvLyBrZXl3b3JkIGFyZ3VtZW50XG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3ZbY3Vyc29yXVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgcGgua2V5cy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZyA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Ioc3ByaW50ZignW3NwcmludGZdIENhbm5vdCBhY2Nlc3MgcHJvcGVydHkgXCIlc1wiIG9mIHVuZGVmaW5lZCB2YWx1ZSBcIiVzXCInLCBwaC5rZXlzW2tdLCBwaC5rZXlzW2stMV0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnW3BoLmtleXNba11dXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocGgucGFyYW1fbm8pIHsgLy8gcG9zaXRpb25hbCBhcmd1bWVudCAoZXhwbGljaXQpXG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3ZbcGgucGFyYW1fbm9dXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBwb3NpdGlvbmFsIGFyZ3VtZW50IChpbXBsaWNpdClcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJndltjdXJzb3IrK11cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocmUubm90X3R5cGUudGVzdChwaC50eXBlKSAmJiByZS5ub3RfcHJpbWl0aXZlLnRlc3QocGgudHlwZSkgJiYgYXJnIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnKClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocmUubnVtZXJpY19hcmcudGVzdChwaC50eXBlKSAmJiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgJiYgaXNOYU4oYXJnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzcHJpbnRmKCdbc3ByaW50Zl0gZXhwZWN0aW5nIG51bWJlciBidXQgZm91bmQgJVQnLCBhcmcpKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZS5udW1iZXIudGVzdChwaC50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBpc19wb3NpdGl2ZSA9IGFyZyA+PSAwXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChwaC50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2InOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gcGFyc2VJbnQoYXJnLCAxMCkudG9TdHJpbmcoMilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChhcmcsIDEwKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2QnOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdpJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBhcnNlSW50KGFyZywgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdqJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IEpTT04uc3RyaW5naWZ5KGFyZywgbnVsbCwgcGgud2lkdGggPyBwYXJzZUludChwaC53aWR0aCkgOiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBwaC5wcmVjaXNpb24gPyBwYXJzZUZsb2F0KGFyZykudG9FeHBvbmVudGlhbChwaC5wcmVjaXNpb24pIDogcGFyc2VGbG9hdChhcmcpLnRvRXhwb25lbnRpYWwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZic6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBwaC5wcmVjaXNpb24gPyBwYXJzZUZsb2F0KGFyZykudG9GaXhlZChwaC5wcmVjaXNpb24pIDogcGFyc2VGbG9hdChhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdnJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IHBoLnByZWNpc2lvbiA/IFN0cmluZyhOdW1iZXIoYXJnLnRvUHJlY2lzaW9uKHBoLnByZWNpc2lvbikpKSA6IHBhcnNlRmxvYXQoYXJnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGFyc2VJbnQoYXJnLCAxMCkgPj4+IDApLnRvU3RyaW5nKDgpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IFN0cmluZyhhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGgucHJlY2lzaW9uID8gYXJnLnN1YnN0cmluZygwLCBwaC5wcmVjaXNpb24pIDogYXJnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBTdHJpbmcoISFhcmcpXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSAocGgucHJlY2lzaW9uID8gYXJnLnN1YnN0cmluZygwLCBwaC5wcmVjaXNpb24pIDogYXJnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnVCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnKS5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gKHBoLnByZWNpc2lvbiA/IGFyZy5zdWJzdHJpbmcoMCwgcGgucHJlY2lzaW9uKSA6IGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gcGFyc2VJbnQoYXJnLCAxMCkgPj4+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3YnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnLnZhbHVlT2YoKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gKHBoLnByZWNpc2lvbiA/IGFyZy5zdWJzdHJpbmcoMCwgcGgucHJlY2lzaW9uKSA6IGFyZylcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gKHBhcnNlSW50KGFyZywgMTApID4+PiAwKS50b1N0cmluZygxNilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gKHBhcnNlSW50KGFyZywgMTApID4+PiAwKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlLmpzb24udGVzdChwaC50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gYXJnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmUubnVtYmVyLnRlc3QocGgudHlwZSkgJiYgKCFpc19wb3NpdGl2ZSB8fCBwaC5zaWduKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbiA9IGlzX3Bvc2l0aXZlID8gJysnIDogJy0nXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoKS5yZXBsYWNlKHJlLnNpZ24sICcnKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbiA9ICcnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGFkX2NoYXJhY3RlciA9IHBoLnBhZF9jaGFyID8gcGgucGFkX2NoYXIgPT09ICcwJyA/ICcwJyA6IHBoLnBhZF9jaGFyLmNoYXJBdCgxKSA6ICcgJ1xuICAgICAgICAgICAgICAgICAgICBwYWRfbGVuZ3RoID0gcGgud2lkdGggLSAoc2lnbiArIGFyZykubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgIHBhZCA9IHBoLndpZHRoID8gKHBhZF9sZW5ndGggPiAwID8gcGFkX2NoYXJhY3Rlci5yZXBlYXQocGFkX2xlbmd0aCkgOiAnJykgOiAnJ1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gcGguYWxpZ24gPyBzaWduICsgYXJnICsgcGFkIDogKHBhZF9jaGFyYWN0ZXIgPT09ICcwJyA/IHNpZ24gKyBwYWQgKyBhcmcgOiBwYWQgKyBzaWduICsgYXJnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0XG4gICAgfVxuXG4gICAgdmFyIHNwcmludGZfY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cbiAgICBmdW5jdGlvbiBzcHJpbnRmX3BhcnNlKGZtdCkge1xuICAgICAgICBpZiAoc3ByaW50Zl9jYWNoZVtmbXRdKSB7XG4gICAgICAgICAgICByZXR1cm4gc3ByaW50Zl9jYWNoZVtmbXRdXG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX2ZtdCA9IGZtdCwgbWF0Y2gsIHBhcnNlX3RyZWUgPSBbXSwgYXJnX25hbWVzID0gMFxuICAgICAgICB3aGlsZSAoX2ZtdCkge1xuICAgICAgICAgICAgaWYgKChtYXRjaCA9IHJlLnRleHQuZXhlYyhfZm10KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYXJzZV90cmVlLnB1c2gobWF0Y2hbMF0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICgobWF0Y2ggPSByZS5tb2R1bG8uZXhlYyhfZm10KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYXJzZV90cmVlLnB1c2goJyUnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoKG1hdGNoID0gcmUucGxhY2Vob2xkZXIuZXhlYyhfZm10KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hbMl0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnX25hbWVzIHw9IDFcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkX2xpc3QgPSBbXSwgcmVwbGFjZW1lbnRfZmllbGQgPSBtYXRjaFsyXSwgZmllbGRfbWF0Y2ggPSBbXVxuICAgICAgICAgICAgICAgICAgICBpZiAoKGZpZWxkX21hdGNoID0gcmUua2V5LmV4ZWMocmVwbGFjZW1lbnRfZmllbGQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGlzdC5wdXNoKGZpZWxkX21hdGNoWzFdKVxuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChyZXBsYWNlbWVudF9maWVsZCA9IHJlcGxhY2VtZW50X2ZpZWxkLnN1YnN0cmluZyhmaWVsZF9tYXRjaFswXS5sZW5ndGgpKSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGZpZWxkX21hdGNoID0gcmUua2V5X2FjY2Vzcy5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGlzdC5wdXNoKGZpZWxkX21hdGNoWzFdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgoZmllbGRfbWF0Y2ggPSByZS5pbmRleF9hY2Nlc3MuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xpc3QucHVzaChmaWVsZF9tYXRjaFsxXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcignW3NwcmludGZdIGZhaWxlZCB0byBwYXJzZSBuYW1lZCBhcmd1bWVudCBrZXknKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcignW3NwcmludGZdIGZhaWxlZCB0byBwYXJzZSBuYW1lZCBhcmd1bWVudCBrZXknKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoWzJdID0gZmllbGRfbGlzdFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnX25hbWVzIHw9IDJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFyZ19uYW1lcyA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1tzcHJpbnRmXSBtaXhpbmcgcG9zaXRpb25hbCBhbmQgbmFtZWQgcGxhY2Vob2xkZXJzIGlzIG5vdCAoeWV0KSBzdXBwb3J0ZWQnKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWUucHVzaChcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IG1hdGNoWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1fbm86ICAgIG1hdGNoWzFdLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogICAgICAgIG1hdGNoWzJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbjogICAgICAgIG1hdGNoWzNdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkX2NoYXI6ICAgIG1hdGNoWzRdLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICAgICAgIG1hdGNoWzVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICAgICAgIG1hdGNoWzZdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uOiAgIG1hdGNoWzddLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogICAgICAgIG1hdGNoWzhdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ1tzcHJpbnRmXSB1bmV4cGVjdGVkIHBsYWNlaG9sZGVyJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9mbXQgPSBfZm10LnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNwcmludGZfY2FjaGVbZm10XSA9IHBhcnNlX3RyZWVcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBleHBvcnQgdG8gZWl0aGVyIGJyb3dzZXIgb3Igbm9kZS5qc1xuICAgICAqL1xuICAgIC8qIGVzbGludC1kaXNhYmxlIHF1b3RlLXByb3BzICovXG4gICAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBleHBvcnRzWydzcHJpbnRmJ10gPSBzcHJpbnRmXG4gICAgICAgIGV4cG9ydHNbJ3ZzcHJpbnRmJ10gPSB2c3ByaW50ZlxuICAgIH1cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd2luZG93WydzcHJpbnRmJ10gPSBzcHJpbnRmXG4gICAgICAgIHdpbmRvd1sndnNwcmludGYnXSA9IHZzcHJpbnRmXG5cbiAgICAgICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lWydhbWQnXSkge1xuICAgICAgICAgICAgZGVmaW5lKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICdzcHJpbnRmJzogc3ByaW50ZixcbiAgICAgICAgICAgICAgICAgICAgJ3ZzcHJpbnRmJzogdnNwcmludGZcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgcXVvdGUtcHJvcHMgKi9cbn0oKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuIiwiY2xhc3MgVmFsdWVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSkge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IFwiVmFsdWVFcnJvclwiO1xuICAgIGNvbnNvbGUubG9nKFwiRVhDRVBUSU9OOiBcIiArIHRoaXMubmFtZSArIFwiIE1FU1NBR0U6IFwiICsgdGhpcy5tZXNzYWdlKTtcbiAgfVxufVxuXG5jbGFzcyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJVbkltcGxlbWVudGVkTWV0aG9kXCI7XG4gICAgY29uc29sZS5sb2coXCJFWENFUFRJT046IFwiICsgdGhpcy5uYW1lICsgXCIgTUVTU0FHRTogXCIgKyB0aGlzLm1lc3NhZ2UpO1xuICB9XG59XG5cbmNsYXNzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgYXJndW1lbnQpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIklsbGVnYWxBcmd1bWVudFwiO1xuICAgIHRoaXMuYXJndW1lbnQgPSBhcmd1bWVudDtcbiAgICBjb25zb2xlLmxvZyhcIkVYQ0VQVElPTjogXCIgKyB0aGlzLm5hbWUgKyBcIiBNRVNTQUdFOiBcIiArIHRoaXMubWVzc2FnZSk7XG4gIH1cbn1cblxuY2xhc3MgSWxsZWdhbFN0YXRlRXhjZXB0aW9uIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJJbGxlZ2FsU3RhdGVcIjtcbiAgICBjb25zb2xlLmxvZyhcIkVYQ0VQVElPTjogXCIgKyB0aGlzLm5hbWUgKyBcIiBNRVNTQUdFOiBcIiArIHRoaXMubWVzc2FnZSk7XG4gIH1cbn1cblxuY2xhc3MgSWxsZWdhbEpzb25FeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGFyZ3MpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIklsbGVnYWxTdGF0ZVwiO1xuICAgIHRoaXMuY2F1c2VFeGNlcHRpb24gPSBhcmdzLmNhdXNlRXhjZXB0aW9uO1xuICAgIHRoaXMub3JpZ2luYWxKc29uU3RyaW5nID0gYXJncy5vcmlnaW5hbEpzb25TdHJpbmc7XG4gICAgY29uc29sZS5sb2coXG4gICAgICBcIkVYQ0VQVElPTjogXCIgK1xuICAgICAgICB0aGlzLm5hbWUgK1xuICAgICAgICBcIiBNRVNTQUdFOiBcIiArXG4gICAgICAgIHRoaXMubWVzc2FnZSArXG4gICAgICAgIFwiIGNhdXNlOiBcIiArXG4gICAgICAgIHRoaXMuY2F1c2VFeGNlcHRpb25cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24sXG4gIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbixcbiAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLFxuICBJbGxlZ2FsSnNvbkV4Y2VwdGlvbixcbiAgVmFsdWVFcnJvclxufTtcbiIsImNsYXNzIEdsb2JhbENvbmZpZ0ltcGwge1xuICB1cGRhdGUoY29uZmlnSW5wdXQpIHtcbiAgICB2YXIgY29uZmlnID0gY29uZmlnSW5wdXQgfHwge307XG4gICAgdGhpcy5yZWdpb24gPSBjb25maWcucmVnaW9uIHx8IHRoaXMucmVnaW9uO1xuICAgIHRoaXMuZW5kcG9pbnRPdmVycmlkZSA9IGNvbmZpZy5lbmRwb2ludCB8fCB0aGlzLmVuZHBvaW50T3ZlcnJpZGU7XG4gICAgdGhpcy5yZWNvbm5lY3QgPSBjb25maWcucmVjb25uZWN0ID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZTtcbiAgfVxuXG4gIGdldFJlZ2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5yZWdpb247XG4gIH1cblxuICBnZXRFbmRwb2ludE92ZXJyaWRlKCkge1xuICAgIHJldHVybiB0aGlzLmVuZHBvaW50T3ZlcnJpZGU7XG4gIH1cbn1cblxuY29uc3QgR2xvYmFsQ29uZmlnID0gbmV3IEdsb2JhbENvbmZpZ0ltcGwoKTtcblxuZXhwb3J0IHsgR2xvYmFsQ29uZmlnIH07XG4iLCIvL1BsYWNlaG9sZGVyXG5leHBvcnQgY29uc3QgQ0hBVF9DT05GSUdVUkFUSU9OUyA9IHtcbiAgQ09OQ1VSUkVOVF9DSEFUUzogMTBcbn07XG5cbmV4cG9ydCBjb25zdCBQQVJUSUNJUEFOVF9UT0tFTl9IRUFERVIgPSBcIngtYW16bi1jb25uZWN0LXBhcnRpY2lwYW50LXRva2VuXCI7XG5leHBvcnQgY29uc3QgQVVUSF9IRUFERVIgPSBcIlgtQW16LUJlYXJlclwiO1xuXG5leHBvcnQgY29uc3QgUkVTT1VSQ0VfUEFUSCA9IHtcbiAgQ09OTkVDVElPTl9ERVRBSUxTOiBcIi9jb250YWN0L2NoYXQvcGFydGljaXBhbnQvY29ubmVjdGlvbi1kZXRhaWxzXCIsXG4gIE1FU1NBR0U6IFwiL3BhcnRpY2lwYW50L21lc3NhZ2VcIixcbiAgVFJBTlNDUklQVDogXCIvcGFydGljaXBhbnQvdHJhbnNjcmlwdFwiLFxuICBFVkVOVDogXCIvcGFydGljaXBhbnQvZXZlbnRcIixcbiAgRElTQ09OTkVDVDogXCIvcGFydGljaXBhbnQvZGlzY29ubmVjdFwiLFxuICBQQVJUSUNJUEFOVF9DT05ORUNUSU9OOiBcIi9wYXJ0aWNpcGFudC9jb25uZWN0aW9uXCJcbn07XG5cbmV4cG9ydCBjb25zdCBSRUdJT05fQ09ORklHID0ge1xuICBcInVzLXdlc3QtMlwiOiB7XG4gICAgaW52b2tlVXJsOiBcImh0dHBzOi8vcGFydGljaXBhbnQuY29ubmVjdC51cy13ZXN0LTIuYW1hem9uYXdzLmNvbVwiXG4gIH0sXG4gIFwidXMtZWFzdC0xXCI6IHtcbiAgICBpbnZva2VVcmw6IFwiaHR0cHM6Ly9wYXJ0aWNpcGFudC5jb25uZWN0LnVzLWVhc3QtMS5hbWF6b25hd3MuY29tXCJcbiAgfSxcbiAgXCJhcC1zb3V0aC0xXCI6IHtcbiAgICBpbnZva2VVcmw6IFwiaHR0cHM6Ly9wYXJ0aWNpcGFudC5jb25uZWN0LmFwLXNvdXRoLTEuYW1hem9uYXdzLmNvbVwiXG4gIH0sXG4gIFwiYXAtc291dGhlYXN0LTFcIjoge1xuICAgIGludm9rZVVybDogXCJodHRwczovL3BhcnRpY2lwYW50LmNvbm5lY3QuYXAtc291dGhlYXN0LTEuYW1hem9uYXdzLmNvbVwiXG4gIH0sXG4gIFwiYXAtc291dGhlYXN0LTJcIjoge1xuICAgIGludm9rZVVybDogXCJodHRwczovL3BhcnRpY2lwYW50LmNvbm5lY3QuYXAtc291dGhlYXN0LTIuYW1hem9uYXdzLmNvbVwiXG4gIH0sXG4gIFwiYXAtbm9ydGhlYXN0LTFcIjoge1xuICAgIGludm9rZVVybDogXCJodHRwczovL3BhcnRpY2lwYW50LmNvbm5lY3QuYXAtbm9ydGhlYXN0LTEuYW1hem9uYXdzLmNvbVwiXG4gIH0sXG4gIFwiZXUtY2VudHJhbC0xXCI6IHtcbiAgICBpbnZva2VVcmw6IFwiaHR0cHM6Ly9wYXJ0aWNpcGFudC5jb25uZWN0LmV1LWNlbnRyYWwtMS5hbWF6b25hd3MuY29tXCJcbiAgfSxcbiAgXCJldS13ZXN0LTJcIjoge1xuICAgIGludm9rZVVybDogXCJodHRwczovL3BhcnRpY2lwYW50LmNvbm5lY3QuZXUtd2VzdC0yLmFtYXpvbmF3cy5jb21cIlxuICB9XG59O1xuXG5leHBvcnQgY29uc3QgU0VTU0lPTl9UWVBFUyA9IHtcbiAgQUdFTlQ6IFwiQUdFTlRcIixcbiAgQ1VTVE9NRVI6IFwiQ1VTVE9NRVJcIlxufTtcblxuZXhwb3J0IGNvbnN0IENIQVRfRVZFTlRTID0ge1xuICBJTkNPTUlOR19NRVNTQUdFOiBcIklOQ09NSU5HX01FU1NBR0VcIixcbiAgSU5DT01JTkdfVFlQSU5HOiBcIklOQ09NSU5HX1RZUElOR1wiLFxuICBDT05ORUNUSU9OX0VTVEFCTElTSEVEOiBcIkNPTk5FQ1RJT05fRVNUQUJMSVNIRURcIixcbiAgQ09OTkVDVElPTl9MT1NUOiBcIkNPTk5FQ1RJT05fTE9TVFwiLFxuICBDT05ORUNUSU9OX0JST0tFTjogXCJDT05ORUNUSU9OX0JST0tFTlwiLFxuICBDT05ORUNUSU9OX0FDSzogXCJDT05ORUNUSU9OX0FDS1wiLFxuICBDSEFUX0VOREVEOiBcIkNIQVRfRU5ERURcIlxufTtcblxuZXhwb3J0IGNvbnN0IENPTlRFTlRfVFlQRSA9IHtcbiAgdGV4dFBsYWluOiBcInRleHQvcGxhaW5cIixcbiAgY29ubmVjdGlvbkFja25vd2xlZGdlZDogXCJhcHBsaWNhdGlvbi92bmQuYW1hem9uYXdzLmNvbm5lY3QuZXZlbnQuY29ubmVjdGlvbi5hY2tub3dsZWRnZWRcIixcbiAgdHlwaW5nOiBcImFwcGxpY2F0aW9uL3ZuZC5hbWF6b25hd3MuY29ubmVjdC5ldmVudC50eXBpbmdcIixcbiAgcGFydGljaXBhbnRKb2luZWQ6IFwiYXBwbGljYXRpb24vdm5kLmFtYXpvbmF3cy5jb25uZWN0LmV2ZW50LnBhcnRpY2lwYW50LmpvaW5lZFwiLFxuICBwYXJ0aWNpcGFudExlZnQ6IFwiYXBwbGljYXRpb24vdm5kLmFtYXpvbmF3cy5jb25uZWN0LmV2ZW50LnBhcnRpY2lwYW50LmxlZnRcIixcbiAgdHJhbnNmZXJTdWNjZWVkZWQ6IFwiYXBwbGljYXRpb24vdm5kLmFtYXpvbmF3cy5jb25uZWN0LmV2ZW50LnRyYW5zZmVyLnN1Y2NlZWRlZFwiLFxuICB0cmFuc2ZlckZhaWxlZDogXCJhcHBsaWNhdGlvbi92bmQuYW1hem9uYXdzLmNvbm5lY3QuZXZlbnQudHJhbnNmZXIuZmFpbGVkXCIsXG4gIGNoYXRFbmRlZDogXCJhcHBsaWNhdGlvbi92bmQuYW1hem9uYXdzLmNvbm5lY3QuZXZlbnQuY2hhdC5lbmRlZFwiXG59O1xuXG5leHBvcnQgY29uc3QgRVZFTlQgPSBcIkVWRU5UXCI7XG5leHBvcnQgY29uc3QgTUVTU0FHRSA9IFwiTUVTU0FHRVwiO1xuXG5leHBvcnQgY29uc3QgVFJBTlNDUklQVF9ERUZBVUxUX1BBUkFNUyA9IHtcbiAgTUFYX1JFU1VMVFM6IDE1LFxuICBTT1JUX09SREVSOiBcIkFTQ0VORElOR1wiLFxuICBTQ0FOX0RJUkVDVElPTjogXCJCQUNLV0FSRFwiXG59O1xuXG5leHBvcnQgY29uc3QgTE9HU19ERVNUSU5BVElPTiA9IHtcbiAgTlVMTDogXCJOVUxMXCIsXG4gIENMSUVOVF9MT0dHRVI6IFwiQ0xJRU5UX0xPR0dFUlwiLFxuICBERUJVRzogXCJERUJVR1wiXG59O1xuXG5leHBvcnQgY29uc3QgUkVHSU9OUyA9IHtcbiAgcGR4OiBcInVzLXdlc3QtMlwiLFxuICBpYWQ6IFwidXMtZWFzdC0xXCIsXG4gIHN5ZDogXCJhcC1zb3V0aGVhc3QtMlwiLFxuICBucnQ6IFwiYXAtbm9ydGhlYXN0LTFcIixcbiAgZnJhOiBcImV1LWNlbnRyYWwtMVwiXG59O1xuXG5leHBvcnQgY29uc3QgQUdFTlRfUkVDT05ORUNUX0NPTkZJRyA9IHtcbiAgaW50ZXJ2YWw6IDMwMDAsXG4gIG1heFJldHJpZXM6IDVcbn07XG5cbmV4cG9ydCBjb25zdCBDVVNUT01FUl9SRUNPTk5FQ1RfQ09ORklHID0ge1xuICBpbnRlcnZhbDogMzAwMCxcbiAgbWF4UmV0cmllczogNVxufTtcblxuZXhwb3J0IGNvbnN0IENPTk5FQ1RJT05fVE9LRU5fUE9MTElOR19JTlRFUlZBTF9JTl9NUyA9IDEwMDAgKiA2MCAqIDYwICogMTI7IC8vIDEyIGhvdXJzXG5cbmV4cG9ydCBjb25zdCBDT05ORUNUSU9OX1RPS0VOX0VYUElSWV9CVUZGRVJfSU5fTVMgPSA2MCAqIDEwMDA7IC8vMSBtaW5cblxuZXhwb3J0IGNvbnN0IFRSQU5TUE9SVF9MSUZFVElNRV9JTl9TRUNPTkRTID0gNzE0MDsgLy8gMTE5IG1pbnNcbiIsImltcG9ydCB7IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiB9IGZyb20gXCIuL2NvcmUvZXhjZXB0aW9uc1wiO1xuaW1wb3J0IHsgVmFsdWVFcnJvciB9IGZyb20gXCIuL2NvcmUvZXhjZXB0aW9uc1wiO1xuaW1wb3J0IHsgc3ByaW50ZiB9IGZyb20gXCJzcHJpbnRmLWpzXCI7XG5jb25zdCBVdGlscyA9IHt9O1xuXG4vKipcbiAqIEFzc2VydHMgdGhhdCBhIHByZW1pc2UgaXMgdHJ1ZS5cbiAqL1xuVXRpbHMuYXNzZXJ0VHJ1ZSA9IGZ1bmN0aW9uKHByZW1pc2UsIG1lc3NhZ2UpIHtcbiAgaWYgKCFwcmVtaXNlKSB7XG4gICAgdGhyb3cgbmV3IFZhbHVlRXJyb3IobWVzc2FnZSk7XG4gIH1cbn07XG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IGEgdmFsdWUgaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkLlxuICovXG5VdGlscy5hc3NlcnROb3ROdWxsID0gZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgVXRpbHMuYXNzZXJ0VHJ1ZShcbiAgICB2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgIT09IHVuZGVmaW5lZCxcbiAgICBzcHJpbnRmKFwiJXMgbXVzdCBiZSBwcm92aWRlZFwiLCBuYW1lIHx8IFwiQSB2YWx1ZVwiKVxuICApO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG5VdGlscy5ub3cgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xufTtcblxuVXRpbHMuaXNTdHJpbmcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiO1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHJhbmRvbSBJRCBjb25zaXN0aW5nIG9mIHRoZSBjdXJyZW50IHRpbWVzdGFtcFxuICogYW5kIGEgcmFuZG9tIGJhc2UtMzYgbnVtYmVyIGJhc2VkIG9uIE1hdGgucmFuZG9tKCkuXG4gKi9cblV0aWxzLnJhbmRvbUlkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBzcHJpbnRmKFxuICAgIFwiJXMtJXNcIixcbiAgICBVdGlscy5ub3coKSxcbiAgICBNYXRoLnJhbmRvbSgpXG4gICAgICAudG9TdHJpbmcoMzYpXG4gICAgICAuc2xpY2UoMilcbiAgKTtcbn07XG5cblV0aWxzLmFzc2VydElzTm9uRW1wdHlTdHJpbmcgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihrZXkgKyBcIiBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIVwiKTtcbiAgfVxufTtcblxuVXRpbHMuYXNzZXJ0SXNMaXN0ID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihrZXkgKyBcIiBpcyBub3QgYW4gYXJyYXlcIik7XG4gIH1cbn07XG5cblV0aWxzLmFzc2VydElzRW51bSA9IGZ1bmN0aW9uKHZhbHVlLCBhbGxvd2VkVmFsdWVzLCBrZXkpIHtcbiAgdmFyIGk7XG4gIGZvciAoaSA9IDA7IGkgPCBhbGxvd2VkVmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGFsbG93ZWRWYWx1ZXNbaV0gPT09IHZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXG4gICAga2V5ICsgXCIgcGFzc2VkIGlzIG5vdCB2YWxpZC4gXCIgKyBcIkFsbG93ZWQgdmFsdWVzIGFyZTogXCIgKyBhbGxvd2VkVmFsdWVzXG4gICk7XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlIGFuIGVudW0gZnJvbSB0aGUgZ2l2ZW4gbGlzdCBvZiBsb3dlci1jYXNlIGVudW0gdmFsdWVzLFxuICogd2hlcmUgdGhlIGVudW0ga2V5cyB3aWxsIGJlIHVwcGVyIGNhc2UuXG4gKlxuICogQ29udmVyc2lvbiBmcm9tIHBhc2NhbCBjYXNlIGJhc2VkIG9uIGNvZGUgZnJvbSBoZXJlOlxuICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zMDUyMTIyNFxuICovXG5VdGlscy5tYWtlRW51bSA9IGZ1bmN0aW9uKHZhbHVlcykge1xuICB2YXIgZW51bU9iaiA9IHt9O1xuXG4gIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIGtleSA9IHZhbHVlXG4gICAgICAucmVwbGFjZSgvXFwuPyhbYS16XSspXz8vZywgZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICByZXR1cm4geS50b1VwcGVyQ2FzZSgpICsgXCJfXCI7XG4gICAgICB9KVxuICAgICAgLnJlcGxhY2UoL18kLywgXCJcIik7XG5cbiAgICBlbnVtT2JqW2tleV0gPSB2YWx1ZTtcbiAgfSk7XG5cbiAgcmV0dXJuIGVudW1PYmo7XG59O1xuXG5VdGlscy5jb250YWlucyA9IGZ1bmN0aW9uKG9iaiwgdmFsdWUpIHtcbiAgaWYgKG9iaiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFV0aWxzLmZpbmQob2JqLCBmdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiB2ID09PSB2YWx1ZTtcbiAgICAgIH0pICE9PSBudWxsXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWUgaW4gb2JqO1xuICB9XG59O1xuXG5VdGlscy5maW5kID0gZnVuY3Rpb24oYXJyYXksIHByZWRpY2F0ZSkge1xuICBmb3IgKHZhciB4ID0gMDsgeCA8IGFycmF5Lmxlbmd0aDsgeCsrKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVt4XSkpIHtcbiAgICAgIHJldHVybiBhcnJheVt4XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn07XG5cblV0aWxzLmNvbnRhaW5zVmFsdWUgPSBmdW5jdGlvbihvYmosIHZhbHVlKSB7XG4gIGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSkge1xuICAgIHJldHVybiAoXG4gICAgICBVdGlscy5maW5kKG9iaiwgZnVuY3Rpb24odikge1xuICAgICAgICByZXR1cm4gdiA9PT0gdmFsdWU7XG4gICAgICB9KSAhPT0gbnVsbFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFV0aWxzLmZpbmQoVXRpbHMudmFsdWVzKG9iaiksIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmV0dXJuIHYgPT09IHZhbHVlO1xuICAgICAgfSkgIT09IG51bGxcbiAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIERldGVybWluZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBjYWxsYWJsZSBmdW5jdGlvbiB0eXBlLlxuICogQm9ycm93ZWQgZnJvbSBVbmRlcnNjb3JlLmpzLlxuICovXG5VdGlscy5pc0Z1bmN0aW9uID0gZnVuY3Rpb24ob2JqKSB7XG4gIHJldHVybiAhIShvYmogJiYgb2JqLmNvbnN0cnVjdG9yICYmIG9iai5jYWxsICYmIG9iai5hcHBseSk7XG59O1xuXG4vKipcbiAqIEdldCBhIGxpc3Qgb2YgdmFsdWVzIGZyb20gYSBKYXZhc2NyaXB0IG9iamVjdCB1c2VkXG4gKiBhcyBhIGhhc2ggbWFwLlxuICovXG5VdGlscy52YWx1ZXMgPSBmdW5jdGlvbihtYXApIHtcbiAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gIFV0aWxzLmFzc2VydE5vdE51bGwobWFwLCBcIm1hcFwiKTtcblxuICBmb3IgKHZhciBrIGluIG1hcCkge1xuICAgIHZhbHVlcy5wdXNoKG1hcFtrXSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWVzO1xufTtcblxuVXRpbHMuaXNPYmplY3QgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gISh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgfHwgdmFsdWUgPT09IG51bGwpO1xufTtcblxuVXRpbHMuYXNzZXJ0SXNPYmplY3QgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gIGlmICghVXRpbHMuaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihrZXkgKyBcIiBpcyBub3QgYW4gb2JqZWN0IVwiKTtcbiAgfVxufTtcblxuVXRpbHMuZGVsYXkgPSAobXMpID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuXG5VdGlscy5hc3luY1doaWxlSW50ZXJ2YWwgPSBmdW5jdGlvbihmLCBwcmVkaWNhdGUsIGludGVydmFsLCBjb3VudD0wLCBlcnJvcj1udWxsKSB7XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gIGlmIChwcmVkaWNhdGUoY291bnQpKSB7XG4gICAgcmV0dXJuIGYoY291bnQpLmNhdGNoKChlKSA9PiB7XG4gICAgICBjb25zdCBkZWxheSA9IE1hdGgubWF4KDAsIGludGVydmFsIC0gKG5ldyBEYXRlKCkpLnZhbHVlT2YoKSArIG5vdy52YWx1ZU9mKCkpO1xuICAgICAgcmV0dXJuIFV0aWxzXG4gICAgICAgIC5kZWxheShkZWxheSlcbiAgICAgICAgLnRoZW4oKCkgPT4gVXRpbHMuYXN5bmNXaGlsZUludGVydmFsKGYsIHByZWRpY2F0ZSwgaW50ZXJ2YWwsIGNvdW50ICsgMSwgZSkpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvciB8fCBuZXcgRXJyb3IoXCJhc3luYyB3aGlsZSBhYm9ydGVkXCIpKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgVXRpbHM7XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IExPR1NfREVTVElOQVRJT04gfSBmcm9tIFwiLi9jb25zdGFudHNcIjtcblxuLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG5jbGFzcyBMb2dnZXIge1xuICBkZWJ1ZyhkYXRhKSB7fVxuXG4gIGluZm8oZGF0YSkge31cblxuICB3YXJuKGRhdGEpIHt9XG5cbiAgZXJyb3IoZGF0YSkge31cbn1cbi8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG5cbmNvbnN0IExvZ0xldmVsID0ge1xuICBERUJVRzogMTAsXG4gIElORk86IDIwLFxuICBXQVJOOiAzMCxcbiAgRVJST1I6IDQwXG59O1xuXG5jbGFzcyBMb2dNYW5hZ2VySW1wbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudXBkYXRlTG9nZ2VyQ29uZmlnKCk7XG4gICAgdGhpcy5jb25zb2xlTG9nZ2VyV3JhcHBlciA9IGNyZWF0ZUNvbnNvbGVMb2dnZXIoKTtcbiAgfVxuXG4gIHdyaXRlVG9DbGllbnRMb2dnZXIobGV2ZWwsIGxvZ1N0YXRlbWVudCkge1xuICAgIGlmICghdGhpcy5oYXNDbGllbnRMb2dnZXIoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICBjYXNlIExvZ0xldmVsLkRFQlVHOlxuICAgICAgICByZXR1cm4gdGhpcy5fY2xpZW50TG9nZ2VyLmRlYnVnKGxvZ1N0YXRlbWVudCk7XG4gICAgICBjYXNlIExvZ0xldmVsLklORk86XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnRMb2dnZXIuaW5mbyhsb2dTdGF0ZW1lbnQpO1xuICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxuICAgICAgICByZXR1cm4gdGhpcy5fY2xpZW50TG9nZ2VyLndhcm4obG9nU3RhdGVtZW50KTtcbiAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnRMb2dnZXIuZXJyb3IobG9nU3RhdGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBpc0xldmVsRW5hYmxlZChsZXZlbCkge1xuICAgIHJldHVybiBsZXZlbCA+PSB0aGlzLl9sZXZlbDtcbiAgfVxuXG4gIGhhc0NsaWVudExvZ2dlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50TG9nZ2VyICE9PSBudWxsO1xuICB9XG5cbiAgZ2V0TG9nZ2VyKG9wdGlvbnMpIHtcbiAgICB2YXIgcHJlZml4ID0gb3B0aW9ucy5wcmVmaXggfHwgXCJcIjtcbiAgICBpZiAodGhpcy5fbG9nc0Rlc3RpbmF0aW9uID09PSBMT0dTX0RFU1RJTkFUSU9OLkRFQlVHKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb25zb2xlTG9nZ2VyV3JhcHBlcjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMb2dnZXJXcmFwcGVySW1wbChwcmVmaXgpO1xuICB9XG5cbiAgdXBkYXRlTG9nZ2VyQ29uZmlnKGlucHV0Q29uZmlnKSB7XG4gICAgdmFyIGNvbmZpZyA9IGlucHV0Q29uZmlnIHx8IHt9O1xuICAgIHRoaXMuX2xldmVsID0gY29uZmlnLmxldmVsIHx8IExvZ0xldmVsLklORk87XG4gICAgdGhpcy5fY2xpZW50TG9nZ2VyID0gY29uZmlnLmxvZ2dlciB8fCBudWxsO1xuICAgIHRoaXMuX2xvZ3NEZXN0aW5hdGlvbiA9IExPR1NfREVTVElOQVRJT04uTlVMTDtcbiAgICBpZiAoY29uZmlnLmRlYnVnKSB7XG4gICAgICB0aGlzLl9sb2dzRGVzdGluYXRpb24gPSBMT0dTX0RFU1RJTkFUSU9OLkRFQlVHO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmxvZ2dlcikge1xuICAgICAgdGhpcy5fbG9nc0Rlc3RpbmF0aW9uID0gTE9HU19ERVNUSU5BVElPTi5DTElFTlRfTE9HR0VSO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBMb2dnZXJXcmFwcGVyIHtcbiAgZGVidWcoKSB7fVxuXG4gIGluZm8oKSB7fVxuXG4gIHdhcm4oKSB7fVxuXG4gIGVycm9yKCkge31cbn1cblxuY2xhc3MgTG9nZ2VyV3JhcHBlckltcGwgZXh0ZW5kcyBMb2dnZXJXcmFwcGVyIHtcbiAgY29uc3RydWN0b3IocHJlZml4KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnByZWZpeCA9IHByZWZpeCB8fCBcIlwiO1xuICB9XG5cbiAgZGVidWcoLi4uYXJncykge1xuICAgIHRoaXMuX2xvZyhMb2dMZXZlbC5ERUJVRywgYXJncyk7XG4gIH1cblxuICBpbmZvKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9sb2coTG9nTGV2ZWwuSU5GTywgYXJncyk7XG4gIH1cblxuICB3YXJuKC4uLmFyZ3MpIHtcbiAgICB0aGlzLl9sb2coTG9nTGV2ZWwuV0FSTiwgYXJncyk7XG4gIH1cblxuICBlcnJvciguLi5hcmdzKSB7XG4gICAgdGhpcy5fbG9nKExvZ0xldmVsLkVSUk9SLCBhcmdzKTtcbiAgfVxuXG4gIF9zaG91bGRMb2cobGV2ZWwpIHtcbiAgICByZXR1cm4gTG9nTWFuYWdlci5oYXNDbGllbnRMb2dnZXIoKSAmJiBMb2dNYW5hZ2VyLmlzTGV2ZWxFbmFibGVkKGxldmVsKTtcbiAgfVxuXG4gIF93cml0ZVRvQ2xpZW50TG9nZ2VyKGxldmVsLCBsb2dTdGF0ZW1lbnQpIHtcbiAgICBMb2dNYW5hZ2VyLndyaXRlVG9DbGllbnRMb2dnZXIobGV2ZWwsIGxvZ1N0YXRlbWVudCk7XG4gIH1cblxuICBfbG9nKGxldmVsLCBhcmdzKSB7XG4gICAgaWYgKHRoaXMuX3Nob3VsZExvZyhsZXZlbCkpIHtcbiAgICAgIHZhciBsb2dTdGF0ZW1lbnQgPSB0aGlzLl9jb252ZXJ0VG9TaW5nbGVTdGF0ZW1lbnQoYXJncyk7XG4gICAgICB0aGlzLl93cml0ZVRvQ2xpZW50TG9nZ2VyKGxldmVsLCBsb2dTdGF0ZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9jb252ZXJ0VG9TaW5nbGVTdGF0ZW1lbnQoYXJncykge1xuICAgIHZhciBsb2dTdGF0ZW1lbnQgPSBcIlwiO1xuICAgIGlmICh0aGlzLnByZWZpeCkge1xuICAgICAgbG9nU3RhdGVtZW50ICs9IHRoaXMucHJlZml4ICsgXCIgXCI7XG4gICAgfVxuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhcmdzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGFyZyA9IGFyZ3NbaW5kZXhdO1xuICAgICAgbG9nU3RhdGVtZW50ICs9IHRoaXMuX2NvbnZlcnRUb1N0cmluZyhhcmcpICsgXCIgXCI7XG4gICAgfVxuICAgIHJldHVybiBsb2dTdGF0ZW1lbnQ7XG4gIH1cblxuICBfY29udmVydFRvU3RyaW5nKGFyZykge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWFyZykge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIH1cbiAgICAgIGlmIChVdGlscy5pc1N0cmluZyhhcmcpKSB7XG4gICAgICAgIHJldHVybiBhcmc7XG4gICAgICB9XG4gICAgICBpZiAoVXRpbHMuaXNPYmplY3QoYXJnKSAmJiBVdGlscy5pc0Z1bmN0aW9uKGFyZy50b1N0cmluZykpIHtcbiAgICAgICAgdmFyIHRvU3RyaW5nUmVzdWx0ID0gYXJnLnRvU3RyaW5nKCk7XG4gICAgICAgIGlmICh0b1N0cmluZ1Jlc3VsdCAhPT0gXCJbb2JqZWN0IE9iamVjdF1cIikge1xuICAgICAgICAgIHJldHVybiB0b1N0cmluZ1Jlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB3aGlsZSBjb252ZXJ0aW5nIGFyZ3VtZW50IHRvIHN0cmluZ1wiLCBhcmcsIGVycm9yKTtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfVxufVxuXG52YXIgY3JlYXRlQ29uc29sZUxvZ2dlciA9ICgpID0+IHtcbiAgdmFyIGxvZ2dlciA9IG5ldyBMb2dnZXJXcmFwcGVyKCk7XG4gIGxvZ2dlci5kZWJ1ZyA9IGNvbnNvbGUuZGVidWcuYmluZCh3aW5kb3cuY29uc29sZSk7XG4gIGxvZ2dlci5pbmZvID0gY29uc29sZS5pbmZvLmJpbmQod2luZG93LmNvbnNvbGUpO1xuICBsb2dnZXIud2FybiA9IGNvbnNvbGUud2Fybi5iaW5kKHdpbmRvdy5jb25zb2xlKTtcbiAgbG9nZ2VyLmVycm9yID0gY29uc29sZS5lcnJvci5iaW5kKHdpbmRvdy5jb25zb2xlKTtcbiAgcmV0dXJuIGxvZ2dlcjtcbn07XG5cbmNvbnN0IExvZ01hbmFnZXIgPSBuZXcgTG9nTWFuYWdlckltcGwoKTtcblxuZXhwb3J0IHsgTG9nTWFuYWdlciwgTG9nZ2VyLCBMb2dMZXZlbCB9O1xuIiwiaW1wb3J0IHsgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbiB9IGZyb20gXCIuLi9jb3JlL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCB7IEdsb2JhbENvbmZpZyB9IGZyb20gXCIuLi9nbG9iYWxDb25maWdcIjtcbmltcG9ydCB7XG4gIFJFR0lPTl9DT05GSUcsXG4gIFJFR0lPTlNcbn0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTG9nTWFuYWdlciB9IGZyb20gXCIuLi9sb2dcIjtcblxuY2xhc3MgQ2hhdENsaWVudEZhY3RvcnlJbXBsIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jbGllbnRDYWNoZSA9IHt9O1xuICB9XG5cbiAgZ2V0Q2FjaGVkQ2xpZW50KG9wdGlvbnNJbnB1dCkge1xuICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9uc0lucHV0KTtcbiAgICB2YXIgcmVnaW9uID0gb3B0aW9uc0lucHV0LnJlZ2lvbiB8fCBHbG9iYWxDb25maWcuZ2V0UmVnaW9uKCkgfHwgUkVHSU9OUy5wZHg7XG4gICAgb3B0aW9ucy5yZWdpb24gPSByZWdpb247XG4gICAgaWYgKHRoaXMuY2xpZW50Q2FjaGVbcmVnaW9uXSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2xpZW50Q2FjaGVbcmVnaW9uXTtcbiAgICB9XG4gICAgdmFyIGNsaWVudCA9IHRoaXMuX2NyZWF0ZUF3c0NsaWVudChvcHRpb25zKTtcbiAgICB0aGlzLmNsaWVudENhY2hlW3JlZ2lvbl0gPSBjbGllbnQ7XG4gICAgcmV0dXJuIGNsaWVudDtcbiAgfVxuXG4gIF9jcmVhdGVBd3NDbGllbnQob3B0aW9ucykge1xuICAgIHZhciByZWdpb24gPSBvcHRpb25zLnJlZ2lvbjtcbiAgICB2YXIgZW5kcG9pbnRPdmVycmlkZSA9IEdsb2JhbENvbmZpZy5nZXRFbmRwb2ludE92ZXJyaWRlKCk7XG4gICAgdmFyIHN0YWdlQ29uZmlnID0gUkVHSU9OX0NPTkZJR1tyZWdpb25dO1xuICAgIGlmIChlbmRwb2ludE92ZXJyaWRlKSB7XG4gICAgICBzdGFnZUNvbmZpZy5pbnZva2VVcmwgPSBlbmRwb2ludE92ZXJyaWRlO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFXU0NoYXRDbGllbnQoe1xuICAgICAgZW5kcG9pbnQ6IHN0YWdlQ29uZmlnLmludm9rZVVybCxcbiAgICAgIHJlZ2lvbjogcmVnaW9uXG4gICAgfSk7XG4gIH1cbn1cblxuLyplc2xpbnQtZGlzYWJsZSovXG5jbGFzcyBDaGF0Q2xpZW50IHtcbiAgc2VuZE1lc3NhZ2UocGFydGljaXBhbnRUb2tlbiwgbWVzc2FnZSwgdHlwZSkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwic2VuZFRleHRNZXNzYWdlIGluIENoYXRDbGllbnRcIik7XG4gIH1cblxuICBkaXNjb25uZWN0UGFydGljaXBhbnQocGFydGljaXBhbnRUb2tlbikge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwiZGlzY29ubmVjdFBhcnRpY2lwYW50IGluIENoYXRDbGllbnRcIik7XG4gIH1cblxuICBzZW5kRXZlbnQoY29ubmVjdGlvblRva2VuLCBjb250ZW50VHlwZSwgY29udGVudCkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwic2VuZEV2ZW50IGluIENoYXRDbGllbnRcIik7XG4gIH1cblxuICBjcmVhdGVQYXJ0aWNpcGFudENvbm5lY3Rpb24ocGFydGljaXBhbnRUb2tlbiwgdHlwZSkge1xuICAgIHRocm93IG5ldyBVbkltcGxlbWVudGVkTWV0aG9kRXhjZXB0aW9uKFwiY3JlYXRlUGFydGljaXBhbnRDb25uZWN0aW9uIGluIENoYXRDbGllbnRcIik7XG4gIH1cbn1cbi8qZXNsaW50LWVuYWJsZSovXG5cbmNsYXNzIEFXU0NoYXRDbGllbnQgZXh0ZW5kcyBDaGF0Q2xpZW50IHtcbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHN1cGVyKCk7XG4gICAgdmFyIGNyZWRzID0gbmV3IEFXUy5DcmVkZW50aWFscygnJywnJyk7XG4gICAgdmFyIGNvbmZpZyA9IG5ldyBBV1MuQ29uZmlnKHtcbiAgICAgIHJlZ2lvbjogYXJncy5yZWdpb24sXG4gICAgICBlbmRwb2ludDogYXJncy5lbmRwb2ludCxcbiAgICAgIGNyZWRlbnRpYWxzOiBjcmVkc1xuICAgIH0pO1xuICAgIHRoaXMuY2hhdENsaWVudCA9IG5ldyBBV1MuQ29ubmVjdFBhcnRpY2lwYW50KGNvbmZpZyk7XG4gICAgdGhpcy5pbnZva2VVcmwgPSBhcmdzLmVuZHBvaW50O1xuICAgIHRoaXMubG9nZ2VyID0gTG9nTWFuYWdlci5nZXRMb2dnZXIoeyBwcmVmaXg6IFwiQ2hhdENsaWVudFwiIH0pO1xuICB9XG5cbiAgY3JlYXRlUGFydGljaXBhbnRDb25uZWN0aW9uKHBhcnRpY2lwYW50VG9rZW4sIHR5cGUpIHtcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBUeXBlOiB0eXBlLFxuICAgICAgICBQYXJ0aWNpcGFudFRva2VuOiBwYXJ0aWNpcGFudFRva2VuXG4gICAgICB9O1xuICAgICAgdmFyIGNyZWF0ZVBhcnRpY2lwYW50Q29ubmVjdGlvblJlcXVlc3QgPSBzZWxmLmNoYXRDbGllbnQuY3JlYXRlUGFydGljaXBhbnRDb25uZWN0aW9uKFxuICAgICAgICBwYXJhbXNcbiAgICAgICk7XG4gICAgICByZXR1cm4gc2VsZi5fc2VuZFJlcXVlc3QoY3JlYXRlUGFydGljaXBhbnRDb25uZWN0aW9uUmVxdWVzdCkudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHNlbGYubG9nZ2VyLmluZm8oXCJzdWNjZXNzZnVsbHkgY3JlYXRlIGNvbm5lY3Rpb24gcmVxdWVzdFwiKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgc2VsZi5sb2dnZXIuZXJyb3IoXCJlcnJvciB3aGVuIGNyZWF0aW5nIGNvbm5lY3Rpb24gcmVxdWVzdFwiKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGRpc2Nvbm5lY3RQYXJ0aWNpcGFudChjb25uZWN0aW9uVG9rZW4pIHtcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICBDb25uZWN0aW9uVG9rZW46IGNvbm5lY3Rpb25Ub2tlblxuICAgICAgfTtcblxuICAgICAgdmFyIGRpc2Nvbm5lY3RQYXJ0aWNpcGFudFJlcXVlc3QgPSBzZWxmLmNoYXRDbGllbnQuZGlzY29ubmVjdFBhcnRpY2lwYW50KFxuICAgICAgICBwYXJhbXNcbiAgICAgICk7XG4gICAgICByZXR1cm4gc2VsZi5fc2VuZFJlcXVlc3QoZGlzY29ubmVjdFBhcnRpY2lwYW50UmVxdWVzdCkudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHNlbGYubG9nZ2VyLmluZm8oXCJzdWNjZXNzZnVsbHkgZGlzY29ubmVjdCBwYXJ0aWNpcGFudFwiKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgc2VsZi5sb2dnZXIuZXJyb3IoXCJlcnJvciB3aGVuIGRpc2Nvbm5lY3RpbmcgcGFydGljaXBhbnRcIik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBnZXRUcmFuc2NyaXB0KGNvbm5lY3Rpb25Ub2tlbiwgYXJncykge1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICB2YXIgcGFyYW1zID0ge1xuICAgIE1heFJlc3VsdHM6IGFyZ3MubWF4UmVzdWx0cyxcbiAgICBOZXh0VG9rZW46IGFyZ3MubmV4dFRva2VuLFxuICAgIFNjYW5EaXJlY3Rpb246IGFyZ3Muc2NhbkRpcmVjdGlvbixcbiAgICBTb3J0T3JkZXI6IGFyZ3Muc29ydE9yZGVyLFxuICAgIFN0YXJ0UG9zaXRpb246IHtcbiAgICAgIElkOiBhcmdzLnN0YXJ0UG9zaXRpb24uaWQsXG4gICAgICBBYnNvbHV0ZVRpbWU6IGFyZ3Muc3RhcnRQb3NpdGlvbi5hYnNvbHV0ZVRpbWUsXG4gICAgICBNb3N0UmVjZW50OiBhcmdzLnN0YXJ0UG9zaXRpb24ubW9zdFJlY2VudFxuICAgIH0sXG4gICAgQ29ubmVjdGlvblRva2VuOiBjb25uZWN0aW9uVG9rZW5cbiAgICB9O1xuICAgIGlmIChhcmdzLmNvbnRhY3RJZCkge1xuICAgICAgcGFyYW1zLkNvbnRhY3RJZCA9IGFyZ3MuY29udGFjdElkO1xuICAgIH1cbiAgICB2YXIgZ2V0VHJhbnNjcmlwdFJlcXVlc3QgPSBzZWxmLmNoYXRDbGllbnQuZ2V0VHJhbnNjcmlwdChwYXJhbXMpO1xuICAgIHJldHVybiBzZWxmLl9zZW5kUmVxdWVzdChnZXRUcmFuc2NyaXB0UmVxdWVzdCkudGhlbigocmVzKSA9PiB7XG4gICAgICBzZWxmLmxvZ2dlci5pbmZvKFwic3VjY2Vzc2Z1bGx5IGdldCB0cmFuc2NyaXB0XCIpO1xuICAgICAgcmV0dXJuIHJlcztcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBzZWxmLmxvZ2dlci5lcnJvcihcImVycm9yIHdoZW4gZ2V0dGluZyB0cmFuc2NyaXB0XCIpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgfSk7XG4gIH1cblxuICBzZW5kTWVzc2FnZShjb25uZWN0aW9uVG9rZW4sIGNvbnRlbnQsIGNvbnRlbnRUeXBlKSB7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgQ29udGVudDogY29udGVudCxcbiAgICAgICAgQ29udGVudFR5cGU6IGNvbnRlbnRUeXBlLFxuICAgICAgICBDb25uZWN0aW9uVG9rZW46IGNvbm5lY3Rpb25Ub2tlblxuICAgICAgfTtcbiAgICAgIHZhciBzZW5kTWVzc2FnZVJlcXVlc3QgPSBzZWxmLmNoYXRDbGllbnQuc2VuZE1lc3NhZ2UocGFyYW1zKTtcbiAgICAgIHJldHVybiBzZWxmLl9zZW5kUmVxdWVzdChzZW5kTWVzc2FnZVJlcXVlc3QpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBzZWxmLmxvZ2dlci5pbmZvKFwic3VjY2Vzc2Z1bGx5IHNlbmQgbWVzc2FnZVwiKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0pLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgc2VsZi5sb2dnZXIuZXJyb3IoXCJlcnJvciB3aGVuIHNlbmRpbmcgbWVzc2FnZVwiKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIHNlbmRFdmVudChjb25uZWN0aW9uVG9rZW4sIGNvbnRlbnRUeXBlLCBjb250ZW50KSB7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgdmFyIHBhcmFtcyA9IHtcbiAgICAgICAgQ29ubmVjdGlvblRva2VuOiBjb25uZWN0aW9uVG9rZW4sXG4gICAgICAgIENvbnRlbnRUeXBlOiBjb250ZW50VHlwZSxcbiAgICAgICAgQ29udGVudDogY29udGVudFxuICAgICAgfTtcbiAgICAgIHZhciBzZW5kRXZlbnRSZXF1ZXN0ID0gc2VsZi5jaGF0Q2xpZW50LnNlbmRFdmVudChwYXJhbXMpO1xuICAgICAgcmV0dXJuIHNlbGYuX3NlbmRSZXF1ZXN0KHNlbmRFdmVudFJlcXVlc3QpLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBzZWxmLmxvZ2dlci5pbmZvKFwic3VjY2Vzc2Z1bGx5IHNlbmQgZXZlbnRcIik7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIHNlbGYubG9nZ2VyLmVycm9yKFwiZXJyb3Igd2hlbiBzZW5kaW5nIGV2ZW50XCIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgX3NlbmRSZXF1ZXN0KHJlcXVlc3QpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgcmVxdWVzdFxuICAgICAgICAub24oXCJzdWNjZXNzXCIsIGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKFwiZXJyb3JcIiwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgY29uc3QgZXJyT2JqID0ge1xuICAgICAgICAgICAgdHlwZTogZXJyLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICAgICAgICAgIHN0YWNrOiBlcnIuc3RhY2sgPyBlcnIuc3RhY2suc3BsaXQoJ1xcbicpIDogW10sXG4gICAgICAgICAgfVxuICAgICAgICAgIHJlamVjdChlcnJPYmopO1xuICAgICAgICB9KVxuICAgICAgICAuc2VuZCgpO1xuICAgIH0pO1xuICB9XG59XG5cbnZhciBDaGF0Q2xpZW50RmFjdG9yeSA9IG5ldyBDaGF0Q2xpZW50RmFjdG9yeUltcGwoKTtcbmV4cG9ydCB7IENoYXRDbGllbnRGYWN0b3J5IH07XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgeyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gfSBmcm9tIFwiLi9leGNlcHRpb25zXCI7XG5pbXBvcnQgeyBDT05URU5UX1RZUEUgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbmNsYXNzIENoYXRDb250cm9sbGVyQXJnc1ZhbGlkYXRvciB7XG4gIC8qZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMqL1xuICB2YWxpZGF0ZU5ld0NvbnRyb2xsZXJEZXRhaWxzKGNoYXREZXRhaWxzKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyplc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzKi9cblxuICB2YWxpZGF0ZVNlbmRNZXNzYWdlKGFyZ3MpIHtcbiAgICBpZiAoIVV0aWxzLmlzU3RyaW5nKGFyZ3MubWVzc2FnZSkpIHtcbiAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oYXJncy5tZXNzYWdlICsgXCJpcyBub3QgYSB2YWxpZCBtZXNzYWdlXCIpO1xuICAgIH1cbiAgICB0aGlzLnZhbGlkYXRlQ29udGVudFR5cGUoYXJncy5jb250ZW50VHlwZSk7XG4gIH1cblxuICB2YWxpZGF0ZUNvbnRlbnRUeXBlKGNvbnRlbnRUeXBlKSB7XG4gICAgVXRpbHMuYXNzZXJ0SXNFbnVtKGNvbnRlbnRUeXBlLCBPYmplY3QudmFsdWVzKENPTlRFTlRfVFlQRSksIFwiY29udGVudFR5cGVcIik7IFxuICB9XG5cbiAgLyplc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyovXG4gIHZhbGlkYXRlQ29ubmVjdENoYXQoYXJncykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qZXNsaW50LWVuYWJsZSBuby11bnVzZWQtdmFycyovXG5cbiAgdmFsaWRhdGVMb2dnZXIobG9nZ2VyKSB7XG4gICAgVXRpbHMuYXNzZXJ0SXNPYmplY3QobG9nZ2VyLCBcImxvZ2dlclwiKTtcbiAgICBbXCJkZWJ1Z1wiLCBcImluZm9cIiwgXCJ3YXJuXCIsIFwiZXJyb3JcIl0uZm9yRWFjaChtZXRob2ROYW1lID0+IHtcbiAgICAgIGlmICghVXRpbHMuaXNGdW5jdGlvbihsb2dnZXJbbWV0aG9kTmFtZV0pKSB7XG4gICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXG4gICAgICAgICAgbWV0aG9kTmFtZSArXG4gICAgICAgICAgICBcIiBzaG91bGQgYmUgYSB2YWxpZCBmdW5jdGlvbiBvbiB0aGUgcGFzc2VkIGxvZ2dlciBvYmplY3QhXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHZhbGlkYXRlU2VuZEV2ZW50KGFyZ3MpIHtcbiAgICB0aGlzLnZhbGlkYXRlQ29udGVudFR5cGUoYXJncy5jb250ZW50VHlwZSk7XG4gIH1cblxuICAvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzKi9cbiAgdmFsaWRhdGVHZXRNZXNzYWdlcyhhcmdzKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgLyplc2xpbnQtZW5hYmxlIG5vLXVudXNlZC12YXJzKi9cbn1cblxuY2xhc3MgQ2hhdFNlcnZpY2VBcmdzVmFsaWRhdG9yIGV4dGVuZHMgQ2hhdENvbnRyb2xsZXJBcmdzVmFsaWRhdG9yIHtcbiAgdmFsaWRhdGVDaGF0RGV0YWlscyhjaGF0RGV0YWlscykge1xuICAgIFV0aWxzLmFzc2VydElzT2JqZWN0KGNoYXREZXRhaWxzLCBcImNoYXREZXRhaWxzXCIpO1xuICAgIFxuICAgIFV0aWxzLmFzc2VydElzTm9uRW1wdHlTdHJpbmcoXG4gICAgICBjaGF0RGV0YWlscy5jb250YWN0SWQsXG4gICAgICBcImNoYXREZXRhaWxzLmNvbnRhY3RJZFwiXG4gICAgKTtcbiAgICBVdGlscy5hc3NlcnRJc05vbkVtcHR5U3RyaW5nKFxuICAgICAgY2hhdERldGFpbHMucGFydGljaXBhbnRJZCxcbiAgICAgIFwiY2hhdERldGFpbHMucGFydGljaXBhbnRJZFwiXG4gICAgKTtcbiAgICBpZiAoY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHMpIHtcbiAgICAgIFV0aWxzLmFzc2VydElzT2JqZWN0KFxuICAgICAgICBjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscyxcbiAgICAgICAgXCJjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlsc1wiXG4gICAgICApO1xuICAgICAgVXRpbHMuYXNzZXJ0SXNOb25FbXB0eVN0cmluZyhcbiAgICAgICAgY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHMuUHJlU2lnbmVkQ29ubmVjdGlvblVybCxcbiAgICAgICAgXCJjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscy5QcmVTaWduZWRDb25uZWN0aW9uVXJsXCJcbiAgICAgICk7XG4gICAgICBVdGlscy5hc3NlcnRJc05vbkVtcHR5U3RyaW5nKFxuICAgICAgICBjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscy5Db25uZWN0aW9uSWQsXG4gICAgICAgIFwiY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHMuQ29ubmVjdGlvbklkXCJcbiAgICAgICk7XG4gICAgICBVdGlscy5hc3NlcnRJc05vbkVtcHR5U3RyaW5nKFxuICAgICAgICBjaGF0RGV0YWlscy5jb25uZWN0aW9uRGV0YWlscy5jb25uZWN0aW9uVG9rZW4sXG4gICAgICAgIFwiY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHMuY29ubmVjdGlvblRva2VuXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChjaGF0RGV0YWlscy5wYXJ0aWNpcGFudFRva2VuKXtcbiAgICAgIFV0aWxzLmFzc2VydElzTm9uRW1wdHlTdHJpbmcoXG4gICAgICAgIGNoYXREZXRhaWxzLnBhcnRpY2lwYW50VG9rZW4sXG4gICAgICAgIFwiY2hhdERldGFpbHMucGFydGljaXBhbnRUb2tlblwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHZhbGlkYXRlSW5pdGlhdGVDaGF0UmVzcG9uc2UoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBub3JtYWxpemVDaGF0RGV0YWlscyhjaGF0RGV0YWlsc0lucHV0KSB7XG4gICAgbGV0IGNoYXREZXRhaWxzID0ge307XG4gICAgY2hhdERldGFpbHMuY29udGFjdElkID0gY2hhdERldGFpbHNJbnB1dC5Db250YWN0SWQgfHwgY2hhdERldGFpbHNJbnB1dC5jb250YWN0SWQ7XG4gICAgY2hhdERldGFpbHMucGFydGljaXBhbnRJZCA9IGNoYXREZXRhaWxzSW5wdXQuUGFydGljaXBhbnRJZCB8fCBjaGF0RGV0YWlsc0lucHV0LnBhcnRpY2lwYW50SWQ7XG4gICAgY2hhdERldGFpbHMuaW5pdGlhbENvbnRhY3RJZCA9IGNoYXREZXRhaWxzSW5wdXQuSW5pdGlhbENvbnRhY3RJZCB8fCBjaGF0RGV0YWlsc0lucHV0LmluaXRpYWxDb250YWN0SWRcbiAgICB8fCBjaGF0RGV0YWlscy5jb250YWN0SWQgfHwgY2hhdERldGFpbHMuQ29udGFjdElkO1xuICAgIGlmIChjaGF0RGV0YWlsc0lucHV0LnBhcnRpY2lwYW50VG9rZW4gfHwgY2hhdERldGFpbHNJbnB1dC5QYXJ0aWNpcGFudFRva2VuKSB7XG4gICAgICBjaGF0RGV0YWlscy5wYXJ0aWNpcGFudFRva2VuID0gY2hhdERldGFpbHNJbnB1dC5QYXJ0aWNpcGFudFRva2VuIHx8IGNoYXREZXRhaWxzSW5wdXQucGFydGljaXBhbnRUb2tlbjtcbiAgICAgIHRoaXMudmFsaWRhdGVDaGF0RGV0YWlscyhjaGF0RGV0YWlscyk7XG4gICAgICByZXR1cm4gY2hhdERldGFpbHM7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGNoYXREZXRhaWxzSW5wdXQuQ2hhdENvbm5lY3Rpb25BdHRyaWJ1dGVzICYmXG4gICAgICBjaGF0RGV0YWlsc0lucHV0LkNoYXRDb25uZWN0aW9uQXR0cmlidXRlcy5QYXJ0aWNpcGFudENyZWRlbnRpYWxzXG4gICAgKSB7XG4gICAgICB0aGlzLnZhbGlkYXRlSW5pdGlhdGVDaGF0UmVzcG9uc2UoY2hhdERldGFpbHNJbnB1dCk7XG4gICAgICB2YXIgY29ubmVjdGlvbkRldGFpbHMgPSB7fTtcbiAgICAgIGNvbm5lY3Rpb25EZXRhaWxzLmNvbm5lY3Rpb25Ub2tlbiA9XG4gICAgICAgIGNoYXREZXRhaWxzSW5wdXQuQ2hhdENvbm5lY3Rpb25BdHRyaWJ1dGVzLlBhcnRpY2lwYW50Q3JlZGVudGlhbHMuQ29ubmVjdGlvbkF1dGhlbnRpY2F0aW9uVG9rZW47XG4gICAgICBjb25uZWN0aW9uRGV0YWlscy5Db25uZWN0aW9uSWQgPVxuICAgICAgICBjaGF0RGV0YWlsc0lucHV0LkNoYXRDb25uZWN0aW9uQXR0cmlidXRlcy5Db25uZWN0aW9uSWQ7XG4gICAgICBjb25uZWN0aW9uRGV0YWlscy5QcmVTaWduZWRDb25uZWN0aW9uVXJsID1cbiAgICAgICAgY2hhdERldGFpbHNJbnB1dC5DaGF0Q29ubmVjdGlvbkF0dHJpYnV0ZXMuUHJlU2lnbmVkQ29ubmVjdGlvblVybDtcbiAgICAgIGNoYXREZXRhaWxzLmNvbm5lY3Rpb25EZXRhaWxzID0gY29ubmVjdGlvbkRldGFpbHM7XG4gICAgICByZXR1cm4gY2hhdERldGFpbHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudmFsaWRhdGVDaGF0RGV0YWlscyhjaGF0RGV0YWlscyk7XG4gICAgICByZXR1cm4gY2hhdERldGFpbHM7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IENoYXRTZXJ2aWNlQXJnc1ZhbGlkYXRvciB9O1xuIiwiaW1wb3J0IHsgQ09OTkVDVElPTl9UT0tFTl9QT0xMSU5HX0lOVEVSVkFMX0lOX01TLCBDT05ORUNUSU9OX1RPS0VOX0VYUElSWV9CVUZGRVJfSU5fTVMgfSBmcm9tIFwiLi4vLi4vY29uc3RhbnRzXCI7XG5cbmNvbnN0IENvbm5lY3Rpb25IZWxwZXJTdGF0dXMgPSB7XG4gIE5ldmVyU3RhcnRlZDogXCJOZXZlclN0YXJ0ZWRcIixcbiAgU3RhcnRpbmc6IFwiU3RhcnRpbmdcIixcbiAgQ29ubmVjdGVkOiBcIkNvbm5lY3RlZFwiLFxuICBDb25uZWN0aW9uTG9zdDogXCJDb25uZWN0aW9uTG9zdFwiLFxuICBFbmRlZDogXCJFbmRlZFwiXG59O1xuXG5jb25zdCBDb25uZWN0aW9uSGVscGVyRXZlbnRzID0ge1xuICBDb25uZWN0aW9uTG9zdDogXCJDb25uZWN0aW9uTG9zdFwiLCAvLyBldmVudCBkYXRhIGlzOiB7cmVhc29uOiAuLi59XG4gIENvbm5lY3Rpb25HYWluZWQ6IFwiQ29ubmVjdGlvbkdhaW5lZFwiLCAvLyBldmVudCBkYXRhIGlzOiB7cmVhc29uOiAuLi59XG4gIEVuZGVkOiBcIkVuZGVkXCIsIC8vIGV2ZW50IGRhdGEgaXM6IHtyZWFzb246IC4uLn1cbiAgSW5jb21pbmdNZXNzYWdlOiBcIkluY29taW5nTWVzc2FnZVwiIC8vIGV2ZW50IGRhdGEgaXM6IHtwYXlsb2FkU3RyaW5nOiAuLi59XG59O1xuXG5jb25zdCBDb25uZWN0aW9uSW5mb1R5cGUgPSB7XG4gIFdFQlNPQ0tFVDogXCJXRUJTT0NLRVRcIixcbiAgQ09OTkVDVElPTl9DUkVERU5USUFMUzogXCJDT05ORUNUSU9OX0NSRURFTlRJQUxTXCJcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VDb25uZWN0aW9uSGVscGVyIHtcbiAgY29uc3RydWN0b3IoY29ubmVjdGlvbkRldGFpbHNQcm92aWRlcikge1xuICAgIHRoaXMuY29ubmVjdGlvbkRldGFpbHNQcm92aWRlciA9IGNvbm5lY3Rpb25EZXRhaWxzUHJvdmlkZXI7XG4gICAgdGhpcy5pc1N0YXJ0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHN0YXJ0Q29ubmVjdGlvblRva2VuUG9sbGluZyhpc0ZpcnN0Q2FsbD1mYWxzZSwgZXhwaXJ5PUNPTk5FQ1RJT05fVE9LRU5fUE9MTElOR19JTlRFUlZBTF9JTl9NUykge1xuICAgIGlmICghaXNGaXJzdENhbGwpe1xuICAgICAgdGhpcy5jb25uZWN0aW9uRGV0YWlsc1Byb3ZpZGVyLmZldGNoQ29ubmVjdGlvblRva2VuKClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGVFeHBpcnkgPSB0aGlzLmdldENvbm5lY3Rpb25Ub2tlbkV4cGlyeSgpO1xuICAgICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgIGV4cGlyeSA9IGRhdGVFeHBpcnkgLSBub3cgLSBDT05ORUNUSU9OX1RPS0VOX0VYUElSWV9CVUZGRVJfSU5fTVM7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLnRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMuc3RhcnRDb25uZWN0aW9uVG9rZW5Qb2xsaW5nLmJpbmQodGhpcyksIGV4cGlyeSk7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5pc1N0YXJ0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pc1N0YXJ0ZWQgPSB0cnVlO1xuICAgIHRoaXMuc3RhcnRDb25uZWN0aW9uVG9rZW5Qb2xsaW5nKFxuICAgICAgdHJ1ZSwgXG4gICAgICB0aGlzLmdldENvbm5lY3Rpb25Ub2tlbkV4cGlyeSgpXG4gICAgKTtcbiAgfVxuXG4gIGVuZCgpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgfVxuXG4gIGdldENvbm5lY3Rpb25Ub2tlbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uRGV0YWlsc1Byb3ZpZGVyLmdldENvbm5lY3Rpb25Ub2tlbigpO1xuICB9XG4gIGdldENvbm5lY3Rpb25Ub2tlbkV4cGlyeSgpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoXG4gICAgICB0aGlzLmNvbm5lY3Rpb25EZXRhaWxzUHJvdmlkZXIuZ2V0Q29ubmVjdGlvblRva2VuRXhwaXJ5KClcbiAgICApLmdldFRpbWUoKTtcbiAgfVxufVxuXG5leHBvcnQge1xuICBDb25uZWN0aW9uSGVscGVyU3RhdHVzLFxuICBDb25uZWN0aW9uSGVscGVyRXZlbnRzLFxuICBDb25uZWN0aW9uSW5mb1R5cGVcbn07XG4iLCJpbXBvcnQgVXRpbHMgZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmNvbnN0IEFMTF9FVkVOVFMgPSBcIjw8YWxsPj5cIjtcblxuLyoqXG4gKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGV2ZW50IHN1YnNjcmlwdGlvbiBpbiBhbiBFdmVudEJ1cy5cbiAqL1xudmFyIFN1YnNjcmlwdGlvbiA9IGZ1bmN0aW9uKHN1Yk1hcCwgZXZlbnROYW1lLCBmKSB7XG4gIHRoaXMuc3ViTWFwID0gc3ViTWFwO1xuICB0aGlzLmlkID0gVXRpbHMucmFuZG9tSWQoKTtcbiAgdGhpcy5ldmVudE5hbWUgPSBldmVudE5hbWU7XG4gIHRoaXMuZiA9IGY7XG59O1xuXG4vKipcbiAqIFVuc3Vic2NyaWJlIHRoZSBoYW5kbGVyIG9mIHRoaXMgc3Vic2NyaXB0aW9uIGZyb20gdGhlIEV2ZW50QnVzXG4gKiBmcm9tIHdoaWNoIGl0IHdhcyBjcmVhdGVkLlxuICovXG5TdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuc3ViTWFwLnVuc3Vic2NyaWJlKHRoaXMuZXZlbnROYW1lLCB0aGlzLmlkKTtcbn07XG5cbi8qKlxuICogQSBtYXAgb2YgZXZlbnQgc3Vic2NyaXB0aW9ucywgdXNlZCBieSB0aGUgRXZlbnRCdXMuXG4gKi9cbnZhciBTdWJzY3JpcHRpb25NYXAgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zdWJJZE1hcCA9IHt9O1xuICB0aGlzLnN1YkV2ZW50TmFtZU1hcCA9IHt9O1xufTtcblxuLyoqXG4gKiBBZGQgYSBzdWJzY3JpcHRpb24gZm9yIHRoZSBuYW1lZCBldmVudC4gIENyZWF0ZXMgYSBuZXcgU3Vic2NyaXB0aW9uXG4gKiBvYmplY3QgYW5kIHJldHVybnMgaXQuICBUaGlzIG9iamVjdCBjYW4gYmUgdXNlZCB0byB1bnN1YnNjcmliZS5cbiAqL1xuU3Vic2NyaXB0aW9uTWFwLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbihldmVudE5hbWUsIGYpIHtcbiAgdmFyIHN1YiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcywgZXZlbnROYW1lLCBmKTtcblxuICB0aGlzLnN1YklkTWFwW3N1Yi5pZF0gPSBzdWI7XG4gIHZhciBzdWJMaXN0ID0gdGhpcy5zdWJFdmVudE5hbWVNYXBbZXZlbnROYW1lXSB8fCBbXTtcbiAgc3ViTGlzdC5wdXNoKHN1Yik7XG4gIHRoaXMuc3ViRXZlbnROYW1lTWFwW2V2ZW50TmFtZV0gPSBzdWJMaXN0O1xuICByZXR1cm4gKCkgPT4gc3ViLnVuc3Vic2NyaWJlKCk7XG59O1xuXG4vKipcbiAqIFVuc3Vic2NyaWJlIGEgc3Vic2NyaXB0aW9uIG1hdGNoaW5nIHRoZSBnaXZlbiBldmVudCBuYW1lIGFuZCBpZC5cbiAqL1xuU3Vic2NyaXB0aW9uTWFwLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgc3ViSWQpIHtcbiAgaWYgKFV0aWxzLmNvbnRhaW5zKHRoaXMuc3ViRXZlbnROYW1lTWFwLCBldmVudE5hbWUpKSB7XG4gICAgdGhpcy5zdWJFdmVudE5hbWVNYXBbZXZlbnROYW1lXSA9IHRoaXMuc3ViRXZlbnROYW1lTWFwW2V2ZW50TmFtZV0uZmlsdGVyKFxuICAgICAgZnVuY3Rpb24ocykge1xuICAgICAgICByZXR1cm4gcy5pZCAhPT0gc3ViSWQ7XG4gICAgICB9XG4gICAgKTtcblxuICAgIGlmICh0aGlzLnN1YkV2ZW50TmFtZU1hcFtldmVudE5hbWVdLmxlbmd0aCA8IDEpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnN1YkV2ZW50TmFtZU1hcFtldmVudE5hbWVdO1xuICAgIH1cbiAgfVxuXG4gIGlmIChVdGlscy5jb250YWlucyh0aGlzLnN1YklkTWFwLCBzdWJJZCkpIHtcbiAgICBkZWxldGUgdGhpcy5zdWJJZE1hcFtzdWJJZF07XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGEgbGlzdCBvZiBhbGwgc3Vic2NyaXB0aW9ucyBpbiB0aGUgc3Vic2NyaXB0aW9uIG1hcC5cbiAqL1xuU3Vic2NyaXB0aW9uTWFwLnByb3RvdHlwZS5nZXRBbGxTdWJzY3JpcHRpb25zID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBVdGlscy52YWx1ZXModGhpcy5zdWJFdmVudE5hbWVNYXApLnJlZHVjZShmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGEuY29uY2F0KGIpO1xuICB9LCBbXSk7XG59O1xuXG4vKipcbiAqIEdldCBhIGxpc3Qgb2Ygc3Vic2NyaXB0aW9ucyBmb3IgdGhlIGdpdmVuIGV2ZW50IG5hbWUsIG9yIGFuIGVtcHR5XG4gKiBsaXN0IGlmIHRoZXJlIGFyZSBubyBzdWJzY3JpcHRpb25zLlxuICovXG5TdWJzY3JpcHRpb25NYXAucHJvdG90eXBlLmdldFN1YnNjcmlwdGlvbnMgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgcmV0dXJuIHRoaXMuc3ViRXZlbnROYW1lTWFwW2V2ZW50TmFtZV0gfHwgW107XG59O1xuXG4vKipcbiAqIEFuIG9iamVjdCB3aGljaCBtYWludGFpbnMgYSBtYXAgb2Ygc3Vic2NyaXB0aW9ucyBhbmQgc2VydmVzIGFzIHRoZVxuICogbWVjaGFuaXNtIGZvciB0cmlnZ2VyaW5nIGV2ZW50cyB0byBiZSBoYW5kbGVkIGJ5IHN1YnNjcmliZXJzLlxuICovXG52YXIgRXZlbnRCdXMgPSBmdW5jdGlvbihwYXJhbXNJbikge1xuICB2YXIgcGFyYW1zID0gcGFyYW1zSW4gfHwge307XG5cbiAgdGhpcy5zdWJNYXAgPSBuZXcgU3Vic2NyaXB0aW9uTWFwKCk7XG4gIHRoaXMubG9nRXZlbnRzID0gcGFyYW1zLmxvZ0V2ZW50cyB8fCBmYWxzZTtcbn07XG5cbi8qKlxuICogU3Vic2NyaWJlIHRvIHRoZSBuYW1lZCBldmVudC4gIFJldHVybnMgYSBuZXcgU3Vic2NyaXB0aW9uIG9iamVjdFxuICogd2hpY2ggY2FuIGJlIHVzZWQgdG8gdW5zdWJzY3JpYmUuXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbihldmVudE5hbWUsIGYpIHtcbiAgVXRpbHMuYXNzZXJ0Tm90TnVsbChldmVudE5hbWUsIFwiZXZlbnROYW1lXCIpO1xuICBVdGlscy5hc3NlcnROb3ROdWxsKGYsIFwiZlwiKTtcbiAgVXRpbHMuYXNzZXJ0VHJ1ZShVdGlscy5pc0Z1bmN0aW9uKGYpLCBcImYgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICByZXR1cm4gdGhpcy5zdWJNYXAuc3Vic2NyaWJlKGV2ZW50TmFtZSwgZik7XG59O1xuXG4vKipcbiAqIFN1YnNjcmliZSBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhbGwgZXZlbnRzLlxuICovXG5FdmVudEJ1cy5wcm90b3R5cGUuc3Vic2NyaWJlQWxsID0gZnVuY3Rpb24oZikge1xuICBVdGlscy5hc3NlcnROb3ROdWxsKGYsIFwiZlwiKTtcbiAgVXRpbHMuYXNzZXJ0VHJ1ZShVdGlscy5pc0Z1bmN0aW9uKGYpLCBcImYgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICByZXR1cm4gdGhpcy5zdWJNYXAuc3Vic2NyaWJlKEFMTF9FVkVOVFMsIGYpO1xufTtcblxuLyoqXG4gKiBHZXQgYSBsaXN0IG9mIHN1YnNjcmlwdGlvbnMgZm9yIHRoZSBnaXZlbiBldmVudCBuYW1lLCBvciBhbiBlbXB0eVxuICogbGlzdCBpZiB0aGVyZSBhcmUgbm8gc3Vic2NyaXB0aW9ucy5cbiAqL1xuRXZlbnRCdXMucHJvdG90eXBlLmdldFN1YnNjcmlwdGlvbnMgPSBmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgcmV0dXJuIHRoaXMuc3ViTWFwLmdldFN1YnNjcmlwdGlvbnMoZXZlbnROYW1lKTtcbn07XG5cbi8qKlxuICogVHJpZ2dlciB0aGUgZ2l2ZW4gZXZlbnQgd2l0aCB0aGUgZ2l2ZW4gZGF0YS4gIEFsbCBtZXRob2RzIHN1YnNjcmliZWRcbiAqIHRvIHRoaXMgZXZlbnQgd2lsbCBiZSBjYWxsZWQgYW5kIGFyZSBwcm92aWRlZCB3aXRoIHRoZSBnaXZlbiBhcmJpdHJhcnlcbiAqIGRhdGEgb2JqZWN0IGFuZCB0aGUgbmFtZSBvZiB0aGUgZXZlbnQsIGluIHRoYXQgb3JkZXIuXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oZXZlbnROYW1lLCBkYXRhKSB7XG4gIFV0aWxzLmFzc2VydE5vdE51bGwoZXZlbnROYW1lLCBcImV2ZW50TmFtZVwiKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgYWxsRXZlbnRTdWJzID0gdGhpcy5zdWJNYXAuZ2V0U3Vic2NyaXB0aW9ucyhBTExfRVZFTlRTKTtcbiAgdmFyIGV2ZW50U3VicyA9IHRoaXMuc3ViTWFwLmdldFN1YnNjcmlwdGlvbnMoZXZlbnROYW1lKTtcblxuICAvLyBpZiAodGhpcy5sb2dFdmVudHMgJiYgKGV2ZW50TmFtZSAhPT0gY29ubmVjdC5FdmVudFR5cGUuTE9HICYmIGV2ZW50TmFtZSAhPT0gY29ubmVjdC5FdmVudFR5cGUuTUFTVEVSX1JFU1BPTlNFICYmIGV2ZW50TmFtZSAhPT0gY29ubmVjdC5FdmVudFR5cGUuQVBJX01FVFJJQykpIHtcbiAgLy8gICAgY29ubmVjdC5nZXRMb2coKS50cmFjZShcIlB1Ymxpc2hpbmcgZXZlbnQ6ICVzXCIsIGV2ZW50TmFtZSk7XG4gIC8vIH1cblxuICBhbGxFdmVudFN1YnMuY29uY2F0KGV2ZW50U3VicykuZm9yRWFjaChmdW5jdGlvbihzdWIpIHtcbiAgICB0cnkge1xuICAgICAgc3ViLmYoZGF0YSB8fCBudWxsLCBldmVudE5hbWUsIHNlbGYpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vICAgY29ubmVjdFxuICAgICAgLy8gICAgIC5nZXRMb2coKVxuICAgICAgLy8gICAgIC5lcnJvcihcIiclcycgZXZlbnQgaGFuZGxlciBmYWlsZWQuXCIsIGV2ZW50TmFtZSlcbiAgICAgIC8vICAgICAud2l0aEV4Y2VwdGlvbihlKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBUcmlnZ2VyIHRoZSBnaXZlbiBldmVudCB3aXRoIHRoZSBnaXZlbiBkYXRhLiAgQWxsIG1ldGhvZHMgc3Vic2NyaWJlZFxuICogdG8gdGhpcyBldmVudCB3aWxsIGJlIGNhbGxlZCBhbmQgYXJlIHByb3ZpZGVkIHdpdGggdGhlIGdpdmVuIGFyYml0cmFyeVxuICogZGF0YSBvYmplY3QgYW5kIHRoZSBuYW1lIG9mIHRoZSBldmVudCwgaW4gdGhhdCBvcmRlci5cbiAqL1xuRXZlbnRCdXMucHJvdG90eXBlLnRyaWdnZXJBc3luYyA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgZGF0YSkge1xuICBzZXRUaW1lb3V0KCgpID0+IHRoaXMudHJpZ2dlcihldmVudE5hbWUsIGRhdGEpLCAwKTtcbn07XG5cbi8qKlxuICogUmV0dXJucyBhIGNsb3N1cmUgd2hpY2ggYnJpZGdlcyBhbiBldmVudCBmcm9tIGFub3RoZXIgRXZlbnRCdXMgdG8gdGhpcyBidXMuXG4gKlxuICogVXNhZ2U6XG4gKiBjb25kdWl0Lm9uVXBzdHJlYW0oXCJNeUV2ZW50XCIsIGJ1cy5icmlkZ2UoKSk7XG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS5icmlkZ2UgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICByZXR1cm4gZnVuY3Rpb24oZGF0YSwgZXZlbnQpIHtcbiAgICBzZWxmLnRyaWdnZXIoZXZlbnQsIGRhdGEpO1xuICB9O1xufTtcblxuLyoqXG4gKiBVbnN1YnNjcmliZSBhbGwgZXZlbnRzIGluIHRoZSBldmVudCBidXMuXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS51bnN1YnNjcmliZUFsbCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLnN1Yk1hcC5nZXRBbGxTdWJzY3JpcHRpb25zKCkuZm9yRWFjaChmdW5jdGlvbihzdWIpIHtcbiAgICBzdWIudW5zdWJzY3JpYmUoKTtcbiAgfSk7XG59O1xuXG5leHBvcnQgeyBFdmVudEJ1cyB9O1xuIiwiaW1wb3J0IHsgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIH0gZnJvbSBcIi4uL2V4Y2VwdGlvbnNcIjtcbmltcG9ydCB7IENvbm5lY3Rpb25JbmZvVHlwZSB9IGZyb20gXCIuL2Jhc2VDb25uZWN0aW9uSGVscGVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbm5lY3Rpb25EZXRhaWxzUHJvdmlkZXIge1xuXG4gIGNvbnN0cnVjdG9yKHBhcnRpY2lwYW50VG9rZW4sIGNoYXRDbGllbnQpIHtcbiAgICB0aGlzLmNoYXRDbGllbnQgPSBjaGF0Q2xpZW50O1xuICAgIHRoaXMucGFydGljaXBhbnRUb2tlbiA9IHBhcnRpY2lwYW50VG9rZW4gfHwgbnVsbDtcbiAgICB0aGlzLmNvbm5lY3Rpb25EZXRhaWxzID0gbnVsbDtcbiAgICB0aGlzLmNvbm5lY3Rpb25Ub2tlbiA9IG51bGw7XG4gICAgdGhpcy5jb25uZWN0aW9uVG9rZW5FeHBpcnkgPSBudWxsO1xuICB9XG5cbiAgZ2V0Q29ubmVjdGlvblRva2VuKCkge1xuICAgIHJldHVybiB0aGlzLmNvbm5lY3Rpb25Ub2tlbjtcbiAgfVxuXG4gIGdldENvbm5lY3Rpb25Ub2tlbkV4cGlyeSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uVG9rZW5FeHBpcnk7XG4gIH1cblxuICBnZXRDb25uZWN0aW9uRGV0YWlscygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uRGV0YWlscztcbiAgfVxuXG4gIGZldGNoQ29ubmVjdGlvbkRldGFpbHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZldGNoQ29ubmVjdGlvbkRldGFpbHMoKS50aGVuKCgpID0+IHRoaXMuY29ubmVjdGlvbkRldGFpbHMpO1xuICB9XG5cbiAgZmV0Y2hDb25uZWN0aW9uVG9rZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ZldGNoQ29ubmVjdGlvbkRldGFpbHMoKS50aGVuKCgpID0+IHRoaXMuY29ubmVjdGlvblRva2VuKTtcbiAgfVxuXG4gIF9oYW5kbGVDcmVhdGVQYXJ0aWNpcGFudENvbm5lY3Rpb25SZXNwb25zZShjb25uZWN0aW9uRGV0YWlscykge1xuICAgIHRoaXMuY29ubmVjdGlvbkRldGFpbHMgPSB7XG4gICAgICB1cmw6IGNvbm5lY3Rpb25EZXRhaWxzLldlYnNvY2tldC5VcmwsXG4gICAgICBleHBpcnk6IGNvbm5lY3Rpb25EZXRhaWxzLldlYnNvY2tldC5Db25uZWN0aW9uRXhwaXJ5XG4gICAgfTtcbiAgICB0aGlzLmNvbm5lY3Rpb25Ub2tlbiA9IGNvbm5lY3Rpb25EZXRhaWxzLkNvbm5lY3Rpb25DcmVkZW50aWFscy5Db25uZWN0aW9uVG9rZW47XG4gICAgdGhpcy5jb25uZWN0aW9uVG9rZW5FeHBpcnkgPSBjb25uZWN0aW9uRGV0YWlscy5Db25uZWN0aW9uQ3JlZGVudGlhbHMuRXhwaXJ5O1xuICB9XG5cbiAgX2ZldGNoQ29ubmVjdGlvbkRldGFpbHMoKSB7XG4gICAgLy8gSWYgd2UgaGF2ZSBhIHBhcnRpY2lwYW50VG9rZW4sIHVzZSBpdCB0byBmZXRjaCB0aGUgYXV0aFRva2VuIGFuZCB1cmwgdGhyb3VnaCB0aGUgY3JlYXRlUGFydGljaXBhbnRDb25uZWN0aW9uIENoYXQgQVBJXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnRUb2tlbikge1xuICAgICAgcmV0dXJuIHRoaXMuY2hhdENsaWVudFxuICAgICAgICAuY3JlYXRlUGFydGljaXBhbnRDb25uZWN0aW9uKHRoaXMucGFydGljaXBhbnRUb2tlbiwgW0Nvbm5lY3Rpb25JbmZvVHlwZS5XRUJTT0NLRVQsIENvbm5lY3Rpb25JbmZvVHlwZS5DT05ORUNUSU9OX0NSRURFTlRJQUxTXSApXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gdGhpcy5faGFuZGxlQ3JlYXRlUGFydGljaXBhbnRDb25uZWN0aW9uUmVzcG9uc2UocmVzcG9uc2UuZGF0YSkpXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHtcbiAgICAgICAgICAgIHJlYXNvbjogXCJGYWlsZWQgdG8gZmV0Y2ggY29ubmVjdGlvbkRldGFpbHMgd2l0aCBjcmVhdGVQYXJ0aWNpcGFudENvbm5lY3Rpb25cIixcbiAgICAgICAgICAgIF9kZWJ1ZzogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCh7XG4gICAgICAgIHJlYXNvbjogXCJGYWlsZWQgdG8gZmV0Y2ggY29ubmVjdGlvbkRldGFpbHMuXCIsXG4gICAgICAgIF9kZWJ1ZzogbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkZhaWxlZCB0byBmZXRjaCBjb25uZWN0aW9uRGV0YWlscy5cIilcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSBcIi4uL2V2ZW50YnVzXCI7XG5pbXBvcnQgeyBMb2dNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uL2xvZ1wiO1xuaW1wb3J0IHsgXG4gIENvbm5lY3Rpb25IZWxwZXJFdmVudHMsXG4gIENvbm5lY3Rpb25IZWxwZXJTdGF0dXNcbn0gZnJvbSBcIi4vYmFzZUNvbm5lY3Rpb25IZWxwZXJcIjtcbmltcG9ydCBCYXNlQ29ubmVjdGlvbkhlbHBlciBmcm9tIFwiLi9iYXNlQ29ubmVjdGlvbkhlbHBlclwiO1xuaW1wb3J0IFdlYlNvY2tldE1hbmFnZXIgZnJvbSBcIi4uLy4uL2xpYi9hbWF6b24tY29ubmVjdC13ZWJzb2NrZXQtbWFuYWdlclwiO1xuY2xhc3MgTHBjQ29ubmVjdGlvbkhlbHBlciBleHRlbmRzIEJhc2VDb25uZWN0aW9uSGVscGVyIHtcblxuICBjb25zdHJ1Y3Rvcihjb250YWN0SWQsIGluaXRpYWxDb250YWN0SWQsIGNvbm5lY3Rpb25EZXRhaWxzUHJvdmlkZXIsIHdlYnNvY2tldE1hbmFnZXIpIHtcbiAgICBzdXBlcihjb25uZWN0aW9uRGV0YWlsc1Byb3ZpZGVyKTtcbiAgICB0aGlzLmNsZWFuVXBCYXNlSW5zdGFuY2UgPSAhd2Vic29ja2V0TWFuYWdlcjtcbiAgICB0aGlzLnRyeUNsZWFudXAoKTtcbiAgICBpZiAoIUxwY0Nvbm5lY3Rpb25IZWxwZXIuYmFzZUluc3RhbmNlKSB7XG4gICAgICBMcGNDb25uZWN0aW9uSGVscGVyLmJhc2VJbnN0YW5jZSA9IG5ldyBMUENDb25uZWN0aW9uSGVscGVyQmFzZShjb25uZWN0aW9uRGV0YWlsc1Byb3ZpZGVyLCB3ZWJzb2NrZXRNYW5hZ2VyKTtcbiAgICB9XG4gICAgdGhpcy5jb250YWN0SWQgPSBjb250YWN0SWQ7XG4gICAgdGhpcy5pbml0aWFsQ29udGFjdElkID0gaW5pdGlhbENvbnRhY3RJZDtcbiAgICB0aGlzLnN0YXR1cyA9IG51bGw7XG4gICAgdGhpcy5ldmVudEJ1cyA9IG5ldyBFdmVudEJ1cygpO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtcbiAgICAgIExwY0Nvbm5lY3Rpb25IZWxwZXIuYmFzZUluc3RhbmNlLm9uRW5kZWQodGhpcy5oYW5kbGVFbmRlZC5iaW5kKHRoaXMpKSxcbiAgICAgIExwY0Nvbm5lY3Rpb25IZWxwZXIuYmFzZUluc3RhbmNlLm9uQ29ubmVjdGlvbkdhaW4odGhpcy5oYW5kbGVDb25uZWN0aW9uR2Fpbi5iaW5kKHRoaXMpKSxcbiAgICAgIExwY0Nvbm5lY3Rpb25IZWxwZXIuYmFzZUluc3RhbmNlLm9uQ29ubmVjdGlvbkxvc3QodGhpcy5oYW5kbGVDb25uZWN0aW9uTG9zdC5iaW5kKHRoaXMpKSxcbiAgICAgIExwY0Nvbm5lY3Rpb25IZWxwZXIuYmFzZUluc3RhbmNlLm9uTWVzc2FnZSh0aGlzLmhhbmRsZU1lc3NhZ2UuYmluZCh0aGlzKSlcbiAgICBdO1xuICB9XG5cbiAgc3RhcnQoKSB7XG4gICAgc3VwZXIuc3RhcnQoKTtcbiAgICByZXR1cm4gTHBjQ29ubmVjdGlvbkhlbHBlci5iYXNlSW5zdGFuY2Uuc3RhcnQoKTtcbiAgfVxuXG4gIGVuZCgpIHtcbiAgICBzdXBlci5lbmQoKTtcbiAgICB0aGlzLmV2ZW50QnVzLnVuc3Vic2NyaWJlQWxsKCk7XG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goZiA9PiBmKCkpO1xuICAgIHRoaXMuc3RhdHVzID0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5FbmRlZDtcbiAgICB0aGlzLnRyeUNsZWFudXAoKTtcbiAgfVxuXG4gIHRyeUNsZWFudXAoKSB7XG4gICAgaWYgKExwY0Nvbm5lY3Rpb25IZWxwZXIuYmFzZUluc3RhbmNlICYmIHRoaXMuY2xlYW5VcEJhc2VJbnN0YW5jZSkge1xuICAgICAgTHBjQ29ubmVjdGlvbkhlbHBlci5iYXNlSW5zdGFuY2UuZW5kKCk7XG4gICAgICBMcGNDb25uZWN0aW9uSGVscGVyLmJhc2VJbnN0YW5jZSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZ2V0U3RhdHVzKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cyB8fCBMcGNDb25uZWN0aW9uSGVscGVyLmJhc2VJbnN0YW5jZS5nZXRTdGF0dXMoKTtcbiAgfVxuXG4gIG9uRW5kZWQoaGFuZGxlcikge1xuICAgIHJldHVybiB0aGlzLmV2ZW50QnVzLnN1YnNjcmliZShDb25uZWN0aW9uSGVscGVyRXZlbnRzLkVuZGVkLCBoYW5kbGVyKTtcbiAgfVxuXG4gIGhhbmRsZUVuZGVkKCkge1xuICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihDb25uZWN0aW9uSGVscGVyRXZlbnRzLkVuZGVkLCB7fSk7XG4gIH1cblxuICBvbkNvbm5lY3Rpb25HYWluKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudEJ1cy5zdWJzY3JpYmUoQ29ubmVjdGlvbkhlbHBlckV2ZW50cy5Db25uZWN0aW9uR2FpbmVkLCBoYW5kbGVyKTtcbiAgfVxuXG4gIGhhbmRsZUNvbm5lY3Rpb25HYWluKCkge1xuICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihDb25uZWN0aW9uSGVscGVyRXZlbnRzLkNvbm5lY3Rpb25HYWluZWQsIHt9KTtcbiAgfVxuXG4gIG9uQ29ubmVjdGlvbkxvc3QoaGFuZGxlcikge1xuICAgIHJldHVybiB0aGlzLmV2ZW50QnVzLnN1YnNjcmliZShDb25uZWN0aW9uSGVscGVyRXZlbnRzLkNvbm5lY3Rpb25Mb3N0LCBoYW5kbGVyKTtcbiAgfVxuXG4gIGhhbmRsZUNvbm5lY3Rpb25Mb3N0KCkge1xuICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihDb25uZWN0aW9uSGVscGVyRXZlbnRzLkNvbm5lY3Rpb25Mb3N0LCB7fSk7XG4gIH1cblxuICBvbk1lc3NhZ2UoaGFuZGxlcikge1xuICAgIHJldHVybiB0aGlzLmV2ZW50QnVzLnN1YnNjcmliZShDb25uZWN0aW9uSGVscGVyRXZlbnRzLkluY29taW5nTWVzc2FnZSwgaGFuZGxlcik7XG4gIH1cblxuICBoYW5kbGVNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZS5Jbml0aWFsQ29udGFjdElkID09PSB0aGlzLmluaXRpYWxDb250YWN0SWQgfHwgbWVzc2FnZS5Db250YWN0SWQgPT09IHRoaXMuY29udGFjdElkKSB7XG4gICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoQ29ubmVjdGlvbkhlbHBlckV2ZW50cy5JbmNvbWluZ01lc3NhZ2UsIG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxufVxuTHBjQ29ubmVjdGlvbkhlbHBlci5iYXNlSW5zdGFuY2UgPSBudWxsO1xuXG5cbmNsYXNzIExQQ0Nvbm5lY3Rpb25IZWxwZXJCYXNlIHtcbiAgY29uc3RydWN0b3IoY29ubmVjdGlvbkRldGFpbHNQcm92aWRlciwgd2Vic29ja2V0TWFuYWdlcikge1xuICAgIHRoaXMuc3RhdHVzID0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5OZXZlclN0YXJ0ZWQ7XG4gICAgdGhpcy5ldmVudEJ1cyA9IG5ldyBFdmVudEJ1cygpO1xuICAgIHRoaXMubG9nZ2VyID0gTG9nTWFuYWdlci5nZXRMb2dnZXIoe1xuICAgICAgcHJlZml4OiBcIkxQQyBXZWJTb2NrZXRzOiBcIlxuICAgIH0pO1xuICAgIHRoaXMuaW5pdFdlYnNvY2tldE1hbmFnZXIod2Vic29ja2V0TWFuYWdlciwgY29ubmVjdGlvbkRldGFpbHNQcm92aWRlcik7XG4gIH1cblxuICBpbml0V2Vic29ja2V0TWFuYWdlcih3ZWJzb2NrZXRNYW5hZ2VyLCBjb25uZWN0aW9uRGV0YWlsc1Byb3ZpZGVyKSB7XG4gICAgdGhpcy53ZWJzb2NrZXRNYW5hZ2VyID0gd2Vic29ja2V0TWFuYWdlciB8fCBXZWJTb2NrZXRNYW5hZ2VyLmNyZWF0ZSgpO1xuICAgIHRoaXMud2Vic29ja2V0TWFuYWdlci5zdWJzY3JpYmVUb3BpY3MoW1wiYXdzL2NoYXRcIl0pO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtcbiAgICAgIHRoaXMud2Vic29ja2V0TWFuYWdlci5vbk1lc3NhZ2UoXCJhd3MvY2hhdFwiLCB0aGlzLmhhbmRsZU1lc3NhZ2UuYmluZCh0aGlzKSksXG4gICAgICB0aGlzLndlYnNvY2tldE1hbmFnZXIub25Db25uZWN0aW9uR2Fpbih0aGlzLmhhbmRsZUNvbm5lY3Rpb25HYWluLmJpbmQodGhpcykpLFxuICAgICAgdGhpcy53ZWJzb2NrZXRNYW5hZ2VyLm9uQ29ubmVjdGlvbkxvc3QodGhpcy5oYW5kbGVDb25uZWN0aW9uTG9zdC5iaW5kKHRoaXMpKSxcbiAgICAgIHRoaXMud2Vic29ja2V0TWFuYWdlci5vbkluaXRGYWlsdXJlKHRoaXMuaGFuZGxlRW5kZWQuYmluZCh0aGlzKSlcbiAgICBdO1xuICAgIGlmICghd2Vic29ja2V0TWFuYWdlcikge1xuICAgICAgdGhpcy53ZWJzb2NrZXRNYW5hZ2VyLmluaXQoXG4gICAgICAgICgpID0+IGNvbm5lY3Rpb25EZXRhaWxzUHJvdmlkZXIuZmV0Y2hDb25uZWN0aW9uRGV0YWlscygpXG4gICAgICAgICAgLnRoZW4oY29ubmVjdGlvbkRldGFpbHMgPT4gKHtcbiAgICAgICAgICAgIHdlYlNvY2tldFRyYW5zcG9ydDoge1xuICAgICAgICAgICAgICB1cmw6IGNvbm5lY3Rpb25EZXRhaWxzLnVybCxcbiAgICAgICAgICAgICAgZXhwaXJ5OiBjb25uZWN0aW9uRGV0YWlscy5leHBpcnlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSlcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgZW5kKCkge1xuICAgIHRoaXMud2Vic29ja2V0TWFuYWdlci5jbG9zZVdlYlNvY2tldCgpO1xuICAgIHRoaXMuZXZlbnRCdXMudW5zdWJzY3JpYmVBbGwoKTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuZm9yRWFjaChmID0+IGYoKSk7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5zdGF0dXMgPT09IENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuTmV2ZXJTdGFydGVkKSB7XG4gICAgICB0aGlzLnN0YXR1cyA9IENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuU3RhcnRpbmc7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIG9uRW5kZWQoaGFuZGxlcikge1xuICAgIHJldHVybiB0aGlzLmV2ZW50QnVzLnN1YnNjcmliZShDb25uZWN0aW9uSGVscGVyRXZlbnRzLkVuZGVkLCBoYW5kbGVyKTtcbiAgfVxuXG4gIGhhbmRsZUVuZGVkKCkge1xuICAgIHRoaXMuc3RhdHVzID0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5FbmRlZDtcbiAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoQ29ubmVjdGlvbkhlbHBlckV2ZW50cy5FbmRlZCwge30pO1xuICB9XG5cbiAgb25Db25uZWN0aW9uR2FpbihoYW5kbGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRCdXMuc3Vic2NyaWJlKENvbm5lY3Rpb25IZWxwZXJFdmVudHMuQ29ubmVjdGlvbkdhaW5lZCwgaGFuZGxlcik7XG4gIH1cblxuICBoYW5kbGVDb25uZWN0aW9uR2FpbigpIHtcbiAgICB0aGlzLnN0YXR1cyA9IENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuQ29ubmVjdGVkO1xuICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihDb25uZWN0aW9uSGVscGVyRXZlbnRzLkNvbm5lY3Rpb25HYWluZWQsIHt9KTtcbiAgfVxuXG4gIG9uQ29ubmVjdGlvbkxvc3QoaGFuZGxlcikge1xuICAgIHJldHVybiB0aGlzLmV2ZW50QnVzLnN1YnNjcmliZShDb25uZWN0aW9uSGVscGVyRXZlbnRzLkNvbm5lY3Rpb25Mb3N0LCBoYW5kbGVyKTtcbiAgfVxuXG4gIGhhbmRsZUNvbm5lY3Rpb25Mb3N0KCkge1xuICAgIHRoaXMuc3RhdHVzID0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5Db25uZWN0aW9uTG9zdDtcbiAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoQ29ubmVjdGlvbkhlbHBlckV2ZW50cy5Db25uZWN0aW9uTG9zdCwge30pO1xuICB9XG5cbiAgb25NZXNzYWdlKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudEJ1cy5zdWJzY3JpYmUoQ29ubmVjdGlvbkhlbHBlckV2ZW50cy5JbmNvbWluZ01lc3NhZ2UsIGhhbmRsZXIpO1xuICB9XG5cbiAgaGFuZGxlTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgbGV0IHBhcnNlZE1lc3NhZ2U7XG4gICAgdHJ5IHtcbiAgICAgIHBhcnNlZE1lc3NhZ2UgPSBKU09OLnBhcnNlKG1lc3NhZ2UuY29udGVudCk7XG4gICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoQ29ubmVjdGlvbkhlbHBlckV2ZW50cy5JbmNvbWluZ01lc3NhZ2UsIHBhcnNlZE1lc3NhZ2UpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKGBXcm9uZyBtZXNzYWdlIGZvcm1hdDogYCwgbWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0U3RhdHVzKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMcGNDb25uZWN0aW9uSGVscGVyO1xuIiwiaW1wb3J0IHsgQ29ubmVjdGlvbkhlbHBlclN0YXR1cyB9IGZyb20gXCIuL2Nvbm5lY3Rpb25IZWxwZXJzL2Jhc2VDb25uZWN0aW9uSGVscGVyXCI7XG5pbXBvcnQge1xuICBDSEFUX0VWRU5UUyxcbiAgVFJBTlNDUklQVF9ERUZBVUxUX1BBUkFNUyxcbiAgU0VTU0lPTl9UWVBFUyxcbiAgQ09OVEVOVF9UWVBFXG59IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IExvZ01hbmFnZXIgfSBmcm9tIFwiLi4vbG9nXCI7XG5pbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gXCIuL2V2ZW50YnVzXCI7XG5pbXBvcnQgeyBDaGF0U2VydmljZUFyZ3NWYWxpZGF0b3IgfSBmcm9tIFwiLi9jaGF0QXJnc1ZhbGlkYXRvclwiO1xuaW1wb3J0IENvbm5lY3Rpb25EZXRhaWxzUHJvdmlkZXIgZnJvbSBcIi4vY29ubmVjdGlvbkhlbHBlcnMvY29ubmVjdGlvbkRldGFpbHNQcm92aWRlclwiO1xuaW1wb3J0IExwY0Nvbm5lY3Rpb25IZWxwZXIgZnJvbSBcIi4vY29ubmVjdGlvbkhlbHBlcnMvTHBjQ29ubmVjdGlvbkhlbHBlclwiO1xuXG5cbnZhciBOZXR3b3JrTGlua1N0YXR1cyA9IHtcbiAgTmV2ZXJFc3RhYmxpc2hlZDogXCJOZXZlckVzdGFibGlzaGVkXCIsXG4gIEVzdGFibGlzaGluZzogXCJFc3RhYmxpc2hpbmdcIixcbiAgRXN0YWJsaXNoZWQ6IFwiRXN0YWJsaXNoZWRcIixcbiAgQnJva2VuOiBcIkJyb2tlblwiXG59O1xuXG52YXIgQUNDRVNTX0RFTklFRF9FWENFUFRJT04gPSBcIkFjY2Vzc0RlbmllZEV4Y2VwdGlvblwiO1xuXG5jbGFzcyBDaGF0Q29udHJvbGxlciB7XG5cbiAgY29uc3RydWN0b3IoYXJncykge1xuICAgIHRoaXMubG9nZ2VyID0gTG9nTWFuYWdlci5nZXRMb2dnZXIoe1xuICAgICAgcHJlZml4OiBcIkNvbnRhY3RJZC1cIiArIGFyZ3MuY2hhdERldGFpbHMuY29udGFjdElkICsgXCI6IFwiXG4gICAgfSk7XG4gICAgdGhpcy5hcmdzVmFsaWRhdG9yID0gbmV3IENoYXRTZXJ2aWNlQXJnc1ZhbGlkYXRvcigpO1xuICAgIHRoaXMucHVic3ViID0gbmV3IEV2ZW50QnVzKCk7XG4gICAgdGhpcy5zZXNzaW9uVHlwZSA9IGFyZ3Muc2Vzc2lvblR5cGU7XG4gICAgdGhpcy5jb25uZWN0aW9uRGV0YWlscyA9IGFyZ3MuY2hhdERldGFpbHMuY29ubmVjdGlvbkRldGFpbHM7XG4gICAgdGhpcy5pbml0aWFsQ29udGFjdElkID0gYXJncy5jaGF0RGV0YWlscy5pbml0aWFsQ29udGFjdElkO1xuICAgIHRoaXMuY29udGFjdElkID0gYXJncy5jaGF0RGV0YWlscy5jb250YWN0SWQ7XG4gICAgdGhpcy5wYXJ0aWNpcGFudElkID0gYXJncy5jaGF0RGV0YWlscy5wYXJ0aWNpcGFudElkO1xuICAgIHRoaXMuY2hhdENsaWVudCA9IGFyZ3MuY2hhdENsaWVudDtcbiAgICB0aGlzLnBhcnRpY2lwYW50VG9rZW4gPSBhcmdzLmNoYXREZXRhaWxzLnBhcnRpY2lwYW50VG9rZW47XG4gICAgdGhpcy53ZWJzb2NrZXRNYW5hZ2VyID0gYXJncy53ZWJzb2NrZXRNYW5hZ2VyO1xuICAgIHRoaXMuX3BhcnRpY2lwYW50RGlzY29ubmVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy5zZXNzaW9uTWV0YWRhdGEgPSB7fTtcbiAgfVxuXG4gIHN1YnNjcmliZShldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5wdWJzdWIuc3Vic2NyaWJlKGV2ZW50TmFtZSwgY2FsbGJhY2spO1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJTdWJzY3JpYmVkIHN1Y2Nlc3NmdWxseSB0byBldmVudE5hbWU6IFwiLCBldmVudE5hbWUpO1xuICB9XG5cbiAgaGFuZGxlUmVxdWVzdFN1Y2Nlc3MobWV0YWRhdGEsIHJlcXVlc3QsIHJlcXVlc3ROYW1lKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlID0+IHtcbiAgICAgIHJlc3BvbnNlLm1ldGFkYXRhID0gbWV0YWRhdGE7XG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgJHtyZXF1ZXN0TmFtZX0gc3VjY2Vzc2Z1bCEgUmVzcG9uc2U6IGAsIHJlc3BvbnNlLCBcIiAvIFJlcXVlc3Q6IFwiLCByZXF1ZXN0KTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9O1xuICB9XG5cbiAgaGFuZGxlUmVxdWVzdEZhaWx1cmUobWV0YWRhdGEsIHJlcXVlc3QsIHJlcXVlc3ROYW1lKSB7XG4gICAgcmV0dXJuIGVycm9yID0+IHtcbiAgICAgIGVycm9yLm1ldGFkYXRhID0gbWV0YWRhdGE7XG4gICAgICB0aGlzLmxvZ2dlci5kZWJ1ZyhgJHtyZXF1ZXN0TmFtZX0gZmFpbGVkISBFcnJvcjogYCwgZXJyb3IsIFwiIC8gUmVxdWVzdDogXCIsIHJlcXVlc3QpO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICB9O1xuICB9XG5cbiAgc2VuZE1lc3NhZ2UoYXJncykge1xuICAgIGNvbnN0IG1ldGFkYXRhID0gYXJncy5tZXRhZGF0YSB8fCBudWxsO1xuICAgIHRoaXMuYXJnc1ZhbGlkYXRvci52YWxpZGF0ZVNlbmRNZXNzYWdlKGFyZ3MpO1xuICAgIGNvbnN0IGNvbm5lY3Rpb25Ub2tlbiA9IHRoaXMuY29ubmVjdGlvbkhlbHBlci5nZXRDb25uZWN0aW9uVG9rZW4oKTtcbiAgICByZXR1cm4gdGhpcy5jaGF0Q2xpZW50XG4gICAgICAuc2VuZE1lc3NhZ2UoY29ubmVjdGlvblRva2VuLCBhcmdzLm1lc3NhZ2UsIGFyZ3MuY29udGVudFR5cGUpXG4gICAgICAudGhlbih0aGlzLmhhbmRsZVJlcXVlc3RTdWNjZXNzKG1ldGFkYXRhLCBhcmdzLCBcInNlbmRNZXNzYWdlXCIpKVxuICAgICAgLmNhdGNoKHRoaXMuaGFuZGxlUmVxdWVzdEZhaWx1cmUobWV0YWRhdGEsIGFyZ3MsIFwic2VuZE1lc3NhZ2VcIikpO1xuICB9XG5cbiAgc2VuZEV2ZW50KGFyZ3MpIHtcbiAgICBjb25zdCBtZXRhZGF0YSA9IGFyZ3MubWV0YWRhdGEgfHwgbnVsbDtcbiAgICB0aGlzLmFyZ3NWYWxpZGF0b3IudmFsaWRhdGVTZW5kRXZlbnQoYXJncyk7XG4gICAgY29uc3QgY29ubmVjdGlvblRva2VuID0gdGhpcy5jb25uZWN0aW9uSGVscGVyLmdldENvbm5lY3Rpb25Ub2tlbigpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBhcmdzLmNvbnRlbnQgfHwgbnVsbDtcbiAgICByZXR1cm4gdGhpcy5jaGF0Q2xpZW50XG4gICAgICAuc2VuZEV2ZW50KFxuICAgICAgICBjb25uZWN0aW9uVG9rZW4sXG4gICAgICAgIGFyZ3MuY29udGVudFR5cGUsXG4gICAgICAgIGNvbnRlbnRcbiAgICAgIClcbiAgICAgIC50aGVuKHRoaXMuaGFuZGxlUmVxdWVzdFN1Y2Nlc3MobWV0YWRhdGEsIGFyZ3MsIFwic2VuZEV2ZW50XCIpKVxuICAgICAgLmNhdGNoKHRoaXMuaGFuZGxlUmVxdWVzdEZhaWx1cmUobWV0YWRhdGEsIGFyZ3MsIFwic2VuZEV2ZW50XCIpKTtcbiAgfVxuXG4gIGdldFRyYW5zY3JpcHQoaW5wdXRBcmdzKSB7XG4gICAgaWYgKHRoaXMuY29ubmVjdGlvbkhlbHBlci5nZXRTdGF0dXMoKSA9PT0gQ29ubmVjdGlvbkhlbHBlclN0YXR1cy5FbmRlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KEFDQ0VTU19ERU5JRURfRVhDRVBUSU9OKTtcbiAgICB9XG4gICAgY29uc3QgbWV0YWRhdGEgPSBpbnB1dEFyZ3MubWV0YWRhdGEgfHwgbnVsbDtcbiAgICBjb25zdCBhcmdzID0ge1xuICAgICAgc3RhcnRQb3NpdGlvbjogaW5wdXRBcmdzLnN0YXJ0UG9zaXRpb24gfHwge30sXG4gICAgICBzY2FuRGlyZWN0aW9uOiBpbnB1dEFyZ3Muc2NhbkRpcmVjdGlvbiB8fCBUUkFOU0NSSVBUX0RFRkFVTFRfUEFSQU1TLlNDQU5fRElSRUNUSU9OLFxuICAgICAgc29ydE9yZGVyOiBpbnB1dEFyZ3Muc29ydE9yZGVyIHx8IFRSQU5TQ1JJUFRfREVGQVVMVF9QQVJBTVMuU09SVF9PUkRFUixcbiAgICAgIG1heFJlc3VsdHM6IGlucHV0QXJncy5tYXhSZXN1bHRzIHx8IFRSQU5TQ1JJUFRfREVGQVVMVF9QQVJBTVMuTUFYX1JFU1VMVFMsXG4gICAgfTtcbiAgICBpZiAoaW5wdXRBcmdzLm5leHRUb2tlbikge1xuICAgICAgYXJncy5uZXh0VG9rZW4gPSBpbnB1dEFyZ3MubmV4dFRva2VuO1xuICAgIH1cbiAgICBpZiAoaW5wdXRBcmdzLmNvbnRhY3RJZCkge1xuICAgICAgYXJncy5jb250YWN0SWQgPSBpbnB1dEFyZ3MuY29udGFjdElkO1xuICAgIH1cbiAgICBjb25zdCBjb25uZWN0aW9uVG9rZW4gPSB0aGlzLmNvbm5lY3Rpb25IZWxwZXIuZ2V0Q29ubmVjdGlvblRva2VuKCk7XG4gICAgcmV0dXJuIHRoaXMuY2hhdENsaWVudFxuICAgICAgLmdldFRyYW5zY3JpcHQoY29ubmVjdGlvblRva2VuLCBhcmdzKVxuICAgICAgLnRoZW4odGhpcy5oYW5kbGVSZXF1ZXN0U3VjY2VzcyhtZXRhZGF0YSwgYXJncywgXCJnZXRUcmFuc2NyaXB0XCIpKVxuICAgICAgLmNhdGNoKHRoaXMuaGFuZGxlUmVxdWVzdEZhaWx1cmUobWV0YWRhdGEsIGFyZ3MsIFwiZ2V0VHJhbnNjcmlwdFwiKSk7XG4gIH1cblxuICBjb25uZWN0KGFyZ3M9e30pIHtcbiAgICB0aGlzLnNlc3Npb25NZXRhZGF0YSA9IGFyZ3MubWV0YWRhdGEgfHwgbnVsbDtcbiAgICB0aGlzLmFyZ3NWYWxpZGF0b3IudmFsaWRhdGVDb25uZWN0Q2hhdChhcmdzKTtcbiAgICBjb25zdCBjb25uZWN0aW9uRGV0YWlsc1Byb3ZpZGVyID0gdGhpcy5fZ2V0Q29ubmVjdGlvbkRldGFpbHNQcm92aWRlcigpO1xuICAgIHJldHVybiBjb25uZWN0aW9uRGV0YWlsc1Byb3ZpZGVyLmZldGNoQ29ubmVjdGlvblRva2VuKClcbiAgICAudGhlbihcbiAgICAgIHRoaXMuX2luaXRDb25uZWN0aW9uSGVscGVyLmJpbmQodGhpcywgY29ubmVjdGlvbkRldGFpbHNQcm92aWRlcilcbiAgICApXG4gICAgLnRoZW4oXG4gICAgICB0aGlzLl9vbkNvbm5lY3RTdWNjZXNzLmJpbmQodGhpcyksXG4gICAgICB0aGlzLl9vbkNvbm5lY3RGYWlsdXJlLmJpbmQodGhpcylcbiAgICApO1xuICB9XG5cbiAgX2luaXRDb25uZWN0aW9uSGVscGVyKGNvbm5lY3Rpb25EZXRhaWxzUHJvdmlkZXIpIHtcbiAgICB0aGlzLmNvbm5lY3Rpb25IZWxwZXIgPSBuZXcgTHBjQ29ubmVjdGlvbkhlbHBlcihcbiAgICAgIHRoaXMuY29udGFjdElkLFxuICAgICAgdGhpcy5pbml0aWFsQ29udGFjdElkLFxuICAgICAgY29ubmVjdGlvbkRldGFpbHNQcm92aWRlcixcbiAgICAgIHRoaXMud2Vic29ja2V0TWFuYWdlclxuICAgICk7XG4gICAgdGhpcy5jb25uZWN0aW9uSGVscGVyLm9uRW5kZWQodGhpcy5faGFuZGxlRW5kZWRDb25uZWN0aW9uLmJpbmQodGhpcykpO1xuICAgIHRoaXMuY29ubmVjdGlvbkhlbHBlci5vbkNvbm5lY3Rpb25Mb3N0KHRoaXMuX2hhbmRsZUxvc3RDb25uZWN0aW9uLmJpbmQodGhpcykpO1xuICAgIHRoaXMuY29ubmVjdGlvbkhlbHBlci5vbkNvbm5lY3Rpb25HYWluKHRoaXMuX2hhbmRsZUdhaW5lZENvbm5lY3Rpb24uYmluZCh0aGlzKSk7XG4gICAgdGhpcy5jb25uZWN0aW9uSGVscGVyLm9uTWVzc2FnZSh0aGlzLl9oYW5kbGVJbmNvbWluZ01lc3NhZ2UuYmluZCh0aGlzKSk7XG4gICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbkhlbHBlci5zdGFydCgpO1xuICB9XG5cbiAgX2dldENvbm5lY3Rpb25EZXRhaWxzUHJvdmlkZXIoKSB7XG4gICAgcmV0dXJuIG5ldyBDb25uZWN0aW9uRGV0YWlsc1Byb3ZpZGVyKFxuICAgICAgdGhpcy5wYXJ0aWNpcGFudFRva2VuLCBcbiAgICAgIHRoaXMuY2hhdENsaWVudFxuICAgICk7XG4gIH1cblxuICBfaGFuZGxlRW5kZWRDb25uZWN0aW9uKGV2ZW50RGF0YSkge1xuICAgIHRoaXMuX2ZvcndhcmRDaGF0RXZlbnQoQ0hBVF9FVkVOVFMuQ09OTkVDVElPTl9CUk9LRU4sIHtcbiAgICAgIGRhdGE6IGV2ZW50RGF0YSxcbiAgICAgIGNoYXREZXRhaWxzOiB0aGlzLmdldENoYXREZXRhaWxzKClcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMb3N0Q29ubmVjdGlvbihldmVudERhdGEpIHtcbiAgICB0aGlzLl9mb3J3YXJkQ2hhdEV2ZW50KENIQVRfRVZFTlRTLkNPTk5FQ1RJT05fTE9TVCwge1xuICAgICAgZGF0YTogZXZlbnREYXRhLFxuICAgICAgY2hhdERldGFpbHM6IHRoaXMuZ2V0Q2hhdERldGFpbHMoKVxuICAgIH0pO1xuICB9XG5cbiAgX2hhbmRsZUdhaW5lZENvbm5lY3Rpb24oZXZlbnREYXRhKSB7XG4gICAgdGhpcy5fZm9yd2FyZENoYXRFdmVudChDSEFUX0VWRU5UUy5DT05ORUNUSU9OX0VTVEFCTElTSEVELCB7XG4gICAgICBkYXRhOiBldmVudERhdGEsXG4gICAgICBjaGF0RGV0YWlsczogdGhpcy5nZXRDaGF0RGV0YWlscygpXG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlSW5jb21pbmdNZXNzYWdlKGluY29taW5nRGF0YSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBldmVudFR5cGUgPSBpbmNvbWluZ0RhdGEuQ29udGVudFR5cGUgPT09IENPTlRFTlRfVFlQRS50eXBpbmcgPyBDSEFUX0VWRU5UUy5JTkNPTUlOR19UWVBJTkcgOiBDSEFUX0VWRU5UUy5JTkNPTUlOR19NRVNTQUdFO1xuICAgICAgdGhpcy5fZm9yd2FyZENoYXRFdmVudChldmVudFR5cGUsIHtcbiAgICAgICAgZGF0YTogaW5jb21pbmdEYXRhLFxuICAgICAgICBjaGF0RGV0YWlsczogdGhpcy5nZXRDaGF0RGV0YWlscygpXG4gICAgICB9KTtcbiAgICAgIGlmIChpbmNvbWluZ0RhdGEuQ29udGVudFR5cGUgPT09IENPTlRFTlRfVFlQRS5jaGF0RW5kZWQpIHtcbiAgICAgICAgdGhpcy5fZm9yd2FyZENoYXRFdmVudChDSEFUX0VWRU5UUy5DSEFUX0VOREVELCB7XG4gICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICBjaGF0RGV0YWlsczogdGhpcy5nZXRDaGF0RGV0YWlscygpXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJyZWFrQ29ubmVjdGlvbigpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgICBcIkVycm9yIG9jY3VyZWQgd2hpbGUgaGFuZGxpbmcgbWVzc2FnZSBmcm9tIENvbm5lY3Rpb24uIGV2ZW50RGF0YTogXCIsXG4gICAgICAgIGluY29taW5nRGF0YSxcbiAgICAgICAgXCIgQ2F1c2luZyBleGNlcHRpb246IFwiLFxuICAgICAgICBlXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIF9mb3J3YXJkQ2hhdEV2ZW50KGV2ZW50TmFtZSwgZXZlbnREYXRhKSB7XG4gICAgdGhpcy5sb2dnZXIuZGVidWcoXCJUcmlnZ2VyaW5nIGV2ZW50IGZvciBzdWJzY3JpYmVyczpcIiwgZXZlbnROYW1lLCBldmVudERhdGEpO1xuICAgIHRoaXMucHVic3ViLnRyaWdnZXJBc3luYyhldmVudE5hbWUsIGV2ZW50RGF0YSk7XG4gIH1cblxuICBfb25Db25uZWN0U3VjY2VzcyhyZXNwb25zZSkge1xuICAgIHRoaXMubG9nZ2VyLmluZm8oXCJDb25uZWN0IHN1Y2Nlc3NmdWwhXCIpO1xuICAgIGNvbnN0IHJlc3BvbnNlT2JqZWN0ID0ge1xuICAgICAgX2RlYnVnOiByZXNwb25zZSxcbiAgICAgIGNvbm5lY3RTdWNjZXNzOiB0cnVlLFxuICAgICAgY29ubmVjdENhbGxlZDogdHJ1ZSxcbiAgICAgIG1ldGFkYXRhOiB0aGlzLnNlc3Npb25NZXRhZGF0YVxuICAgIH07XG4gICAgY29uc3QgZXZlbnREYXRhID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICBjaGF0RGV0YWlsczogdGhpcy5nZXRDaGF0RGV0YWlscygpXG4gICAgfSwgcmVzcG9uc2VPYmplY3QpO1xuICAgIHRoaXMucHVic3ViLnRyaWdnZXJBc3luYyhDSEFUX0VWRU5UUy5DT05ORUNUSU9OX0VTVEFCTElTSEVELCBldmVudERhdGEpO1xuXG4gICAgaWYgKHRoaXMuX3Nob3VsZEFja25vd2xlZGdlQ29udGFjdCgpKSB7XG4gICAgICB0aGlzLnNlbmRFdmVudCh7XG4gICAgICAgIGNvbnRlbnRUeXBlOiBDT05URU5UX1RZUEUuY29ubmVjdGlvbkFja25vd2xlZGdlZFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlT2JqZWN0O1xuICB9XG5cbiAgX29uQ29ubmVjdEZhaWx1cmUoZXJyb3IpIHtcbiAgICBjb25zdCBlcnJvck9iamVjdCA9IHtcbiAgICAgIF9kZWJ1ZzogZXJyb3IsXG4gICAgICBjb25uZWN0U3VjY2VzczogZmFsc2UsXG4gICAgICBjb25uZWN0Q2FsbGVkOiB0cnVlLFxuICAgICAgbWV0YWRhdGE6IHRoaXMuc2Vzc2lvbk1ldGFkYXRhXG4gICAgfTtcbiAgICB0aGlzLmxvZ2dlci5lcnJvcihcIkNvbm5lY3QgRmFpbGVkIHdpdGggZGF0YTogXCIsIGVycm9yT2JqZWN0KTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3JPYmplY3QpO1xuICB9XG5cbiAgX3Nob3VsZEFja25vd2xlZGdlQ29udGFjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5zZXNzaW9uVHlwZSA9PT0gU0VTU0lPTl9UWVBFUy5BR0VOVDtcbiAgfVxuXG4gIGJyZWFrQ29ubmVjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uSGVscGVyXG4gICAgICA/IHRoaXMuY29ubmVjdGlvbkhlbHBlci5lbmQoKVxuICAgICAgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIC8vIERvIGFueSBjbGVhbiB1cCB0aGF0IG5lZWRzIHRvIGJlIGRvbmUgdXBvbiB0aGUgcGFydGljaXBhbnQgYmVpbmcgZGlzY29ubmVjdGVkIGZyb20gdGhlIGNoYXQgLVxuICAvLyBkaXNjb25uZWN0ZWQgaGVyZSBtZWFucyB0aGF0IHRoZSBwYXJ0aWNpcGFudCBpcyBubyBsb25nZXIgcGFydCBvZiB0aGVyIGNoYXQuXG4gIGNsZWFuVXBPblBhcnRpY2lwYW50RGlzY29ubmVjdCgpIHtcbiAgICB0aGlzLnB1YnN1Yi51bnN1YnNjcmliZUFsbCgpO1xuICB9XG5cbiAgZGlzY29ubmVjdFBhcnRpY2lwYW50KCkge1xuICAgIGNvbnN0IGNvbm5lY3Rpb25Ub2tlbiA9IHRoaXMuY29ubmVjdGlvbkhlbHBlci5nZXRDb25uZWN0aW9uVG9rZW4oKTtcbiAgICByZXR1cm4gdGhpcy5jaGF0Q2xpZW50XG4gICAgICAuZGlzY29ubmVjdFBhcnRpY2lwYW50KGNvbm5lY3Rpb25Ub2tlbilcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgdGhpcy5sb2dnZXIuaW5mbyhcImRpc2Nvbm5lY3QgcGFydGljaXBhbnQgc3VjY2Vzc2Z1bFwiKTtcbiAgICAgICAgdGhpcy5fcGFydGljaXBhbnREaXNjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmNsZWFuVXBPblBhcnRpY2lwYW50RGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLmJyZWFrQ29ubmVjdGlvbigpO1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKFwiZGlzY29ubmVjdCBwYXJ0aWNpcGFudCBmYWlsZWQgd2l0aCBlcnJvcjogXCIsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0Q2hhdERldGFpbHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGluaXRpYWxDb250YWN0SWQ6IHRoaXMuaW5pdGlhbENvbnRhY3RJZCxcbiAgICAgIGNvbnRhY3RJZDogdGhpcy5jb250YWN0SWQsXG4gICAgICBwYXJ0aWNpcGFudElkOiB0aGlzLnBhcnRpY2lwYW50SWQsXG4gICAgICBwYXJ0aWNpcGFudFRva2VuOiB0aGlzLnBhcnRpY2lwYW50VG9rZW4sXG4gICAgICBjb25uZWN0aW9uRGV0YWlsczogdGhpcy5jb25uZWN0aW9uRGV0YWlsc1xuICAgIH07XG4gIH1cblxuICBfY29udmVydENvbm5lY3Rpb25IZWxwZXJTdGF0dXMoY29ubmVjdGlvbkhlbHBlclN0YXR1cykge1xuICAgIHN3aXRjaCAoY29ubmVjdGlvbkhlbHBlclN0YXR1cykge1xuICAgICAgY2FzZSBDb25uZWN0aW9uSGVscGVyU3RhdHVzLk5ldmVyU3RhcnRlZDpcbiAgICAgICAgcmV0dXJuIE5ldHdvcmtMaW5rU3RhdHVzLk5ldmVyRXN0YWJsaXNoZWQ7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuU3RhcnRpbmc6XG4gICAgICAgIHJldHVybiBOZXR3b3JrTGlua1N0YXR1cy5Fc3RhYmxpc2hpbmc7XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuRW5kZWQ6XG4gICAgICAgIHJldHVybiBOZXR3b3JrTGlua1N0YXR1cy5Ccm9rZW47XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuQ29ubmVjdGlvbkxvc3Q6XG4gICAgICAgIHJldHVybiBOZXR3b3JrTGlua1N0YXR1cy5Ccm9rZW47XG4gICAgICBjYXNlIENvbm5lY3Rpb25IZWxwZXJTdGF0dXMuQ29ubmVjdGVkOlxuICAgICAgICByZXR1cm4gTmV0d29ya0xpbmtTdGF0dXMuRXN0YWJsaXNoZWQ7XG4gICAgfVxuICAgIHRoaXMubG9nZ2VyLmVycm9yKFxuICAgICAgXCJSZWFjaGVkIGludmFsaWQgc3RhdGUuIFVua25vd24gY29ubmVjdGlvbkhlbHBlclN0YXR1czogXCIsXG4gICAgICBjb25uZWN0aW9uSGVscGVyU3RhdHVzXG4gICAgKTtcbiAgfVxuXG4gIGdldENvbm5lY3Rpb25TdGF0dXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRDb25uZWN0aW9uSGVscGVyU3RhdHVzKFxuICAgICAgdGhpcy5jb25uZWN0aW9uSGVscGVyLmdldFN0YXR1cygpXG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgeyBDaGF0Q29udHJvbGxlciwgTmV0d29ya0xpbmtTdGF0dXMgfTtcbiIsImltcG9ydCB7XG4gIFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24sXG4gIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvblxufSBmcm9tIFwiLi9leGNlcHRpb25zXCI7XG5pbXBvcnQgeyBDaGF0Q2xpZW50RmFjdG9yeSB9IGZyb20gXCIuLi9jbGllbnQvY2xpZW50XCI7XG5pbXBvcnQgeyBDaGF0U2VydmljZUFyZ3NWYWxpZGF0b3IgfSBmcm9tIFwiLi9jaGF0QXJnc1ZhbGlkYXRvclwiO1xuaW1wb3J0IHsgU0VTU0lPTl9UWVBFUywgQ0hBVF9FVkVOVFMgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBHbG9iYWxDb25maWcgfSBmcm9tIFwiLi4vZ2xvYmFsQ29uZmlnXCI7XG5pbXBvcnQgeyBDaGF0Q29udHJvbGxlciB9IGZyb20gXCIuL2NoYXRDb250cm9sbGVyXCI7XG5pbXBvcnQgeyBMb2dNYW5hZ2VyLCBMb2dMZXZlbCwgTG9nZ2VyIH0gZnJvbSBcIi4uL2xvZ1wiO1xuXG5jbGFzcyBDaGF0U2Vzc2lvbkZhY3Rvcnkge1xuICAvKmVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzKi9cblxuICBjcmVhdGVBZ2VudENoYXRDb250cm9sbGVyKGNoYXREZXRhaWxzLCBwYXJ0aWNpcGFudFR5cGUpIHtcbiAgICB0aHJvdyBuZXcgVW5JbXBsZW1lbnRlZE1ldGhvZEV4Y2VwdGlvbihcbiAgICAgIFwiY3JlYXRlQWdlbnRDaGF0Q29udHJvbGxlciBpbiBDaGF0Q29udHJvbGxlckZhY3RvcnkuXCJcbiAgICApO1xuICB9XG5cbiAgY3JlYXRlQ3VzdG9tZXJDaGF0Q29udHJvbGxlcihjaGF0RGV0YWlscywgcGFydGljaXBhbnRUeXBlKSB7XG4gICAgdGhyb3cgbmV3IFVuSW1wbGVtZW50ZWRNZXRob2RFeGNlcHRpb24oXG4gICAgICBcImNyZWF0ZUN1c3RvbWVyQ2hhdENvbnRyb2xsZXIgaW4gQ2hhdENvbnRyb2xsZXJGYWN0b3J5LlwiXG4gICAgKTtcbiAgfVxuICAvKmVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMqL1xufVxuXG5jbGFzcyBQZXJzaXN0ZW50Q29ubmVjdGlvbkFuZENoYXRTZXJ2aWNlU2Vzc2lvbkZhY3RvcnkgZXh0ZW5kcyBDaGF0U2Vzc2lvbkZhY3Rvcnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYXJnc1ZhbGlkYXRvciA9IG5ldyBDaGF0U2VydmljZUFyZ3NWYWxpZGF0b3IoKTtcbiAgfVxuXG4gIGNyZWF0ZUNoYXRTZXNzaW9uKHNlc3Npb25UeXBlLCBjaGF0RGV0YWlscywgb3B0aW9ucywgd2Vic29ja2V0TWFuYWdlcikge1xuICAgIGNvbnN0IGNoYXRDb250cm9sbGVyID0gdGhpcy5fY3JlYXRlQ2hhdENvbnRyb2xsZXIoc2Vzc2lvblR5cGUsIGNoYXREZXRhaWxzLCBvcHRpb25zLCB3ZWJzb2NrZXRNYW5hZ2VyKTtcbiAgICBpZiAoc2Vzc2lvblR5cGUgPT09IFNFU1NJT05fVFlQRVMuQUdFTlQpIHtcbiAgICAgIHJldHVybiBuZXcgQWdlbnRDaGF0U2Vzc2lvbihjaGF0Q29udHJvbGxlcik7XG4gICAgfSBlbHNlIGlmIChzZXNzaW9uVHlwZSA9PT0gU0VTU0lPTl9UWVBFUy5DVVNUT01FUikge1xuICAgICAgcmV0dXJuIG5ldyBDdXN0b21lckNoYXRTZXNzaW9uKGNoYXRDb250cm9sbGVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcbiAgICAgICAgXCJVbmtvd24gdmFsdWUgZm9yIHNlc3Npb24gdHlwZSwgQWxsb3dlZCB2YWx1ZXMgYXJlOiBcIiArXG4gICAgICAgICAgT2JqZWN0LnZhbHVlcyhTRVNTSU9OX1RZUEVTKSxcbiAgICAgICAgICBzZXNzaW9uVHlwZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBfY3JlYXRlQ2hhdENvbnRyb2xsZXIoc2Vzc2lvblR5cGUsIGNoYXREZXRhaWxzSW5wdXQsIG9wdGlvbnMsIHdlYnNvY2tldE1hbmFnZXIpIHtcbiAgICB2YXIgY2hhdERldGFpbHMgPSB0aGlzLmFyZ3NWYWxpZGF0b3Iubm9ybWFsaXplQ2hhdERldGFpbHMoY2hhdERldGFpbHNJbnB1dCk7XG4gICAgdmFyIGFyZ3MgPSB7XG4gICAgICBzZXNzaW9uVHlwZTogc2Vzc2lvblR5cGUsXG4gICAgICBjaGF0RGV0YWlsczogY2hhdERldGFpbHMsXG4gICAgICBjaGF0Q2xpZW50OiBDaGF0Q2xpZW50RmFjdG9yeS5nZXRDYWNoZWRDbGllbnQob3B0aW9ucyksXG4gICAgICB3ZWJzb2NrZXRNYW5hZ2VyOiB3ZWJzb2NrZXRNYW5hZ2VyXG4gICAgfTtcbiAgICByZXR1cm4gbmV3IENoYXRDb250cm9sbGVyKGFyZ3MpO1xuICB9XG59XG5cbmNsYXNzIENoYXRTZXNzaW9uIHtcbiAgY29uc3RydWN0b3IoY29udHJvbGxlcikge1xuICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gIH1cblxuICBvbk1lc3NhZ2UoY2FsbGJhY2spIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIuc3Vic2NyaWJlKENIQVRfRVZFTlRTLklOQ09NSU5HX01FU1NBR0UsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9uVHlwaW5nKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jb250cm9sbGVyLnN1YnNjcmliZShDSEFUX0VWRU5UUy5JTkNPTUlOR19UWVBJTkcsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9uQ29ubmVjdGlvbkJyb2tlbihjYWxsYmFjaykge1xuICAgIHRoaXMuY29udHJvbGxlci5zdWJzY3JpYmUoQ0hBVF9FVkVOVFMuQ09OTkVDVElPTl9CUk9LRU4sIGNhbGxiYWNrKTtcbiAgfVxuXG4gIG9uQ29ubmVjdGlvbkVzdGFibGlzaGVkKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jb250cm9sbGVyLnN1YnNjcmliZShDSEFUX0VWRU5UUy5DT05ORUNUSU9OX0VTVEFCTElTSEVELCBjYWxsYmFjayk7XG4gIH1cblxuICBvbkVuZGVkKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5jb250cm9sbGVyLnN1YnNjcmliZShDSEFUX0VWRU5UUy5DSEFUX0VOREVELCBjYWxsYmFjayk7XG4gIH1cblxuICBzZW5kTWVzc2FnZShhcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbGxlci5zZW5kTWVzc2FnZShhcmdzKTtcbiAgfVxuXG4gIGNvbm5lY3QoYXJncykge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuY29ubmVjdChhcmdzKTtcbiAgfVxuXG4gIHNlbmRFdmVudChhcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbGxlci5zZW5kRXZlbnQoYXJncyk7XG4gIH1cblxuICBnZXRUcmFuc2NyaXB0KGFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyLmdldFRyYW5zY3JpcHQoYXJncyk7XG4gIH1cblxuICBnZXRDaGF0RGV0YWlscygpIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sbGVyLmdldENoYXREZXRhaWxzKCk7XG4gIH1cbn1cblxuY2xhc3MgQWdlbnRDaGF0U2Vzc2lvbiBleHRlbmRzIENoYXRTZXNzaW9uIHtcbiAgY29uc3RydWN0b3IoY29udHJvbGxlcikge1xuICAgIHN1cGVyKGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgY2xlYW5VcE9uUGFydGljaXBhbnREaXNjb25uZWN0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuY2xlYW5VcE9uUGFydGljaXBhbnREaXNjb25uZWN0KCk7XG4gIH1cbn1cblxuY2xhc3MgQ3VzdG9tZXJDaGF0U2Vzc2lvbiBleHRlbmRzIENoYXRTZXNzaW9uIHtcbiAgY29uc3RydWN0b3IoY29udHJvbGxlcikge1xuICAgIHN1cGVyKGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgZGlzY29ubmVjdFBhcnRpY2lwYW50KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIuZGlzY29ubmVjdFBhcnRpY2lwYW50KCk7XG4gIH1cbn1cblxuY29uc3QgQ0hBVF9TRVNTSU9OX0ZBQ1RPUlkgPSBuZXcgUGVyc2lzdGVudENvbm5lY3Rpb25BbmRDaGF0U2VydmljZVNlc3Npb25GYWN0b3J5KCk7XG5cbnZhciBzZXRHbG9iYWxDb25maWcgPSBjb25maWcgPT4ge1xuICB2YXIgbG9nZ2VyQ29uZmlnID0gY29uZmlnLmxvZ2dlckNvbmZpZztcbiAgR2xvYmFsQ29uZmlnLnVwZGF0ZShjb25maWcpO1xuICBMb2dNYW5hZ2VyLnVwZGF0ZUxvZ2dlckNvbmZpZyhsb2dnZXJDb25maWcpO1xufTtcblxudmFyIENoYXRTZXNzaW9uQ29uc3RydWN0b3IgPSBhcmdzID0+IHtcbiAgdmFyIG9wdGlvbnMgPSBhcmdzLm9wdGlvbnMgfHwge307XG4gIHZhciB0eXBlID0gYXJncy50eXBlIHx8IFNFU1NJT05fVFlQRVMuQUdFTlQ7XG4gIHJldHVybiBDSEFUX1NFU1NJT05fRkFDVE9SWS5jcmVhdGVDaGF0U2Vzc2lvbihcbiAgICB0eXBlLFxuICAgIGFyZ3MuY2hhdERldGFpbHMsXG4gICAgb3B0aW9ucyxcbiAgICBhcmdzLndlYnNvY2tldE1hbmFnZXJcbiAgKTtcbn07XG5cbmNvbnN0IENoYXRTZXNzaW9uT2JqZWN0ID0ge1xuICBjcmVhdGU6IENoYXRTZXNzaW9uQ29uc3RydWN0b3IsXG4gIHNldEdsb2JhbENvbmZpZzogc2V0R2xvYmFsQ29uZmlnLFxuICBMb2dMZXZlbDogTG9nTGV2ZWwsXG4gIExvZ2dlcjogTG9nZ2VyLFxuICBTZXNzaW9uVHlwZXM6IFNFU1NJT05fVFlQRVNcbn07XG5cbmV4cG9ydCB7IENoYXRTZXNzaW9uT2JqZWN0IH07XG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCIvKmVzbGludCBuby11bnVzZWQtdmFyczogXCJvZmZcIiovXG5pbXBvcnQgeyBDaGF0U2Vzc2lvbk9iamVjdCB9IGZyb20gXCIuL2NvcmUvY2hhdFNlc3Npb25cIjtcblxuZ2xvYmFsLmNvbm5lY3QgPSBnbG9iYWwuY29ubmVjdCB8fCB7fTtcbmNvbm5lY3QuQ2hhdFNlc3Npb24gPSBDaGF0U2Vzc2lvbk9iamVjdDtcbmV4cG9ydCBjb25zdCBDaGF0U2Vzc2lvbiA9IENoYXRTZXNzaW9uT2JqZWN0O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==